!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.fengari=e():t.fengari=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,a){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=31)}([function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}for(var n=r(6),u=n.LUAI_MAXSTACK,o=[],s=0;s<127;s++)o[String.fromCharCode(s)]=s;t.exports.char=o;var l={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6},i={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};i.LUA_TSHRSTR=0|i.LUA_TSTRING,i.LUA_TLNGSTR=16|i.LUA_TSTRING,i.LUA_TNUMFLT=0|i.LUA_TNUMBER,i.LUA_TNUMINT=16|i.LUA_TNUMBER,i.LUA_TLCL=0|i.LUA_TFUNCTION,i.LUA_TLCF=16|i.LUA_TFUNCTION,i.LUA_TCCL=32|i.LUA_TFUNCTION;var c=-u-1e3,_=function(t){return c-t},f=function t(){a(this,t),this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null},p=void 0;p="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(t){for(var e=0,r=t.length,a=new Uint8Array(r);r>e;)a[e]=t[e++];return a};var v=void 0;if("function"==typeof(new Uint8Array).indexOf)v=function(t,e,r){return t.indexOf(e,r)};else{var d=[].indexOf;if(0!==d.call(new Uint8Array(1),0))throw Error("missing .indexOf");v=function(t,e,r){return d.call(t,e,r)}}var h=void 0;h="function"==typeof Uint8Array.of?Uint8Array.of.bind(Uint8Array):function(){return p(arguments)};var A=function(t){return t instanceof Uint8Array},L=function(t,e){if(t!==e){var r=t.length;if(r!==e.length)return!1;for(var a=0;a<r;a++)if(t[a]!==e[a])return!1}return!0},g=function(t,e,r){if(!A(t))throw new TypeError("to_jsstring expects a Uint8Array");r=void 0===r?t.length:Math.min(t.length,r);for(var a="",n=void 0!==e?e:0;n<r;){var u=t[n++];if(u<128)a+=String.fromCharCode(u);else{if(u<194||u>244)throw RangeError("cannot convert invalid utf8 to javascript string");if(u<=223){if(n>=r)throw RangeError("cannot convert invalid utf8 to javascript string");var o=t[n++];if(128!=(192&o))throw RangeError("cannot convert invalid utf8 to javascript string");a+=String.fromCharCode(((31&u)<<6)+(63&o))}else if(u<=239){if(n+1>=r)throw RangeError("cannot convert invalid utf8 to javascript string");var s=t[n++];if(128!=(192&s))throw RangeError("cannot convert invalid utf8 to javascript string");var l=t[n++];if(128!=(192&l))throw RangeError("cannot convert invalid utf8 to javascript string");var i=((15&u)<<12)+((63&s)<<6)+(63&l);if(i<=65535)a+=String.fromCharCode(i);else{i-=65536;var c=55296+(i>>10),_=i%1024+56320;a+=String.fromCharCode(c,_)}}else{if(n+2>=r)throw RangeError("cannot convert invalid utf8 to javascript string");var f=t[n++];if(128!=(192&f))throw RangeError("cannot convert invalid utf8 to javascript string");var p=t[n++];if(128!=(192&p))throw RangeError("cannot convert invalid utf8 to javascript string");var v=t[n++];if(128!=(192&v))throw RangeError("cannot convert invalid utf8 to javascript string");var d=((7&u)<<18)+((63&f)<<12)+((63&p)<<6)+(63&v);d-=65536;var h=55296+(d>>10),L=d%1024+56320;a+=String.fromCharCode(h,L)}}}return a},b=";,/?:@&=+$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,-_.!~*'()#".split("").reduce(function(t,e){return t[e.charCodeAt(0)]=!0,t},{}),T=function(t){if(!A(t))throw new TypeError("to_uristring expects a Uint8Array");for(var e="",r=0;r<t.length;r++){var a=t[r];b[a]?e+=String.fromCharCode(a):e+="%"+(a<16?"0":"")+a.toString(16)}return e},x={},k=function(t,e){if("string"!=typeof t)throw new TypeError("to_luastring expects a javascript string");if(e){var r=x[t];if(A(r))return r}for(var a=t.length,n=Array(a),u=0,o=0;o<a;++o){var s=t.charCodeAt(o);if(s<=127)n[u++]=s;else if(s<=2047)n[u++]=192|s>>6,n[u++]=128|63&s;else{if(s>=55296&&s<=56319&&o+1<a){var l=t.charCodeAt(o+1);l>=56320&&l<=57343&&(o++,s=1024*(s-55296)+l+9216)}s<=65535?(n[u++]=224|s>>12,n[u++]=128|s>>6&63,n[u++]=128|63&s):(n[u++]=240|s>>18,n[u++]=128|s>>12&63,n[u++]=128|s>>6&63,n[u++]=128|63&s)}}return n=p(n),e&&(x[t]=n),n},O=function(t){if(!A(t))throw new TypeError("expects an array of bytes");return t};t.exports.LUA_PATH_SEP=";";t.exports.LUA_PATH_MARK="?";t.exports.LUA_EXEC_DIR="!";t.exports.LUA_VDIR="5.3";t.exports.LUA_DIRSEP="/";t.exports.LUA_LDIR="./lua/5.3/";t.exports.LUA_CDIR="./lua/5.3/";t.exports.LUA_PATH_DEFAULT="./lua/5.3/?.lua;./lua/5.3/?/init.lua;./lua/5.3/?.lua;./lua/5.3/?/init.lua;./?.lua;./?/init.lua";t.exports.LUA_CPATH_DEFAULT="./lua/5.3/?.js;./lua/5.3/loadall.js;./?.js",t.exports.LUA_AUTHORS="R. Ierusalimschy, L. H. de Figueiredo, W. Celes",t.exports.LUA_COPYRIGHT="Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",t.exports.LUA_HOOKCALL=0,t.exports.LUA_HOOKCOUNT=3,t.exports.LUA_HOOKLINE=2,t.exports.LUA_HOOKRET=1,t.exports.LUA_HOOKTAILCALL=4,t.exports.LUA_INITVARVERSION="LUA_INIT_5_3",t.exports.LUA_INIT_VAR="LUA_INIT",t.exports.LUA_MASKCALL=1,t.exports.LUA_MASKCOUNT=8,t.exports.LUA_MASKLINE=4,t.exports.LUA_MASKRET=2,t.exports.LUA_MINSTACK=20,t.exports.LUA_MULTRET=-1,t.exports.LUA_OPADD=0,t.exports.LUA_OPBAND=7,t.exports.LUA_OPBNOT=13,t.exports.LUA_OPBOR=8,t.exports.LUA_OPBXOR=9,t.exports.LUA_OPDIV=5,t.exports.LUA_OPEQ=0,t.exports.LUA_OPIDIV=6,t.exports.LUA_OPLE=2,t.exports.LUA_OPLT=1,t.exports.LUA_OPMOD=3,t.exports.LUA_OPMUL=2,t.exports.LUA_OPPOW=4,t.exports.LUA_OPSHL=10,t.exports.LUA_OPSHR=11,t.exports.LUA_OPSUB=1,t.exports.LUA_OPUNM=12,t.exports.LUA_REGISTRYINDEX=c,t.exports.LUA_RELEASE="Lua 5.3.4",t.exports.LUA_RIDX_GLOBALS=2,t.exports.LUA_RIDX_LAST=2,t.exports.LUA_RIDX_MAINTHREAD=1,t.exports.LUA_SIGNATURE="Lua",t.exports.LUA_VERSION="Lua 5.3",t.exports.LUA_VERSION_MAJOR="5",t.exports.LUA_VERSION_MINOR="3",t.exports.LUA_VERSION_NUM=503,t.exports.LUA_VERSION_RELEASE="4",t.exports.LUA_VERSUFFIX="_5_3",t.exports.constant_types=i,t.exports.lua_Debug=f,t.exports.lua_upvalueindex=_,t.exports.thread_status=l,t.exports.is_luastring=A,t.exports.luastring_eq=L,t.exports.luastring_from=p,t.exports.luastring_indexOf=v,t.exports.luastring_of=h,t.exports.to_jsstring=g,t.exports.to_luastring=k,t.exports.to_uristring=T,t.exports.from_userstring=O},function(t,e,r){"use strict";var a=r(6),n=a.luai_apicheck,u=function(t){if(!t)throw Error("assertion failed")};t.exports.lua_assert=u,t.exports.luai_apicheck=n||function(t,e){return u(e)};var o=function(t,e,r){return n(t,e&&r)};t.exports.api_check=o;t.exports.LUAI_MAXCCALLS=200;t.exports.LUA_MINBUFFER=32;var s=function(t,e,r){var a=e%r;return a*r<0&&(a+=r),a};t.exports.luai_nummod=s;t.exports.MAX_INT=2147483647;t.exports.MIN_INT=-2147483648},function(t,e,r){"use strict";var a=r(0),n=r(17),u=r(10),o=r(7),s=r(12);t.exports.LUA_AUTHORS=a.LUA_AUTHORS,t.exports.LUA_COPYRIGHT=a.LUA_COPYRIGHT,t.exports.LUA_ERRERR=a.thread_status.LUA_ERRERR,t.exports.LUA_ERRGCMM=a.thread_status.LUA_ERRGCMM,t.exports.LUA_ERRMEM=a.thread_status.LUA_ERRMEM,t.exports.LUA_ERRRUN=a.thread_status.LUA_ERRRUN,t.exports.LUA_ERRSYNTAX=a.thread_status.LUA_ERRSYNTAX,t.exports.LUA_HOOKCALL=a.LUA_HOOKCALL,t.exports.LUA_HOOKCOUNT=a.LUA_HOOKCOUNT,t.exports.LUA_HOOKLINE=a.LUA_HOOKLINE,t.exports.LUA_HOOKRET=a.LUA_HOOKRET,t.exports.LUA_HOOKTAILCALL=a.LUA_HOOKTAILCALL,t.exports.LUA_INITVARVERSION=a.LUA_INITVARVERSION,t.exports.LUA_INIT_VAR=a.LUA_INIT_VAR,t.exports.LUA_MASKCALL=a.LUA_MASKCALL,t.exports.LUA_MASKCOUNT=a.LUA_MASKCOUNT,t.exports.LUA_MASKLINE=a.LUA_MASKLINE,t.exports.LUA_MASKRET=a.LUA_MASKRET,t.exports.LUA_MINSTACK=a.LUA_MINSTACK,t.exports.LUA_MULTRET=a.LUA_MULTRET,t.exports.LUA_NUMTAGS=a.constant_types.LUA_NUMTAGS,t.exports.LUA_OK=a.thread_status.LUA_OK,t.exports.LUA_OPADD=a.LUA_OPADD,t.exports.LUA_OPBAND=a.LUA_OPBAND,t.exports.LUA_OPBNOT=a.LUA_OPBNOT,t.exports.LUA_OPBOR=a.LUA_OPBOR,t.exports.LUA_OPBXOR=a.LUA_OPBXOR,t.exports.LUA_OPDIV=a.LUA_OPDIV,t.exports.LUA_OPEQ=a.LUA_OPEQ,t.exports.LUA_OPIDIV=a.LUA_OPIDIV,t.exports.LUA_OPLE=a.LUA_OPLE,t.exports.LUA_OPLT=a.LUA_OPLT,t.exports.LUA_OPMOD=a.LUA_OPMOD,t.exports.LUA_OPMUL=a.LUA_OPMUL,t.exports.LUA_OPPOW=a.LUA_OPPOW,t.exports.LUA_OPSHL=a.LUA_OPSHL,t.exports.LUA_OPSHR=a.LUA_OPSHR,t.exports.LUA_OPSUB=a.LUA_OPSUB,t.exports.LUA_OPUNM=a.LUA_OPUNM,t.exports.LUA_REGISTRYINDEX=a.LUA_REGISTRYINDEX,t.exports.LUA_RELEASE=a.LUA_RELEASE,t.exports.LUA_RIDX_GLOBALS=a.LUA_RIDX_GLOBALS,t.exports.LUA_RIDX_LAST=a.LUA_RIDX_LAST,t.exports.LUA_RIDX_MAINTHREAD=a.LUA_RIDX_MAINTHREAD,t.exports.LUA_SIGNATURE=a.LUA_SIGNATURE,t.exports.LUA_TNONE=a.constant_types.LUA_TNONE,t.exports.LUA_TNIL=a.constant_types.LUA_TNIL,t.exports.LUA_TBOOLEAN=a.constant_types.LUA_TBOOLEAN,t.exports.LUA_TLIGHTUSERDATA=a.constant_types.LUA_TLIGHTUSERDATA,t.exports.LUA_TNUMBER=a.constant_types.LUA_TNUMBER,t.exports.LUA_TSTRING=a.constant_types.LUA_TSTRING,t.exports.LUA_TTABLE=a.constant_types.LUA_TTABLE,t.exports.LUA_TFUNCTION=a.constant_types.LUA_TFUNCTION,t.exports.LUA_TUSERDATA=a.constant_types.LUA_TUSERDATA,t.exports.LUA_TTHREAD=a.constant_types.LUA_TTHREAD,t.exports.LUA_VERSION=a.LUA_VERSION,t.exports.LUA_VERSION_MAJOR=a.LUA_VERSION_MAJOR,t.exports.LUA_VERSION_MINOR=a.LUA_VERSION_MINOR,t.exports.LUA_VERSION_NUM=a.LUA_VERSION_NUM,t.exports.LUA_VERSION_RELEASE=a.LUA_VERSION_RELEASE,t.exports.LUA_VERSUFFIX=a.LUA_VERSUFFIX,t.exports.LUA_YIELD=a.thread_status.LUA_YIELD,t.exports.lua_Debug=a.lua_Debug,t.exports.lua_upvalueindex=a.lua_upvalueindex,t.exports.LUA_CDIR=a.LUA_CDIR,t.exports.LUA_CPATH_DEFAULT=a.LUA_CPATH_DEFAULT,t.exports.LUA_EXEC_DIR=a.LUA_EXEC_DIR,t.exports.LUA_LDIR=a.LUA_LDIR,t.exports.LUA_PATH_DEFAULT=a.LUA_PATH_DEFAULT,t.exports.LUA_PATH_MARK=a.LUA_PATH_MARK,t.exports.LUA_PATH_SEP=a.LUA_PATH_SEP,t.exports.LUA_ROOT=a.LUA_ROOT,t.exports.LUA_SHRDIR=a.LUA_SHRDIR,t.exports.LUA_VDIR=a.LUA_VDIR,t.exports.LUA_DIRSEP=a.LUA_DIRSEP,t.exports.lua_absindex=n.lua_absindex,t.exports.lua_arith=n.lua_arith,t.exports.lua_atpanic=n.lua_atpanic,t.exports.lua_atnativeerror=n.lua_atnativeerror,t.exports.lua_call=n.lua_call,t.exports.lua_callk=n.lua_callk,t.exports.lua_checkstack=n.lua_checkstack,t.exports.lua_close=s.lua_close,t.exports.lua_compare=n.lua_compare,t.exports.lua_concat=n.lua_concat,t.exports.lua_copy=n.lua_copy,t.exports.lua_createtable=n.lua_createtable,t.exports.lua_dump=n.lua_dump,t.exports.lua_error=n.lua_error,t.exports.lua_gc=n.lua_gc,t.exports.lua_getallocf=n.lua_getallocf,t.exports.lua_getextraspace=n.lua_getextraspace,t.exports.lua_getfield=n.lua_getfield,t.exports.lua_getglobal=n.lua_getglobal,t.exports.lua_gethook=u.lua_gethook,t.exports.lua_gethookcount=u.lua_gethookcount,t.exports.lua_gethookmask=u.lua_gethookmask,t.exports.lua_geti=n.lua_geti,t.exports.lua_getinfo=u.lua_getinfo,t.exports.lua_getlocal=u.lua_getlocal,t.exports.lua_getmetatable=n.lua_getmetatable,t.exports.lua_getstack=u.lua_getstack,t.exports.lua_gettable=n.lua_gettable,t.exports.lua_gettop=n.lua_gettop,t.exports.lua_getupvalue=n.lua_getupvalue,t.exports.lua_getuservalue=n.lua_getuservalue,t.exports.lua_insert=n.lua_insert,t.exports.lua_isboolean=n.lua_isboolean,t.exports.lua_iscfunction=n.lua_iscfunction,t.exports.lua_isfunction=n.lua_isfunction,t.exports.lua_isinteger=n.lua_isinteger,t.exports.lua_islightuserdata=n.lua_islightuserdata,t.exports.lua_isnil=n.lua_isnil,t.exports.lua_isnone=n.lua_isnone,t.exports.lua_isnoneornil=n.lua_isnoneornil,t.exports.lua_isnumber=n.lua_isnumber,t.exports.lua_isproxy=n.lua_isproxy,t.exports.lua_isstring=n.lua_isstring,t.exports.lua_istable=n.lua_istable,t.exports.lua_isthread=n.lua_isthread,t.exports.lua_isuserdata=n.lua_isuserdata,t.exports.lua_isyieldable=o.lua_isyieldable,t.exports.lua_len=n.lua_len,t.exports.lua_load=n.lua_load,t.exports.lua_newstate=s.lua_newstate,t.exports.lua_newtable=n.lua_newtable,t.exports.lua_newthread=s.lua_newthread,t.exports.lua_newuserdata=n.lua_newuserdata,t.exports.lua_next=n.lua_next,t.exports.lua_pcall=n.lua_pcall,t.exports.lua_pcallk=n.lua_pcallk,t.exports.lua_pop=n.lua_pop,t.exports.lua_pushboolean=n.lua_pushboolean,t.exports.lua_pushcclosure=n.lua_pushcclosure,t.exports.lua_pushcfunction=n.lua_pushcfunction,t.exports.lua_pushfstring=n.lua_pushfstring,t.exports.lua_pushglobaltable=n.lua_pushglobaltable,t.exports.lua_pushinteger=n.lua_pushinteger,t.exports.lua_pushjsclosure=n.lua_pushjsclosure,t.exports.lua_pushjsfunction=n.lua_pushjsfunction,t.exports.lua_pushlightuserdata=n.lua_pushlightuserdata,t.exports.lua_pushliteral=n.lua_pushliteral,t.exports.lua_pushlstring=n.lua_pushlstring,t.exports.lua_pushnil=n.lua_pushnil,t.exports.lua_pushnumber=n.lua_pushnumber,t.exports.lua_pushstring=n.lua_pushstring,t.exports.lua_pushthread=n.lua_pushthread,t.exports.lua_pushvalue=n.lua_pushvalue,t.exports.lua_pushvfstring=n.lua_pushvfstring,t.exports.lua_rawequal=n.lua_rawequal,t.exports.lua_rawget=n.lua_rawget,t.exports.lua_rawgeti=n.lua_rawgeti,t.exports.lua_rawgetp=n.lua_rawgetp,t.exports.lua_rawlen=n.lua_rawlen,t.exports.lua_rawset=n.lua_rawset,t.exports.lua_rawseti=n.lua_rawseti,t.exports.lua_rawsetp=n.lua_rawsetp,t.exports.lua_register=n.lua_register,t.exports.lua_remove=n.lua_remove,t.exports.lua_replace=n.lua_replace,t.exports.lua_resume=o.lua_resume,t.exports.lua_rotate=n.lua_rotate,t.exports.lua_setallof=o.lua_setallof,t.exports.lua_setfield=n.lua_setfield,t.exports.lua_setglobal=n.lua_setglobal,t.exports.lua_sethook=u.lua_sethook,t.exports.lua_seti=n.lua_seti,t.exports.lua_setlocal=u.lua_setlocal,t.exports.lua_setmetatable=n.lua_setmetatable,t.exports.lua_settable=n.lua_settable,t.exports.lua_settop=n.lua_settop,t.exports.lua_setupvalue=n.lua_setupvalue,t.exports.lua_setuservalue=n.lua_setuservalue,t.exports.lua_status=n.lua_status,t.exports.lua_stringtonumber=n.lua_stringtonumber,t.exports.lua_toboolean=n.lua_toboolean,t.exports.lua_todataview=n.lua_todataview,t.exports.lua_tointeger=n.lua_tointeger,t.exports.lua_tointegerx=n.lua_tointegerx,t.exports.lua_tojsstring=n.lua_tojsstring,t.exports.lua_toljsstring=n.lua_toljsstring,t.exports.lua_tolstring=n.lua_tolstring,t.exports.lua_tonumber=n.lua_tonumber,t.exports.lua_tonumberx=n.lua_tonumberx,t.exports.lua_topointer=n.lua_topointer,t.exports.lua_toproxy=n.lua_toproxy,t.exports.lua_tostring=n.lua_tostring,t.exports.lua_tothread=n.lua_tothread,t.exports.lua_touserdata=n.lua_touserdata,t.exports.lua_type=n.lua_type,t.exports.lua_typename=n.lua_typename,t.exports.lua_upvalueid=n.lua_upvalueid,t.exports.lua_upvaluejoin=n.lua_upvaluejoin,t.exports.lua_version=n.lua_version,t.exports.lua_xmove=n.lua_xmove,t.exports.lua_yield=o.lua_yield,t.exports.lua_yieldk=o.lua_yieldk,t.exports.lua_tocfunction=n.lua_tocfunction},function(t,e,r){"use strict";var a=r(0),n="Fengari 0.0.1  Copyright (C) 2017-2018 B. Giannangeli, Daurnimator\nBased on: "+a.LUA_COPYRIGHT;t.exports.FENGARI_AUTHORS="B. Giannangeli, Daurnimator",t.exports.FENGARI_COPYRIGHT=n,t.exports.FENGARI_RELEASE="Fengari 0.0.1",t.exports.FENGARI_VERSION="Fengari 0.0",t.exports.FENGARI_VERSION_MAJOR="0",t.exports.FENGARI_VERSION_MINOR="0",t.exports.FENGARI_VERSION_NUM=1,t.exports.FENGARI_VERSION_RELEASE="1",t.exports.is_luastring=a.is_luastring,t.exports.luastring_eq=a.luastring_eq,t.exports.luastring_from=a.luastring_from,t.exports.luastring_indexOf=a.luastring_indexOf,t.exports.luastring_of=a.luastring_of,t.exports.to_jsstring=a.to_jsstring,t.exports.to_luastring=a.to_luastring,t.exports.to_uristring=a.to_uristring,t.exports.from_userstring=a.from_userstring},function(t,e,r){"use strict";function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),l=r(0),i=l.LUA_OPADD,c=l.LUA_OPBAND,_=l.LUA_OPBNOT,f=l.LUA_OPBOR,p=l.LUA_OPBXOR,v=l.LUA_OPDIV,d=l.LUA_OPIDIV,h=l.LUA_OPMOD,A=l.LUA_OPMUL,L=l.LUA_OPPOW,g=l.LUA_OPSHL,b=l.LUA_OPSHR,T=l.LUA_OPSUB,x=l.LUA_OPUNM,k=l.char,O=l.constant_types,m=O.LUA_NUMTAGS,E=O.LUA_TBOOLEAN,U=O.LUA_TCCL,R=O.LUA_TFUNCTION,y=O.LUA_TLCF,N=O.LUA_TLCL,S=O.LUA_TLIGHTUSERDATA,w=O.LUA_TLNGSTR,I=O.LUA_TNIL,M=O.LUA_TNUMBER,C=O.LUA_TNUMFLT,P=O.LUA_TNUMINT,D=O.LUA_TSHRSTR,K=O.LUA_TSTRING,V=O.LUA_TTABLE,B=O.LUA_TTHREAD,G=O.LUA_TUSERDATA,j=l.from_userstring,F=l.luastring_indexOf,H=l.luastring_of,X=l.to_jsstring,z=l.to_luastring,q=r(21),Y=q.lisdigit,Z=q.lisprint,J=q.lisspace,W=q.lisxdigit,Q=r(10),$=r(7),tt=r(11),et=r(12),rt=r(9),at=rt.luaS_bless,nt=rt.luaS_new,ut=r(8),ot=r(6),st=ot.ldexp,lt=ot.lua_getlocaledecpoint,it=ot.lua_integer2str,ct=ot.lua_number2str,_t=r(14),ft=r(1),pt=ft.MAX_INT,vt=ft.luai_nummod,dt=ft.lua_assert,ht=r(13),At=m,Lt=m+1,gt=function(){function t(e,r){n(this,t),this.type=e,this.value=r}return s(t,[{key:"ttype",value:function(){return 63&this.type}},{key:"ttnov",value:function(){return 15&this.type}},{key:"checktag",value:function(t){return this.type===t}},{key:"checktype",value:function(t){return this.ttnov()===t}},{key:"ttisnumber",value:function(){return this.checktype(M)}},{key:"ttisfloat",value:function(){return this.checktag(C)}},{key:"ttisinteger",value:function(){return this.checktag(P)}},{key:"ttisnil",value:function(){return this.checktag(I)}},{key:"ttisboolean",value:function(){return this.checktag(E)}},{key:"ttislightuserdata",value:function(){return this.checktag(S)}},{key:"ttisstring",value:function(){return this.checktype(K)}},{key:"ttisshrstring",value:function(){return this.checktag(D)}},{key:"ttislngstring",value:function(){return this.checktag(w)}},{key:"ttistable",value:function(){return this.checktag(V)}},{key:"ttisfunction",value:function(){return this.checktype(R)}},{key:"ttisclosure",value:function(){return(31&this.type)===R}},{key:"ttisCclosure",value:function(){return this.checktag(U)}},{key:"ttisLclosure",value:function(){return this.checktag(N)}},{key:"ttislcf",value:function(){return this.checktag(y)}},{key:"ttisfulluserdata",value:function(){return this.checktag(G)}},{key:"ttisthread",value:function(){return this.checktag(B)}},{key:"ttisdeadkey",value:function(){return this.checktag(Lt)}},{key:"l_isfalse",value:function(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}},{key:"setfltvalue",value:function(t){this.type=C,this.value=t}},{key:"chgfltvalue",value:function(t){dt(this.type==C),this.value=t}},{key:"setivalue",value:function(t){this.type=P,this.value=t}},{key:"chgivalue",value:function(t){dt(this.type==P),this.value=t}},{key:"setnilvalue",value:function(){this.type=I,this.value=void 0}},{key:"setfvalue",value:function(t){this.type=y,this.value=t}},{key:"setpvalue",value:function(t){this.type=S,this.value=t}},{key:"setbvalue",value:function(t){this.type=E,this.value=t}},{key:"setsvalue",value:function(t){this.type=w,this.value=t}},{key:"setuvalue",value:function(t){this.type=G,this.value=t}},{key:"setthvalue",value:function(t){this.type=B,this.value=t}},{key:"setclLvalue",value:function(t){this.type=N,this.value=t}},{key:"setclCvalue",value:function(t){this.type=U,this.value=t}},{key:"sethvalue",value:function(t){this.type=V,this.value=t}},{key:"setdeadvalue",value:function(){this.type=Lt,this.value=null}},{key:"setfrom",value:function(t){this.type=t.type,this.value=t.value}},{key:"tsvalue",value:function(){return dt(this.ttisstring()),this.value}},{key:"svalue",value:function(){return this.tsvalue().getstr()}},{key:"vslen",value:function(){return this.tsvalue().tsslen()}},{key:"jsstring",value:function(t,e){return X(this.svalue(),t,e)}}]),t}(),bt=function(t,e){t.stack[t.top++]=new gt(e.type,e.value)},Tt=function(t,e){t.stack[t.top++]=new gt(w,e)},xt=function(t,e,r){t.stack[e].setfrom(t.stack[r])},kt=function(t,e,r){t.stack[e].setfrom(r)},Ot=function(t,e,r){t.stack[e].setsvalue(r)},mt=new gt(I,null);Object.freeze(mt),t.exports.luaO_nilobject=mt;var Et=function t(e,r){n(this,t),this.id=e.l_G.id_counter++,this.p=null,this.nupvalues=r,this.upvals=new Array(r)},Ut=function t(e,r,a){for(n(this,t),this.id=e.l_G.id_counter++,this.f=r,this.nupvalues=a,this.upvalue=new Array(a);a--;)this.upvalue[a]=new gt(I,null)},Rt=function t(e,r){n(this,t),this.id=e.l_G.id_counter++,this.metatable=null,this.uservalue=new gt(I,null),this.len=r,this.data=Object.create(null)},yt=function t(){n(this,t),this.varname=null,this.startpc=NaN,this.endpc=NaN},Nt=z("..."),St=z('[string "'),wt=z('"]'),It=function(t,e){var r=t.length,a=void 0;if(t[0]===k["="])r<e?(a=new Uint8Array(r-1),a.set(t.subarray(1))):(a=new Uint8Array(e),a.set(t.subarray(1,e+1)));else if(t[0]===k["@"])r<=e?(a=new Uint8Array(r-1),a.set(t.subarray(1))):(a=new Uint8Array(e),a.set(Nt),e-=Nt.length,a.set(t.subarray(r-e),Nt.length));else{a=new Uint8Array(e);var n=F(t,k["\n"]);a.set(St);var u=St.length;e-=St.length+Nt.length+wt.length,r<e&&-1===n?(a.set(t,u),u+=t.length):(-1!==n&&(r=n),r>e&&(r=e),a.set(t.subarray(0,r),u),u+=r,a.set(Nt,u),u+=Nt.length),a.set(wt,u),u+=wt.length,a=a.subarray(0,u)}return a},Mt=function(t){return Y(t)?t-48:(223&t)-55},Ct=function(t,e){var r=1;if(dt(e<=1114111),e<128)t[7]=e;else{var a=63;do{t[8-r++]=128|63&e,e>>=6,a>>=1}while(e>a);t[8-r]=~a<<1|e}return r},Pt=function(t){for(var e=0,r=k[lt()],a=0,n=0,u=0,o=0,s=void 0,l=!1;J(t[e]);)e++;if((s=t[e]===k["-"])?e++:t[e]===k["+"]&&e++,t[e]!==k[0]||t[e+1]!==k.x&&t[e+1]!==k.X)return null;for(e+=2;;e++)if(t[e]===r){if(l)break;l=!0}else{if(!W(t[e]))break;0===n&&t[e]===k[0]?u++:++n<=30?a=16*a+Mt(t[e]):o++,l&&o--}if(u+n===0)return null;if(o*=4,t[e]===k.p||t[e]===k.P){var i=0,c=void 0;if(e++,(c=t[e]===k["-"])?e++:t[e]===k["+"]&&e++,!Y(t[e]))return null;for(;Y(t[e]);)i=10*i+t[e++]-k[0];c&&(i=-i),o+=i}return s&&(a=-a),{n:st(a,o),i:e}},Dt=function(t){try{t=X(t)}catch(t){return null}var e=/^[\t\v\f \n\r]*[+-]?(?:[0-9]+\.?[0-9]*|\.[0-9]*)(?:[eE][+-]?[0-9]+)?/.exec(t);if(!e)return null;var r=parseFloat(e[0]);return isNaN(r)?null:{n:r,i:e[0].length}},Kt=function(t,e){var r="x"===e?Pt(t):Dt(t);if(null===r)return null;for(;J(t[r.i]);)r.i++;return r.i===t.length||0===t[r.i]?r:null},Vt=[k["."],k.x,k.X,k.n,k.N],Bt=(u={},a(u,k["."],"."),a(u,k.x,"x"),a(u,k.X,"x"),a(u,k.n,"n"),a(u,k.N,"n"),u),Gt=function(t){for(var e=t.length,r=0,a=0;a<e;a++){var n=t[a];if(-1!==Vt.indexOf(n)){r=n;break}}var u=Bt[r];return"n"===u?null:Kt(t,u)},jt=Math.floor(pt/10),Ft=pt%10,Ht=function(t){for(var e=0,r=0,a=!0,n=void 0;J(t[e]);)e++;if((n=t[e]===k["-"])?e++:t[e]===k["+"]&&e++,t[e]!==k[0]||t[e+1]!==k.x&&t[e+1]!==k.X)for(;Y(t[e]);e++){var u=t[e]-k[0];if(r>=jt&&(r>jt||u>Ft+n))return null;r=10*r+u|0,a=!1}else for(e+=2;W(t[e]);e++)r=16*r+Mt(t[e])|0,a=!1;for(;J(t[e]);)e++;return a||e!==t.length&&0!==t[e]?null:{n:0|(n?-r:r),i:e}},Xt=function(t,e){var r=Ht(t);return null!==r?(e.setivalue(r.n),r.i+1):(r=Gt(t),null!==r?(e.setfltvalue(r.n),r.i+1):0)},zt=function(t,e){var r=void 0;if(e.ttisinteger())r=z(it(e.value));else{var a=ct(e.value);/^[-0123456789]+$/.test(a)&&(a+=lt()+"0"),r=z(a)}e.setsvalue(at(t,r))},qt=function(t,e){$.luaD_inctop(t),Ot(t,t.top-1,nt(t,e))},Yt=function(t,e,r){for(var a=0,n=0,u=0,s=void 0;-1!=(s=F(e,k["%"],n));){switch(qt(t,e.subarray(n,s)),e[s+1]){case k.s:var l=r[u++];if(null===l)l=z("(null)",!0);else{l=j(l);var i=F(l,0);-1!==i&&(l=l.subarray(0,i))}qt(t,l);break;case k.c:var c=r[u++];Z(c)?qt(t,H(c)):Zt(t,z("<\\%d>",!0),c);break;case k.d:case k.I:$.luaD_inctop(t),t.stack[t.top-1].setivalue(r[u++]),zt(t,t.stack[t.top-1]);break;case k.f:$.luaD_inctop(t),t.stack[t.top-1].setfltvalue(r[u++]),zt(t,t.stack[t.top-1]);break;case k.p:var _=r[u++];if(_ instanceof et.lua_State||_ instanceof ut.Table||_ instanceof Rt||_ instanceof Et||_ instanceof Ut||_ instanceof tt.UpVal)qt(t,z("0x"+_.id.toString(16)));else if(null===_)qt(t,z("null"));else if("function"==typeof _||"object"===(void 0===_?"undefined":o(_))){var f=t.l_G.ids.get(_);f||(f=t.l_G.id_counter++,t.l_G.ids.set(_,f)),qt(t,z("0x"+f.toString(16)))}else void 0===_?qt(t,z("undefined")):"number"==typeof _?qt(t,z("Number("+_+")")):"string"==typeof _?qt(t,z("String("+JSON.stringify(_)+")")):"boolean"==typeof _?qt(t,z(_?"Boolean(true)":"Boolean(false)")):qt(t,z("<id NYI>"));break;case k.U:var p=new Uint8Array(8),v=Ct(p,r[u++]);qt(t,p.subarray(8-v));break;case k["%"]:qt(t,z("%",!0));break;default:Q.luaG_runerror(t,z("invalid option '%%%c' to 'lua_pushfstring'"),e[s+1])}a+=2,n=s+2}return $.luaD_checkstack(t,1),qt(t,e.subarray(n)),a>0&&_t.luaV_concat(t,a+1),t.stack[t.top-1].svalue()},Zt=function(t,e){for(var r=arguments.length,a=Array(r>2?r-2:0),n=2;n<r;n++)a[n-2]=arguments[n];return Yt(t,e,a)},Jt=function(t){var e=0;if(t<8)return t;for(;t>=128;)t=t+15>>4,e+=4;for(;t>=16;)t=t+1>>1,e++;return e+1<<3|t-8},Wt=function(t,e,r,a){switch(e){case i:return r+a|0;case T:return r-a|0;case A:return _t.luaV_imul(r,a);case h:return _t.luaV_mod(t,r,a);case d:return _t.luaV_div(t,r,a);case c:return r&a;case f:return r|a;case p:return r^a;case g:return _t.luaV_shiftl(r,a);case b:return _t.luaV_shiftl(r,-a);case x:return 0-r|0;case _:return-1^r;default:dt(0)}},Qt=function(t,e,r,a){switch(e){case i:return r+a;case T:return r-a;case A:return r*a;case v:return r/a;case L:return Math.pow(r,a);case d:return Math.floor(r/a);case x:return-r;case h:return vt(t,r,a);default:dt(0)}},$t=function(t,e,r,a,n){var u="number"==typeof n?t.stack[n]:n;switch(e){case c:case f:case p:case g:case b:case _:var o=void 0,s=void 0;if(!1!==(o=_t.tointeger(r))&&!1!==(s=_t.tointeger(a)))return void u.setivalue(Wt(t,e,o,s));break;case v:case L:var l=void 0,d=void 0;if(!1!==(l=_t.tonumber(r))&&!1!==(d=_t.tonumber(a)))return void u.setfltvalue(Qt(t,e,l,d));break;default:var h=void 0,A=void 0;if(r.ttisinteger()&&a.ttisinteger())return void u.setivalue(Wt(t,e,r.value,a.value));if(!1!==(h=_t.tonumber(r))&&!1!==(A=_t.tonumber(a)))return void u.setfltvalue(Qt(t,e,h,A))}dt(null!==t),ht.luaT_trybinTM(t,r,a,n,e-i+ht.TMS.TM_ADD)};t.exports.CClosure=Ut,t.exports.LClosure=Et,t.exports.LUA_TDEADKEY=Lt,t.exports.LUA_TPROTO=At,t.exports.LocVar=yt,t.exports.TValue=gt,t.exports.Udata=Rt,t.exports.UTF8BUFFSZ=8,t.exports.luaO_arith=$t,t.exports.luaO_chunkid=It,t.exports.luaO_hexavalue=Mt,t.exports.luaO_int2fb=Jt,t.exports.luaO_pushfstring=Zt,t.exports.luaO_pushvfstring=Yt,t.exports.luaO_str2num=Xt,t.exports.luaO_tostring=zt,t.exports.luaO_utf8esc=Ct,t.exports.numarith=Qt,t.exports.pushobj2s=bt,t.exports.pushsvalue2s=Tt,t.exports.setobjs2s=xt,t.exports.setobj2s=kt,t.exports.setsvalue2s=Ot},function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=r(2),u=n.LUA_ERRERR,o=n.LUA_MULTRET,s=n.LUA_REGISTRYINDEX,l=n.LUA_SIGNATURE,i=n.LUA_TBOOLEAN,c=n.LUA_TLIGHTUSERDATA,_=n.LUA_TNIL,f=n.LUA_TNONE,p=n.LUA_TNUMBER,v=n.LUA_TSTRING,d=n.LUA_TTABLE,h=n.LUA_VERSION_NUM,A=n.lua_Debug,L=n.lua_absindex,g=n.lua_atpanic,b=n.lua_call,T=n.lua_checkstack,x=n.lua_concat,k=n.lua_copy,O=n.lua_createtable,m=n.lua_error,E=n.lua_getfield,U=n.lua_getinfo,R=n.lua_getmetatable,y=n.lua_getstack,N=n.lua_gettop,S=n.lua_insert,w=n.lua_isinteger,I=n.lua_isnil,M=n.lua_isnumber,C=n.lua_isstring,P=n.lua_istable,D=n.lua_len,K=n.lua_load,V=n.lua_newstate,B=n.lua_newtable,G=n.lua_next,j=n.lua_pcall,F=n.lua_pop,H=n.lua_pushboolean,X=n.lua_pushcclosure,z=n.lua_pushcfunction,q=n.lua_pushfstring,Y=n.lua_pushinteger,Z=n.lua_pushliteral,J=n.lua_pushlstring,W=n.lua_pushnil,Q=n.lua_pushstring,$=n.lua_pushvalue,tt=n.lua_pushvfstring,et=n.lua_rawequal,rt=n.lua_rawget,at=n.lua_rawgeti,nt=n.lua_rawlen,ut=n.lua_rawseti,ot=n.lua_remove,st=n.lua_setfield,lt=n.lua_setglobal,it=n.lua_setmetatable,ct=n.lua_settop,_t=n.lua_toboolean,ft=n.lua_tointeger,pt=n.lua_tointegerx,vt=n.lua_tojsstring,dt=n.lua_tolstring,ht=n.lua_tonumber,At=n.lua_tonumberx,Lt=n.lua_topointer,gt=n.lua_tostring,bt=n.lua_touserdata,Tt=n.lua_type,xt=n.lua_typename,kt=n.lua_version,Ot=r(3),mt=Ot.luastring_eq,Et=Ot.to_luastring,Ut=Ot.to_uristring,Rt=u+1,yt=Et("_LOADED"),Nt=Et("_PRELOAD"),St=Et("FILE*"),wt=Et("__name"),It=Et("__tostring"),Mt=new Uint8Array(0),Ct=function t(){a(this,t),this.L=null,this.b=Mt,this.n=0},Pt=function t(e,r,a){if(0===a||!P(e,-1))return 0;for(W(e);G(e,-2);){if(Tt(e,-2)===v){if(et(e,r,-1))return F(e,1),1;if(t(e,r,a-1))return ot(e,-2),Z(e,"."),S(e,-2),x(e,3),1}F(e,1)}return 0},Dt=function(t,e){var r=N(t);if(U(t,Et("f"),e),E(t,s,yt),Pt(t,r+1,2)){var a=gt(t,-1);return a[0]==="_".charCodeAt(0)&&a[1]==="G".charCodeAt(0)&&a[2]===".".charCodeAt(0)&&(Q(t,a.subarray(3)),ot(t,-2)),k(t,-1,r+1),F(t,2),1}return ct(t,r),0},Kt=function(t,e){Dt(t,e)?(q(t,Et("function '%s'"),gt(t,-1)),ot(t,-2)):0!==e.namewhat.length?q(t,Et("%s '%s'"),e.namewhat,e.name):e.what&&e.what[0]==="m".charCodeAt(0)?Z(t,"main chunk"):e.what&&e.what[0]==="L".charCodeAt(0)?q(t,Et("function <%s:%d>"),e.short_src,e.linedefined):Z(t,"?")},Vt=function(t){for(var e=new A,r=1,a=1;y(t,a,e);)r=a,a*=2;for(;r<a;){var n=Math.floor((r+a)/2);y(t,n,e)?r=n+1:a=n}return a-1},Bt=function(t,e,r,a){var n=new A,u=N(t),o=Vt(e),s=o-a>21?10:-1;for(r&&q(t,Et("%s\n"),r),Fe(t,10,null),Z(t,"stack traceback:");y(e,a++,n);)0==s--?(Z(t,"\n\t..."),a=o-11+1):(U(e,Et("Slnt",!0),n),q(t,Et("\n\t%s:"),n.short_src),n.currentline>0&&Z(t,n.currentline+":"),Z(t," in "),Kt(t,n),n.istailcall&&Z(t,"\n\t(...tail calls..)"),x(t,N(t)-u));x(t,N(t)-u)},Gt=function(t){var e="PANIC: unprotected error in call to Lua API";try{e+=" ("+vt(t,-1)+")"}catch(t){}throw new Error(e)},jt=function(t,e,r){var a=new A;return y(t,0,a)?(U(t,Et("n"),a),mt(a.namewhat,Et("method"))&&0===--e?Xt(t,Et("calling '%s' on bad self (%s)"),a.name,r):(null===a.name&&(a.name=Dt(t,a)?gt(t,-1):Et("?")),Xt(t,Et("bad argument #%d to '%s' (%s)"),e,a.name,r))):Xt(t,Et("bad argument #%d (%s)"),e,r)},Ft=function(t,e,r){var a=void 0;a=we(t,e,wt)===v?gt(t,-1):Tt(t,e)===c?Et("light userdata",!0):re(t,e);var n=q(t,Et("%s expected, got %s"),r,a);return jt(t,e,n)},Ht=function(t,e){var r=new A;if(y(t,e,r)&&(U(t,Et("Sl",!0),r),r.currentline>0))return void q(t,Et("%s:%d: "),r.short_src,r.currentline);Q(t,Et(""))},Xt=function(t,e){Ht(t,1);for(var r=arguments.length,a=Array(r>2?r-2:0),n=2;n<r;n++)a[n-2]=arguments[n];return tt(t,e,a),x(t,2),m(t)},zt=function(t,e,r,a){return e?(H(t,1),1):(W(t),r?q(t,Et("%s: %s"),r,Et(a.message)):Q(t,Et(a.message)),Y(t,-a.errno),3)},qt=function(t,e){var r=void 0,a=void 0;if(null===e)return H(t,1),Z(t,"exit"),Y(t,0),3;if(e.status)r="exit",a=e.status;else{if(!e.signal)return zt(t,0,null,e);r="signal",a=e.signal}return W(t),Z(t,r),Y(t,a),3},Yt=function(t,e){return E(t,s,e)},Zt=function(t,e){return Yt(t,e)!==_?0:(F(t,1),O(t,0,2),Q(t,e),st(t,-2,wt),$(t,-1),st(t,s,e),1)},Jt=function(t,e){Yt(t,e),it(t,-2)},Wt=function(t,e,r){var a=bt(t,e);return null!==a&&R(t,e)?(Yt(t,r),et(t,-1,-2)||(a=null),F(t,2),a):null},Qt=function(t,e,r){var a=Wt(t,e,r);return null===a&&Ft(t,e,r),a},$t=function(t,e,r,a){for(var n=r?ie(t,e,r):oe(t,e),u=0;a[u];u++)if(a[u].join("|")===n.join("|"))return u;return jt(t,e,q(t,Et("invalid option '%s'"),n))},te=function(t,e,r){Ft(t,e,xt(t,r))},ee=function(){var t=V();return t&&g(t,Gt),t},re=function(t,e){return xt(t,Tt(t,e))},ae=function(t,e,r,a){e||jt(t,r,a)},ne=function(t,e){Tt(t,e)===f&&jt(t,e,Et("value expected",!0))},ue=function(t,e,r){Tt(t,e)!==r&&te(t,e,r)},oe=function(t,e){return se(t,e,null)},se=function(t,e){var r=dt(t,e);return null!==r&&void 0!==r||te(t,e,v),r},le=function(t,e,r){return Tt(t,e)<=0?r:se(t,e)},ie=le,ce=function(t,e){M(t,e)?jt(t,e,Et("number has no integer representation",!0)):te(t,e,p)},_e=function(t,e){var r=At(t,e);return!1===r&&te(t,e,p),r},fe=function(t,e,r){return Ee(t,_e,e,r)},pe=function(t,e){var r=pt(t,e);return!1===r&&ce(t,e),r},ve=function(t,e,r){return Ee(t,pe,e,r)},de=function(t,e){var r=t.n+e;if(t.b.length<r){var a=Math.max(2*t.b.length,r),n=new Uint8Array(a);n.set(t.b),t.b=n}return t.b.subarray(t.n,r)},he=function(t,e){e.L=t,e.b=Mt},Ae=function(t,e,r){return he(t,e),de(e,r)},Le=function(t){return de(t,8192)},ge=function(t,e,r){if(r>0){de(t,r).set(e.subarray(0,r)),ke(t,r)}},be=function(t,e){ge(t,e,e.length)},Te=function(t){J(t.L,t.b,t.n),t.n=0,t.b=Mt},xe=function(t,e){de(t,1),t.b[t.n++]=e},ke=function(t,e){t.n+=e},Oe=function(t,e){ke(t,e),Te(t)},me=function(t){var e=t.L,r=gt(e,-1);ge(t,r,r.length),F(e,1)},Ee=function(t,e,r,a){return Tt(t,r)<=0?a:e(t,r)},Ue=function(t,e){var r=e.string;return e.string=null,r},Re=function(t,e,r,a,n){return K(t,Ue,{string:e},a,n)},ye=function(t,e,r,a){return Re(t,e,0,a,null)},Ne=function(t,e){return ye(t,e,e.length,e)},Se=function(t,e){return Ne(t,e)||j(t,0,o,0)},we=function(t,e,r){if(R(t,e)){Q(t,r);var a=rt(t,-2);return a===_?F(t,2):ot(t,-2),a}return _},Ie=function(t,e,r){return e=L(t,e),we(t,e,r)!==_&&($(t,e),b(t,1,1),!0)},Me=function(t,e){D(t,e);var r=pt(t,-1);return!1===r&&Xt(t,Et("object length is not an integer",!0)),F(t,1),r},Ce=Et("%I"),Pe=Et("%f"),De=function(t,e){if(Ie(t,e,It))C(t,-1)||Xt(t,Et("'__tostring' must return a string"));else{switch(Tt(t,e)){case p:w(t,e)?q(t,Ce,ft(t,e)):q(t,Pe,ht(t,e));break;case v:$(t,e);break;case i:Z(t,_t(t,e)?"true":"false");break;case _:Z(t,"nil");break;default:var r=we(t,e,wt),a=r===v?gt(t,-1):re(t,e);q(t,Et("%s: %p"),a,Lt(t,e)),r!==_&&ot(t,-2)}}return dt(t,-1)},Ke=function(t,e,r,a){Ge(t,s,yt),E(t,-1,e),_t(t,-1)||(F(t,1),z(t,r),Q(t,e),b(t,1,1),$(t,-1),st(t,-3,e)),ot(t,-2),a&&($(t,-1),lt(t,e))},Ve=function(t,e,r){var a=r>>>0,n=e.length,u=t.length+1-n;t:for(;a<u;a++){for(var o=0;o<n;o++)if(t[a+o]!==e[o])continue t;return a}return-1},Be=function(t,e,r,a){var n=void 0,u=new Ct;for(he(t,u);(n=Ve(e,r))>=0;)ge(u,e,n),be(u,a),e=e.subarray(n+r.length);return be(u,e),Te(u),gt(t,-1)},Ge=function(t,e,r){return E(t,e,r)===d||(F(t,1),e=L(t,e),B(t),$(t,-1),st(t,e,r),!1)},je=function(t,e,r){Fe(t,r,Et("too many upvalues",!0));for(var a in e){for(var n=0;n<r;n++)$(t,-r);X(t,e[a],r),st(t,-(r+2),Et(a))}F(t,r)},Fe=function(t,e,r){T(t,e)||(r?Xt(t,Et("stack overflow (%s)"),r):Xt(t,Et("stack overflow",!0)))},He=function(t){O(t)},Xe=function(t,e){O(t),je(t,e,0)},ze=function(t,e){var r=void 0;return I(t,-1)?(F(t,1),-1):(e=L(t,e),at(t,e,0),r=ft(t,-1),F(t,1),0!==r?(at(t,e,r),ut(t,e,0)):r=nt(t,e)+1,ut(t,e,r),r)},qe=function(t,e,r){r>=0&&(e=L(t,e),at(t,e,0),ut(t,e,r),Y(t,r),ut(t,e,0))},Ye=function(t,e,r,a){var n=a.message,u=gt(t,r).subarray(1);return q(t,Et("cannot %s %s: %s"),Et(e),u,Et(n)),ot(t,r),Rt},Ze=void 0,Je=[239,187,191],We=function(t){t.n=0;var e=void 0,r=0;do{if(null===(e=Ze(t))||e!==Je[r])return e;r++,t.buff[t.n++]=e}while(r<Je.length);return t.n=0,Ze(t)},Qe=function(t){var e=We(t);if(e==="#".charCodeAt(0)){do{e=Ze(t)}while(e&&e!=="\n".charCodeAt(0));return{skipped:!0,c:Ze(t)}}return{skipped:!1,c:e}},$e=void 0,tr=function t(){a(this,t),this.n=NaN,this.f=null,this.buff=new Uint8Array(1024),this.pos=0,this.err=void 0},er=function(t,e){var r=e;if(null!==r.f&&r.n>0){var a=r.n;return r.n=0,r.f=r.f.subarray(r.pos),r.buff.subarray(0,a)}var n=r.f;return r.f=null,n};Ze=function(t){return t.pos<t.f.length?t.f[t.pos++]:null},$e=function(t,e,r){var a=new tr,n=N(t)+1;if(null===e)throw new Error("Can't read stdin in the browser");q(t,Et("@%s"),e);var u=Ut(e),o=new XMLHttpRequest;if(o.open("GET",u,!1),"undefined"==typeof window&&(o.responseType="arraybuffer"),o.send(),!(o.status>=200&&o.status<=299))return a.err=o.status,Ye(t,"open",n,{message:o.status+": "+o.statusText});"string"==typeof o.response?a.f=Et(o.response):a.f=new Uint8Array(o.response);var s=Qe(a);s.c===l.charCodeAt(0)&&e||s.skipped&&(a.buff[a.n++]="\n".charCodeAt(0)),null!==s.c&&(a.buff[a.n++]=s.c);var i=K(t,er,a,gt(t,-1),r),c=a.err;return c?(ct(t,n),Ye(t,"read",n,c)):(ot(t,n),i)};var rr=function(t,e){return $e(t,e,null)},ar=function(t,e){return rr(t,e)||j(t,0,o,0)},nr=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];do{var r=/([^\n]*)\n?([\d\D]*)/.exec(e);console.error(r[1]),e=r[2]}while(""!==e)}},ur=function(t,e,r){var a=kt(t);72!=r&&Xt(t,Et("core and library have incompatible numeric types")),a!=kt(null)?Xt(t,Et("multiple Lua VMs detected")):a!==e&&Xt(t,Et("version mismatch: app. needs %f, Lua core provides %f"),e,a)},or=function(t){ur(t,h,72)};t.exports.LUA_ERRFILE=Rt,t.exports.LUA_FILEHANDLE=St,t.exports.LUA_LOADED_TABLE=yt,t.exports.LUA_NOREF=-2,t.exports.LUA_PRELOAD_TABLE=Nt,t.exports.LUA_REFNIL=-1,t.exports.luaL_Buffer=Ct,t.exports.luaL_addchar=xe,t.exports.luaL_addlstring=ge,t.exports.luaL_addsize=ke,t.exports.luaL_addstring=be,t.exports.luaL_addvalue=me,t.exports.luaL_argcheck=ae,t.exports.luaL_argerror=jt,t.exports.luaL_buffinit=he,t.exports.luaL_buffinitsize=Ae,t.exports.luaL_callmeta=Ie,t.exports.luaL_checkany=ne,t.exports.luaL_checkinteger=pe,t.exports.luaL_checklstring=se,t.exports.luaL_checknumber=_e,t.exports.luaL_checkoption=$t,t.exports.luaL_checkstack=Fe,t.exports.luaL_checkstring=oe,t.exports.luaL_checktype=ue,t.exports.luaL_checkudata=Qt,t.exports.luaL_checkversion=or,t.exports.luaL_checkversion_=ur,t.exports.luaL_dofile=ar,t.exports.luaL_dostring=Se,t.exports.luaL_error=Xt,t.exports.luaL_execresult=qt,t.exports.luaL_fileresult=zt,t.exports.luaL_getmetafield=we,t.exports.luaL_getmetatable=Yt,t.exports.luaL_getsubtable=Ge,t.exports.luaL_gsub=Be,t.exports.luaL_len=Me,t.exports.luaL_loadbuffer=ye,t.exports.luaL_loadbufferx=Re,t.exports.luaL_loadfile=rr,t.exports.luaL_loadfilex=$e,t.exports.luaL_loadstring=Ne,t.exports.luaL_newlib=Xe,t.exports.luaL_newlibtable=He,t.exports.luaL_newmetatable=Zt,t.exports.luaL_newstate=ee,t.exports.luaL_opt=Ee,t.exports.luaL_optinteger=ve,t.exports.luaL_optlstring=le,t.exports.luaL_optnumber=fe,t.exports.luaL_optstring=ie,t.exports.luaL_prepbuffer=Le,t.exports.luaL_prepbuffsize=de,t.exports.luaL_pushresult=Te,t.exports.luaL_pushresultsize=Oe,t.exports.luaL_ref=ze,t.exports.luaL_requiref=Ke,t.exports.luaL_setfuncs=je,t.exports.luaL_setmetatable=Jt,t.exports.luaL_testudata=Wt,t.exports.luaL_tolstring=De,t.exports.luaL_traceback=Bt,t.exports.luaL_typename=re,t.exports.luaL_unref=qe,t.exports.luaL_where=Ht,t.exports.lua_writestringerror=nr},function(t,e,r){"use strict";var a=function(t){return String(t)},n=function(t){return String(Number(t.toPrecision(14)))},u=function(t){return t>=-2147483648&&t<2147483648&&t},o=function(){return 1.1.toLocaleString().substring(1,2)},s=function(t,e){if(!e)throw Error(e)},l=function(t){if(0===t)return[t,0];var e=new DataView(new ArrayBuffer(8));e.setFloat64(0,t);var r=e.getUint32(0)>>>20&2047;0===r&&(e.setFloat64(0,t*Math.pow(2,64)),r=(e.getUint32(0)>>>20&2047)-64);var a=r-1022;return[i(t,-a),a]},i=function(t,e){for(var r=Math.min(3,Math.ceil(Math.abs(e)/1023)),a=t,n=0;n<r;n++)a*=Math.pow(2,Math.floor((e+n)/r));return a};t.exports.LUAI_MAXSTACK=1e5,t.exports.LUA_IDSIZE=59,t.exports.LUA_INTEGER_FMT="%d",t.exports.LUA_INTEGER_FRMLEN="",t.exports.LUA_MAXINTEGER=2147483647,t.exports.LUA_MININTEGER=-2147483648,t.exports.LUA_NUMBER_FMT="%.14g",t.exports.LUA_NUMBER_FRMLEN="",t.exports.frexp=l,t.exports.ldexp=i,t.exports.lua_getlocaledecpoint=o,t.exports.lua_integer2str=a,t.exports.lua_number2str=n,t.exports.lua_numbertointeger=u,t.exports.luai_apicheck=s},function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=r(0),u=n.LUA_HOOKCALL,o=n.LUA_HOOKRET,s=n.LUA_HOOKTAILCALL,l=n.LUA_MASKCALL,i=n.LUA_MASKLINE,c=n.LUA_MASKRET,_=n.LUA_MINSTACK,f=n.LUA_MULTRET,p=n.LUA_SIGNATURE,v=n.constant_types,d=v.LUA_TCCL,h=v.LUA_TLCF,A=v.LUA_TLCL,L=v.LUA_TNIL,g=n.thread_status,b=g.LUA_ERRMEM,T=g.LUA_ERRERR,x=g.LUA_ERRRUN,k=g.LUA_ERRSYNTAX,O=g.LUA_OK,m=g.LUA_YIELD,E=n.lua_Debug,U=n.luastring_indexOf,R=n.to_luastring,y=r(17),N=r(10),S=r(11),w=r(1),I=w.api_check,M=w.lua_assert,C=w.LUAI_MAXCCALLS,P=r(4),D=r(15),K=r(22),V=r(12),B=r(9),G=B.luaS_newliteral,j=r(13),F=r(6),H=F.LUAI_MAXSTACK,X=r(33),z=r(14),q=r(18),Y=function(t,e){if(t.top<e)for(;t.top<e;)t.stack[t.top++]=new P.TValue(L,null);else for(;t.top>e;)delete t.stack[--t.top]},Z=function(t,e,r){for(var a=t.top;t.top<r+1;)t.stack[t.top++]=new P.TValue(L,null);switch(e){case b:P.setsvalue2s(t,r,G(t,"not enough memory"));break;case T:P.setsvalue2s(t,r,G(t,"error in error handling"));break;default:P.setobjs2s(t,r,a-1)}for(;t.top>r+1;)delete t.stack[--t.top]},J=H+200,W=function(t,e){M(e<=H||e==J),M(t.stack_last==t.stack.length-V.EXTRA_STACK),t.stack.length=e,t.stack_last=e-V.EXTRA_STACK},Q=function(t,e){var r=t.stack.length;if(r>H)ft(t,T);else{var a=t.top+e+V.EXTRA_STACK,n=2*r;n>H&&(n=H),n<a&&(n=a),n>H?(W(t,J),N.luaG_runerror(t,R("stack overflow",!0))):W(t,n)}},$=function(t,e){t.stack_last-t.top<=e&&Q(t,e)},tt=function(t){for(var e=t.top,r=t.ci;null!==r;r=r.previous)e<r.top&&(e=r.top);return M(e<=t.stack_last),e+1},et=function(t){var e=tt(t),r=e+Math.floor(e/8)+2*V.EXTRA_STACK;r>H&&(r=H),t.stack.length>H&&V.luaE_freeCI(t),e<=H-V.EXTRA_STACK&&r<t.stack.length&&W(t,r)},rt=function(t){$(t,1),t.stack[t.top++]=new P.TValue(L,null)},at=function t(e,r,a){var n=e.stack[r];switch(n.type){case d:case h:var o=n.type===d?n.value.f:n.value;$(e,_);var s=V.luaE_extendCI(e);s.funcOff=r,s.nresults=a,s.func=n,s.top=e.top+_,M(s.top<=e.stack_last),s.callstatus=0,e.hookmask&l&&ot(e,u,-1);var i=o(e);if("number"!=typeof i||i<0||(0|i)!==i)throw Error("invalid return value from JS function (expected integer)");return y.api_checknelems(e,i),nt(e,s,e.top-i,i),!0;case A:var c=void 0,f=n.value.p,p=e.top-r-1,v=f.maxstacksize;if($(e,v),f.is_vararg)c=lt(e,f,p);else{for(;p<f.numparams;p++)e.stack[e.top++]=new P.TValue(L,null);c=r+1}var g=V.luaE_extendCI(e);return g.funcOff=r,g.nresults=a,g.func=n,g.l_base=c,g.top=c+v,Y(e,g.top),g.l_code=f.code,g.l_savedpc=0,g.callstatus=V.CIST_LUA,e.hookmask&l&&st(e,g),!1;default:return $(e,1),it(e,r,n),t(e,r,a)}},nt=function(t,e,r,a){var n=e.nresults;t.hookmask&(c|i)&&(t.hookmask&c&&ot(t,o,-1),t.oldpc=e.previous.l_savedpc);var u=e.funcOff;return t.ci=e.previous,t.ci.next=null,ut(t,r,u,a,n)},ut=function(t,e,r,a,n){switch(n){case 0:break;case 1:0===a?t.stack[r].setnilvalue():P.setobjs2s(t,r,e);break;case f:for(var u=0;u<a;u++)P.setobjs2s(t,r+u,e+u);for(var o=t.top;o>=r+a;o--)delete t.stack[o];return t.top=r+a,!1;default:var s=void 0;if(n<=a)for(s=0;s<n;s++)P.setobjs2s(t,r+s,e+s);else{for(s=0;s<a;s++)P.setobjs2s(t,r+s,e+s);for(;s<n;s++)r+s>=t.top?t.stack[r+s]=new P.TValue(L,null):t.stack[r+s].setnilvalue()}}for(var l=r+n,i=t.top;i>=l;i--)delete t.stack[i];return t.top=l,!0},ot=function(t,e,r){var a=t.hook;if(a&&t.allowhook){var n=t.ci,u=t.top,o=n.top,s=new E;s.event=e,s.currentline=r,s.i_ci=n,$(t,_),n.top=t.top+_,M(n.top<=t.stack_last),t.allowhook=0,n.callstatus|=V.CIST_HOOKED,a(t,s),M(!t.allowhook),t.allowhook=1,n.top=o,Y(t,u),n.callstatus&=~V.CIST_HOOKED}},st=function(t,e){var r=u;e.l_savedpc++,e.previous.callstatus&V.CIST_LUA&&e.previous.l_code[e.previous.l_savedpc-1].opcode==D.OpCodesI.OP_TAILCALL&&(e.callstatus|=V.CIST_TAIL,r=s),ot(t,r,-1),e.l_savedpc--},lt=function(t,e,r){var a=e.numparams,n=t.top-r,u=t.top,o=void 0;for(o=0;o<a&&o<r;o++)P.pushobj2s(t,t.stack[n+o]),t.stack[n+o].setnilvalue();for(;o<a;o++)t.stack[t.top++]=new P.TValue(L,null);return u},it=function(t,e,r){var a=j.luaT_gettmbyobj(t,r,j.TMS.TM_CALL);a.ttisfunction(a)||N.luaG_typeerror(t,r,R("call",!0)),P.pushobj2s(t,t.stack[t.top-1]);for(var n=t.top-2;n>e;n--)P.setobjs2s(t,n,n-1);P.setobj2s(t,e,a)},ct=function(t){t.nCcalls===C?N.luaG_runerror(t,R("JS stack overflow",!0)):t.nCcalls>=C+(C>>3)&&ft(t,T)},_t=function(t,e,r){++t.nCcalls>=C&&ct(t),at(t,e,r)||z.luaV_execute(t),t.nCcalls--},ft=function t(e,r){if(e.errorJmp)throw e.errorJmp.status=r,e.errorJmp;var a=e.l_G;if(e.status=r,!a.mainthread.errorJmp){var n=a.panic;throw n&&(Z(e,r,e.top),e.ci.top<e.top&&(e.ci.top=e.top),n(e)),new Error("Aborted "+r)}a.mainthread.stack[a.mainthread.top++]=e.stack[e.top-1],t(a.mainthread,r)},pt=function(t,e,r){var a=t.nCcalls,n={status:O,previous:t.errorJmp};t.errorJmp=n;try{e(t,r)}catch(e){if(n.status===O){var u=t.l_G.atnativeerror;if(u)try{if(n.status=O,y.lua_pushcfunction(t,u),y.lua_pushlightuserdata(t,e),mt(t,t.top-2,1),0!==t.errfunc){var o=t.errfunc;P.pushobj2s(t,t.stack[t.top-1]),P.setobjs2s(t,t.top-2,o),mt(t,t.top-2,1)}n.status=x}catch(t){n.status===O&&(n.status=-1)}else n.status=-1}}return t.errorJmp=n.previous,t.nCcalls=a,n.status},vt=function(t,e){var r=t.ci;M(null!==r.c_k&&0===t.nny),M(r.callstatus&V.CIST_YPCALL||e===m),r.callstatus&V.CIST_YPCALL&&(r.callstatus&=~V.CIST_YPCALL,t.errfunc=r.c_old_errfunc),r.nresults===f&&t.ci.top<t.top&&(t.ci.top=t.top);var a=r.c_k,n=a(t,e,r.c_ctx);y.api_checknelems(t,n),nt(t,r,t.top-n,n)},dt=function(t,e){for(null!==e&&vt(t,e);t.ci!==t.base_ci;)t.ci.callstatus&V.CIST_LUA?(z.luaV_finishOp(t),z.luaV_execute(t)):vt(t,m)},ht=function(t){for(var e=t.ci;null!==e;e=e.previous)if(e.callstatus&V.CIST_YPCALL)return e;return null},At=function(t,e){var r=ht(t);if(null===r)return 0;var a=r.extra;return S.luaF_close(t,a),Z(t,e,a),t.ci=r,t.allowhook=r.callstatus&V.CIST_OAH,t.nny=0,et(t),t.errfunc=r.c_old_errfunc,1},Lt=function(t,e,r){var a=G(t,e);if(0===r)P.pushsvalue2s(t,a),I(t,t.top<=t.ci.top,"stack overflow");else{for(var n=1;n<r;n++)delete t.stack[--t.top];P.setsvalue2s(t,t.top-1,a)}return x},gt=function(t,e){var r=t.top-e,a=t.ci;t.status===O?at(t,r-1,f)||z.luaV_execute(t):(M(t.status===m),t.status=O,a.funcOff=a.extra,a.func=t.stack[a.funcOff],a.callstatus&V.CIST_LUA?z.luaV_execute(t):(null!==a.c_k&&(e=a.c_k(t,m,a.c_ctx),y.api_checknelems(t,e),r=t.top-e),nt(t,a,r,e)),dt(t,null))},bt=function(t,e,r){var a=t.nny;if(t.status===O){if(t.ci!==t.base_ci)return Lt(t,"cannot resume non-suspended coroutine",r)}else if(t.status!==m)return Lt(t,"cannot resume dead coroutine",r);if(t.nCcalls=e?e.nCcalls+1:1,t.nCcalls>=C)return Lt(t,"JS stack overflow",r);t.nny=0,y.api_checknelems(t,t.status===O?r+1:r);var n=pt(t,gt,r);if(-1===n)n=x;else{for(;n>m&&At(t,n);)n=pt(t,dt,n);n>m?(t.status=n,Z(t,n,t.top),t.ci.top=t.top):M(n===t.status)}return t.nny=a,t.nCcalls--,M(t.nCcalls===(e?e.nCcalls:0)),n},Tt=function(t){return 0===t.nny},xt=function(t,e,r,a){var n=t.ci;return y.api_checknelems(t,e),t.nny>0&&(t!==t.l_G.mainthread?N.luaG_runerror(t,R("attempt to yield across a JS-call boundary",!0)):N.luaG_runerror(t,R("attempt to yield from outside a coroutine",!0))),t.status=m,n.extra=n.funcOff,n.callstatus&V.CIST_LUA?I(t,null===a,"hooks cannot continue after yielding"):(n.c_k=a,null!==a&&(n.c_ctx=r),n.funcOff=t.top-e-1,n.func=t.stack[n.funcOff],ft(t,m)),M(n.callstatus&V.CIST_HOOKED),0},kt=function(t,e){xt(t,e,0,null)},Ot=function(t,e,r,a,n){var u=t.ci,o=t.allowhook,s=t.nny,l=t.errfunc;t.errfunc=n;var i=pt(t,e,r);return i!==O&&(S.luaF_close(t,a),Z(t,i,a),t.ci=u,t.allowhook=o,t.nny=s,et(t)),t.errfunc=l,i},mt=function(t,e,r){t.nny++,_t(t,e,r),t.nny--},Et=function t(e,r,n){a(this,t),this.z=e,this.buff=new q.MBuffer,this.dyd=new K.Dyndata,this.mode=n,this.name=r},Ut=function(t,e,r){e&&-1===U(e,r[0])&&(P.luaO_pushfstring(t,R("attempt to load a %s chunk (mode is '%s')"),r,e),ft(t,k))},Rt=function(t,e){var r=void 0,a=e.z.zgetc();a===p.charCodeAt(0)?(Ut(t,e.mode,R("binary",!0)),r=X.luaU_undump(t,e.z,e.name)):(Ut(t,e.mode,R("text",!0)),r=K.luaY_parser(t,e.z,e.buff,e.dyd,e.name,a)),M(r.nupvalues===r.p.upvalues.length),S.luaF_initupvals(t,r)},yt=function(t,e,r,a){var n=new Et(e,r,a);t.nny++;var u=Ot(t,Rt,n,t.top,t.errfunc);return t.nny--,u};t.exports.adjust_top=Y,t.exports.luaD_call=_t,t.exports.luaD_callnoyield=mt,t.exports.luaD_checkstack=$,t.exports.luaD_growstack=Q,t.exports.luaD_hook=ot,t.exports.luaD_inctop=rt,t.exports.luaD_pcall=Ot,t.exports.luaD_poscall=nt,t.exports.luaD_precall=at,t.exports.luaD_protectedparser=yt,t.exports.luaD_rawrunprotected=pt,t.exports.luaD_reallocstack=W,t.exports.luaD_throw=ft,t.exports.lua_isyieldable=Tt,t.exports.lua_resume=bt,t.exports.lua_yield=kt,t.exports.lua_yieldk=xt},function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=r(0),o=u.constant_types,s=o.LUA_TBOOLEAN,l=o.LUA_TCCL,i=o.LUA_TLCF,c=o.LUA_TLCL,_=o.LUA_TLIGHTUSERDATA,f=o.LUA_TLNGSTR,p=o.LUA_TNIL,v=o.LUA_TNUMFLT,d=o.LUA_TNUMINT,h=o.LUA_TSHRSTR,A=o.LUA_TTABLE,L=o.LUA_TTHREAD,g=o.LUA_TUSERDATA,b=u.to_luastring,T=r(1),x=T.lua_assert,k=r(10),O=r(4),m=r(9),E=m.luaS_hashlongstr,U=m.TString,R=r(12),y=new WeakMap,N=function(t){var e=y.get(t);return e||(e={},y.set(t,e)),e},S=function(t,e){switch(e.type){case p:return k.luaG_runerror(t,b("table index is nil",!0));case v:if(isNaN(e.value))return k.luaG_runerror(t,b("table index is NaN",!0));case d:case s:case A:case c:case i:case l:case g:case L:return e.value;case h:case f:return E(e.tsvalue());case _:var r=e.value;switch(void 0===r?"undefined":n(r)){case"string":return"*"+r;case"number":return"#"+r;case"boolean":return r?"?true":"?false";case"function":return N(r);case"object":if(r instanceof R.lua_State&&r.l_G===t.l_G||r instanceof w||r instanceof O.Udata||r instanceof O.LClosure||r instanceof O.CClosure)return N(r);default:return r}default:throw new Error("unknown key type: "+e.type)}},w=function t(e){a(this,t),this.id=e.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1},I=function(t){t.flags=0},M=function(t,e,r,a){t.dead_strong.clear(),t.dead_weak=void 0;var n=null,u={key:r,value:a,p:n=t.l,n:void 0};t.f||(t.f=u),n&&(n.n=u),t.strong.set(e,u),t.l=u},C=function(t){return"object"===(void 0===t?"undefined":n(t))?null!==t:"function"==typeof t},P=function(t,e){var r=t.strong.get(e);if(r){r.key.setdeadvalue(),r.value=void 0;var a=r.n,n=r.p;r.p=void 0,n&&(n.n=a),a&&(a.p=n),t.f===r&&(t.f=a),t.l===r&&(t.l=n),t.strong.delete(e),C(e)?(t.dead_weak||(t.dead_weak=new WeakMap),t.dead_weak.set(e,r)):t.dead_strong.set(e,r)}},D=function(t){return new w(t)},K=function(t,e){var r=t.strong.get(e);return r?r.value:O.luaO_nilobject},V=function(t,e){return x("number"==typeof e&&(0|e)===e),K(t,e)},B=function(t,e){return x(e instanceof U),K(t,E(e))},G=function(t,e,r){return x(r instanceof O.TValue),r.ttisnil()||r.ttisfloat()&&isNaN(r.value)?O.luaO_nilobject:K(e,S(t,r))},j=function(t,e,r){var a=t.strong.get(e);if(a)return a.value;var n=r.value;r=r.ttisfloat()&&(0|n)===n?new O.TValue(d,n):new O.TValue(r.type,n);var u=new O.TValue(p,null);return M(t,e,r,u),u},F=function(t,e,r){x("number"==typeof e&&(0|e)===e&&r instanceof O.TValue);var a=e;if(r.ttisnil())return void P(t,a);var n=t.strong.get(a);if(n){n.value.setfrom(r)}else{var u=new O.TValue(d,e),o=new O.TValue(r.type,r.value);M(t,a,u,o)}},H=function(t,e,r){x(r instanceof O.TValue);var a=S(t,r);return j(e,a,r)},X=function(t,e,r){x(r instanceof O.TValue);var a=S(t,r);return P(e,a)},z=function(t){for(var e=0,r=t.strong.size+1;r-e>1;){var a=Math.floor((e+r)/2);V(t,a).ttisnil()?r=a:e=a}return e},q=function(t,e,r){var a=t.stack[r],n=void 0;if(a.type===p){if(!(n=e.f))return!1}else{var u=S(t,a);if(n=e.strong.get(u)){if(!(n=n.n))return!1}else{if(!(n=e.dead_weak&&e.dead_weak.get(u)||e.dead_strong.get(u)))return k.luaG_runerror(t,b("invalid key to 'next'"));do{if(!(n=n.n))return!1}while(n.key.ttisdeadkey())}}return O.setobj2s(t,r,n.key),O.setobj2s(t,r+1,n.value),!0};t.exports.invalidateTMcache=I,t.exports.luaH_delete=X,t.exports.luaH_get=G,t.exports.luaH_getint=V,t.exports.luaH_getn=z,t.exports.luaH_getstr=B,t.exports.luaH_set=H,t.exports.luaH_setint=F,t.exports.luaH_new=D,t.exports.luaH_next=q,t.exports.Table=w},function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),u=r(0),o=u.is_luastring,s=u.luastring_eq,l=u.luastring_from,i=u.to_luastring,c=r(1),_=c.lua_assert,f=function(){function t(e,r){a(this,t),this.hash=null,this.realstring=r}return n(t,[{key:"getstr",value:function(){return this.realstring}},{key:"tsslen",value:function(){return this.realstring.length}}]),t}(),p=function(t,e){return _(t instanceof f),_(e instanceof f),t==e||s(t.realstring,e.realstring)},v=function(t){_(o(t));for(var e=t.length,r="|",a=0;a<e;a++)r+=t[a].toString(16);return r},d=function(t){return _(t instanceof f),null===t.hash&&(t.hash=v(t.getstr())),t.hash},h=function(t,e){return _(e instanceof Uint8Array),new f(t,e)},A=function(t,e){return h(t,l(e))},L=function(t,e){return h(t,i(e))};t.exports.luaS_eqlngstr=p,t.exports.luaS_hash=v,t.exports.luaS_hashlongstr=d,t.exports.luaS_bless=h,t.exports.luaS_new=A,t.exports.luaS_newliteral=L,t.exports.TString=f},function(t,e,r){"use strict";var a=r(0),n=a.LUA_HOOKCOUNT,u=a.LUA_HOOKLINE,o=a.LUA_MASKCOUNT,s=a.LUA_MASKLINE,l=a.constant_types,i=l.LUA_TBOOLEAN,c=l.LUA_TNIL,_=l.LUA_TTABLE,f=a.thread_status,p=f.LUA_ERRRUN,v=f.LUA_YIELD,d=a.from_userstring,h=a.luastring_eq,A=a.luastring_indexOf,L=a.to_luastring,g=r(1),b=g.api_check,T=g.lua_assert,x=r(6),k=x.LUA_IDSIZE,O=r(17),m=r(7),E=r(11),U=r(20),R=r(4),y=r(15),N=r(12),S=r(8),w=r(13),I=r(14),M=function(t){return T(t.callstatus&N.CIST_LUA),t.l_savedpc-1},C=function(t){return 0!==t.func.value.p.lineinfo.length?t.func.value.p.lineinfo[M(t)]:-1},P=function(t){if(t.status===v){var e=t.ci,r=e.funcOff;e.func=t.stack[e.extra],e.funcOff=e.extra,e.extra=r}},D=function(t,e,r,a){null!==e&&0!==r||(r=0,e=null),t.ci.callstatus&N.CIST_LUA&&(t.oldpc=t.ci.l_savedpc),t.hook=e,t.basehookcount=a,t.hookcount=t.basehookcount,t.hookmask=r},K=function(t){return t.hook},V=function(t){return t.hookmask},B=function(t){return t.basehookcount},G=function(t,e,r){var a=void 0,n=void 0;if(e<0)return 0;for(a=t.ci;e>0&&a!==t.base_ci;a=a.previous)e--;return 0===e&&a!==t.base_ci?(n=1,r.i_ci=a):n=0,n},j=function(t,e){T(e<t.upvalues.length);var r=t.upvalues[e].name;return null===r?L("?",!0):r.getstr()},F=function(t,e){var r=t.func.value.p.numparams;return e>=t.l_base-t.funcOff-r?null:{pos:t.funcOff+r+e,name:L("(*vararg)",!0)}},H=function(t,e,r){var a=void 0,n=null;if(e.callstatus&N.CIST_LUA){if(r<0)return F(e,-r);a=e.l_base,n=E.luaF_getlocalname(e.func.value.p,r,M(e))}else a=e.funcOff+1;if(null===n){if(!((e===t.ci?t.top:e.next.funcOff)-a>=r&&r>0))return null;n=L("(*temporary)",!0)}return{pos:a+(r-1),name:n}},X=function(t,e,r){var a=void 0;if(P(t),null===e)a=t.stack[t.top-1].ttisLclosure()?E.luaF_getlocalname(t.stack[t.top-1].value.p,r,0):null;else{var n=H(t,e.i_ci,r);n?(a=n.name,R.pushobj2s(t,t.stack[n.pos]),b(t,t.top<=t.ci.top,"stack overflow")):a=null}return P(t),a},z=function(t,e,r){var a=void 0;P(t);var n=H(t,e.i_ci,r);return n?(a=n.name,R.setobjs2s(t,n.pos,t.top-1),delete t.stack[--t.top]):a=null,P(t),a},q=function(t,e){if(null===e||e instanceof R.CClosure)t.source=L("=[JS]",!0),t.linedefined=-1,t.lastlinedefined=-1,t.what=L("J",!0);else{var r=e.p;t.source=r.source?r.source.getstr():L("=?",!0),t.linedefined=r.linedefined,t.lastlinedefined=r.lastlinedefined,t.what=0===t.linedefined?L("main",!0):L("Lua",!0)}t.short_src=R.luaO_chunkid(t.source,k)},Y=function(t,e){if(null===e||e instanceof R.CClosure)t.stack[t.top]=new R.TValue(c,null),O.api_incr_top(t);else{var r=e.p.lineinfo,a=S.luaH_new(t);t.stack[t.top]=new R.TValue(_,a),O.api_incr_top(t);for(var n=new R.TValue(i,!0),u=0;u<r.length;u++)S.luaH_setint(a,r[u],n)}},Z=function(t,e){var r={name:null,funcname:null};return null===e?null:e.callstatus&N.CIST_FIN?(r.name=L("__gc",!0),r.funcname=L("metamethod",!0),r):!(e.callstatus&N.CIST_TAIL)&&e.previous.callstatus&N.CIST_LUA?rt(t,e.previous):null},J=function(t,e,r,a,n){for(var u=1;e.length>0;e=e.subarray(1))switch(e[0]){case 83:q(r,a);break;case 108:r.currentline=n&&n.callstatus&N.CIST_LUA?C(n):-1;break;case 117:r.nups=null===a?0:a.nupvalues,null===a||a instanceof R.CClosure?(r.isvararg=!0,r.nparams=0):(r.isvararg=a.p.is_vararg,r.nparams=a.p.numparams);break;case 116:r.istailcall=n?n.callstatus&N.CIST_TAIL:0;break;case 110:var o=Z(t,n);null===o?(r.namewhat=L("",!0),r.name=null):(r.namewhat=o.funcname,r.name=o.name);break;case 76:case 102:break;default:u=0}return u},W=function(t,e,r){e=d(e);var a=void 0,n=void 0,u=void 0,o=void 0;return P(t),62===e[0]?(u=null,o=t.stack[t.top-1],b(t,o.ttisfunction(),"function expected"),e=e.subarray(1),t.top--):(u=r.i_ci,o=u.func,T(u.func.ttisfunction())),n=o.ttisclosure()?o.value:null,a=J(t,e,r,n,u),A(e,102)>=0&&(R.pushobj2s(t,o),b(t,t.top<=t.ci.top,"stack overflow")),P(t),A(e,76)>=0&&Y(t,n),a},Q=function(t,e,r){var a={name:null,funcname:null};if(y.ISK(r)){var n=t.k[y.INDEXK(r)];if(n.ttisstring())return a.name=n.svalue(),a}else{var u=et(t,e,r);if(u&&99===u.funcname[0])return u}return a.name=L("?",!0),a},$=function(t,e){return t<e?-1:t},tt=function(t,e,r){for(var a=-1,n=0,u=y.OpCodesI,o=0;o<e;o++){var s=t.code[o],l=s.A;switch(s.opcode){case u.OP_LOADNIL:var i=s.B;l<=r&&r<=l+i&&(a=$(o,n));break;case u.OP_TFORCALL:r>=l+2&&(a=$(o,n));break;case u.OP_CALL:case u.OP_TAILCALL:r>=l&&(a=$(o,n));break;case u.OP_JMP:var c=s.sBx,_=o+1+c;o<_&&_<=e&&_>n&&(n=_);break;default:y.testAMode(s.opcode)&&r===l&&(a=$(o,n))}}return a},et=function t(e,r,a){var n={name:E.luaF_getlocalname(e,a+1,r),funcname:null};if(n.name)return n.funcname=L("local",!0),n;var u=tt(e,r,a),o=y.OpCodesI;if(-1!==u){var s=e.code[u];switch(s.opcode){case o.OP_MOVE:var l=s.B;if(l<s.A)return t(e,u,l);break;case o.OP_GETTABUP:case o.OP_GETTABLE:var i=s.C,c=s.B,_=s.opcode===o.OP_GETTABLE?E.luaF_getlocalname(e,c+1,u):j(e,c);return n.name=Q(e,u,i).name,n.funcname=_&&h(_,U.LUA_ENV)?L("global",!0):L("field",!0),n;case o.OP_GETUPVAL:return n.name=j(e,s.B),n.funcname=L("upvalue",!0),n;case o.OP_LOADK:case o.OP_LOADKX:var f=s.opcode===o.OP_LOADK?s.Bx:e.code[u+1].Ax;if(e.k[f].ttisstring())return n.name=e.k[f].svalue(),n.funcname=L("constant",!0),n;break;case o.OP_SELF:var p=s.C;return n.name=Q(e,u,p).name,n.funcname=L("method",!0),n}}return null},rt=function(t,e){var r={name:null,funcname:null},a=0,n=e.func.value.p,u=M(e),o=n.code[u],s=y.OpCodesI;if(e.callstatus&N.CIST_HOOKED)return r.name=L("?",!0),r.funcname=L("hook",!0),r;switch(o.opcode){case s.OP_CALL:case s.OP_TAILCALL:return et(n,u,o.A);case s.OP_TFORCALL:return r.name=L("for iterator",!0),r.funcname=L("for iterator",!0),r;case s.OP_SELF:case s.OP_GETTABUP:case s.OP_GETTABLE:a=w.TMS.TM_INDEX;break;case s.OP_SETTABUP:case s.OP_SETTABLE:a=w.TMS.TM_NEWINDEX;break;case s.OP_ADD:a=w.TMS.TM_ADD;break;case s.OP_SUB:a=w.TMS.TM_SUB;break;case s.OP_MUL:a=w.TMS.TM_MUL;break;case s.OP_MOD:a=w.TMS.TM_MOD;break;case s.OP_POW:a=w.TMS.TM_POW;break;case s.OP_DIV:a=w.TMS.TM_DIV;break;case s.OP_IDIV:a=w.TMS.TM_IDIV;break;case s.OP_BAND:a=w.TMS.TM_BAND;break;case s.OP_BOR:a=w.TMS.TM_BOR;break;case s.OP_BXOR:a=w.TMS.TM_BXOR;break;case s.OP_SHL:a=w.TMS.TM_SHL;break;case s.OP_SHR:a=w.TMS.TM_SHR;break;case s.OP_UNM:a=w.TMS.TM_UNM;break;case s.OP_BNOT:a=w.TMS.TM_BNOT;break;case s.OP_LEN:a=w.TMS.TM_LEN;break;case s.OP_CONCAT:a=w.TMS.TM_CONCAT;break;case s.OP_EQ:a=w.TMS.TM_EQ;break;case s.OP_LT:a=w.TMS.TM_LT;break;case s.OP_LE:a=w.TMS.TM_LE;break;default:return null}return r.name=t.l_G.tmname[a].getstr(),r.funcname=L("metamethod",!0),r},at=function(t,e,r){for(var a=e.l_base;a<e.top;a++)if(t.stack[a]===r)return a;return!1},nt=function(t,e,r){for(var a=e.func.value,n=0;n<a.nupvalues;n++)if(a.upvals[n].v===r)return{name:j(a.p,n),funcname:L("upvalue",!0)};return null},ut=function(t,e){var r=t.ci,a=null;if(r.callstatus&N.CIST_LUA){a=nt(0,r,e);var n=at(t,r,e);!a&&n&&(a=et(r.func.value.p,M(r),n-r.l_base))}return a?R.luaO_pushfstring(t,L(" (%s '%s')",!0),a.funcname,a.name):L("",!0)},ot=function(t,e,r){var a=w.luaT_objtypename(t,e);_t(t,L("attempt to %s a %s value%s",!0),r,a,ut(t,e))},st=function(t,e,r){(e.ttisstring()||I.cvt2str(e))&&(e=r),ot(t,e,L("concatenate",!0))},lt=function(t,e,r,a){!1===I.tonumber(e)&&(r=e),ot(t,r,a)},it=function(t,e,r){var a=w.luaT_objtypename(t,e),n=w.luaT_objtypename(t,r);h(a,n)?_t(t,L("attempt to compare two %s values",!0),a):_t(t,L("attempt to compare %s with %s",!0),a,n)},ct=function(t,e,r,a){var n=void 0;return n=r?R.luaO_chunkid(r.getstr(),k):L("?",!0),R.luaO_pushfstring(t,L("%s:%d: %s",!0),n,a,e)},_t=function(t,e){for(var r=t.ci,a=arguments.length,n=Array(a>2?a-2:0),u=2;u<a;u++)n[u-2]=arguments[u];var o=R.luaO_pushvfstring(t,e,n);r.callstatus&N.CIST_LUA&&ct(t,o,r.func.value.p.source,C(r)),ft(t)},ft=function(t){if(0!==t.errfunc){var e=t.errfunc;R.pushobj2s(t,t.stack[t.top-1]),R.setobjs2s(t,t.top-2,e),m.luaD_callnoyield(t,t.top-2,1)}m.luaD_throw(t,p)},pt=function(t,e,r){!1===I.tointeger(e)&&(r=e),_t(t,L("number%s has no integer representation",!0),ut(t,r))},vt=function(t){var e=t.ci,r=t.hookmask,a=0==--t.hookcount&&r&o;if(a)t.hookcount=t.basehookcount;else if(!(r&s))return;if(e.callstatus&N.CIST_HOOKYIELD)return void(e.callstatus&=~N.CIST_HOOKYIELD);if(a&&m.luaD_hook(t,n,-1),r&s){var l=e.func.value.p,i=e.l_savedpc-1,c=0!==l.lineinfo.length?l.lineinfo[i]:-1;(0===i||e.l_savedpc<=t.oldpc||c!==(0!==l.lineinfo.length?l.lineinfo[t.oldpc-1]:-1))&&m.luaD_hook(t,u,c)}t.oldpc=e.l_savedpc,t.status===v&&(a&&(t.hookcount=1),e.l_savedpc--,e.callstatus|=N.CIST_HOOKYIELD,e.funcOff=t.top-1,e.func=t.stack[e.funcOff],m.luaD_throw(t,v))};t.exports.luaG_addinfo=ct,t.exports.luaG_concaterror=st,t.exports.luaG_errormsg=ft,t.exports.luaG_opinterror=lt,t.exports.luaG_ordererror=it,t.exports.luaG_runerror=_t,t.exports.luaG_tointerror=pt,t.exports.luaG_traceexec=vt,t.exports.luaG_typeerror=ot,t.exports.lua_gethook=K,t.exports.lua_gethookcount=B,t.exports.lua_gethookmask=V,t.exports.lua_getinfo=W,t.exports.lua_getlocal=X,t.exports.lua_getstack=G,t.exports.lua_sethook=D,t.exports.lua_setlocal=z},function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),u=r(0),o=u.constant_types.LUA_TNIL,s=r(1),l=s.lua_assert,i=r(4),c=function t(e){a(this,t),this.id=e.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null},_=function(){function t(e){a(this,t),this.id=e.l_G.id_counter++,this.v=void 0,this.vOff=void 0,this.refcount=0,this.open_next=null}return n(t,[{key:"isopen",value:function(){return void 0!==this.vOff}}]),t}(),f=function(t,e){return new i.LClosure(t,e)},p=function(t,e){for(var r=void 0,a=t.openupval;null!==a&&a.vOff>=e;){if(l(a.isopen()),a.vOff===e)return a;r=a,a=a.open_next}var n=new _(t);return n.open_next=a,r?r.open_next=n:t.openupval=n,n.v=t.stack[e],n.vOff=e,n},v=function(t,e){for(;null!==t.openupval&&t.openupval.vOff>=e;){var r=t.openupval;if(l(r.isopen()),t.openupval=r.open_next,0===r.refcount)r.v=void 0,r.open_next=null;else{var a=r.v;r.v=new i.TValue(a.type,a.value)}r.vOff=void 0}},d=function(t,e){for(var r=0;r<e.nupvalues;r++){var a=new _(t);a.refcount=1,a.v=new i.TValue(o,null),e.upvals[r]=a}},h=function(t,e,r){for(var a=0;a<t.locvars.length&&t.locvars[a].startpc<=r;a++)if(r<t.locvars[a].endpc&&0===--e)return t.locvars[a].varname.getstr();return null};t.exports.MAXUPVAL=255,t.exports.Proto=c,t.exports.UpVal=_,t.exports.luaF_findupval=p,t.exports.luaF_close=v,t.exports.luaF_getlocalname=h,t.exports.luaF_initupvals=d,t.exports.luaF_newLclosure=f},function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=r(0),u=n.LUA_MINSTACK,o=n.LUA_RIDX_GLOBALS,s=n.LUA_RIDX_MAINTHREAD,l=n.constant_types,i=l.LUA_NUMTAGS,c=l.LUA_TNIL,_=l.LUA_TTABLE,f=l.LUA_TTHREAD,p=n.thread_status.LUA_OK,v=r(4),d=r(7),h=r(17),A=r(8),L=r(11),g=r(13),b=2*u,T=function t(){a(this,t),this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN},x=function t(e){a(this,t),this.id=e.id_counter++,this.base_ci=new T,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=e,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.openupval=null,this.nny=1,this.status=p,this.errfunc=0},k=function t(){a(this,t),this.id_counter=0,this.ids=new WeakMap,this.mainthread=null,this.l_registry=new v.TValue(c,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=new Array(g.TMS.TM_N),this.mt=new Array(i)},O=function(t){var e=new T;return t.ci.next=e,e.previous=t.ci,e.next=null,t.ci=e,e},m=function(t){t.ci.next=null},E=function(t,e){t.stack=new Array(b),t.top=0,t.stack_last=b-5;var r=t.base_ci;r.next=r.previous=null,r.callstatus=0,r.funcOff=t.top,r.func=t.stack[t.top],t.stack[t.top++]=new v.TValue(c,null),r.top=t.top+u,t.ci=r},U=function(t){t.ci=t.base_ci,m(t),t.stack=null},R=function(t,e){var r=A.luaH_new(t);e.l_registry.sethvalue(r),A.luaH_setint(r,s,new v.TValue(f,t)),A.luaH_setint(r,o,new v.TValue(_,A.luaH_new(t)))},y=function(t){var e=t.l_G;E(t),R(t,e),g.luaT_init(t),e.version=h.lua_version(null)},N=function(t){var e=t.l_G,r=new x(e);return t.stack[t.top]=new v.TValue(f,r),h.api_incr_top(t),r.hookmask=t.hookmask,r.basehookcount=t.basehookcount,r.hook=t.hook,r.hookcount=r.basehookcount,E(r),r},S=function(t,e){L.luaF_close(e,e.stack),U(e)},w=function(){var t=new k,e=new x(t);return t.mainthread=e,d.luaD_rawrunprotected(e,y,null)!==p&&(e=null),e},I=function(t){L.luaF_close(t,t.stack),U(t)},M=function(t){t=t.l_G.mainthread,I(t)};t.exports.lua_State=x,t.exports.CallInfo=T,t.exports.CIST_OAH=1,t.exports.CIST_LUA=2,t.exports.CIST_HOOKED=4,t.exports.CIST_FRESH=8,t.exports.CIST_YPCALL=16,t.exports.CIST_TAIL=32,t.exports.CIST_HOOKYIELD=64,t.exports.CIST_LEQ=128,t.exports.CIST_FIN=256,t.exports.EXTRA_STACK=5,t.exports.lua_close=M,t.exports.lua_newstate=w,t.exports.lua_newthread=N,t.exports.luaE_extendCI=O,t.exports.luaE_freeCI=m,t.exports.luaE_freethread=S},function(t,e,r){"use strict";var a=r(0),n=a.constant_types,u=n.LUA_TTABLE,o=n.LUA_TUSERDATA,s=a.to_luastring,l=r(1),i=l.lua_assert,c=r(4),_=r(7),f=r(12),p=r(9),v=p.luaS_bless,d=p.luaS_new,h=r(8),A=r(10),L=r(14),g=["no value","nil","boolean","userdata","number","string","table","function","userdata","thread","proto"].map(function(t){return s(t)}),b=function(t){return g[t+1]},T={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},x=function(t){t.l_G.tmname[T.TM_INDEX]=new d(t,s("__index",!0)),t.l_G.tmname[T.TM_NEWINDEX]=new d(t,s("__newindex",!0)),t.l_G.tmname[T.TM_GC]=new d(t,s("__gc",!0)),t.l_G.tmname[T.TM_MODE]=new d(t,s("__mode",!0)),t.l_G.tmname[T.TM_LEN]=new d(t,s("__len",!0)),t.l_G.tmname[T.TM_EQ]=new d(t,s("__eq",!0)),t.l_G.tmname[T.TM_ADD]=new d(t,s("__add",!0)),t.l_G.tmname[T.TM_SUB]=new d(t,s("__sub",!0)),t.l_G.tmname[T.TM_MUL]=new d(t,s("__mul",!0)),t.l_G.tmname[T.TM_MOD]=new d(t,s("__mod",!0)),t.l_G.tmname[T.TM_POW]=new d(t,s("__pow",!0)),t.l_G.tmname[T.TM_DIV]=new d(t,s("__div",!0)),t.l_G.tmname[T.TM_IDIV]=new d(t,s("__idiv",!0)),t.l_G.tmname[T.TM_BAND]=new d(t,s("__band",!0)),t.l_G.tmname[T.TM_BOR]=new d(t,s("__bor",!0)),t.l_G.tmname[T.TM_BXOR]=new d(t,s("__bxor",!0)),t.l_G.tmname[T.TM_SHL]=new d(t,s("__shl",!0)),t.l_G.tmname[T.TM_SHR]=new d(t,s("__shr",!0)),t.l_G.tmname[T.TM_UNM]=new d(t,s("__unm",!0)),t.l_G.tmname[T.TM_BNOT]=new d(t,s("__bnot",!0)),t.l_G.tmname[T.TM_LT]=new d(t,s("__lt",!0)),t.l_G.tmname[T.TM_LE]=new d(t,s("__le",!0)),t.l_G.tmname[T.TM_CONCAT]=new d(t,s("__concat",!0)),t.l_G.tmname[T.TM_CALL]=new d(t,s("__call",!0))},k=s("__name",!0),O=function(t,e){var r=void 0;if(e.ttistable()&&null!==(r=e.value.metatable)||e.ttisfulluserdata()&&null!==(r=e.value.metatable)){var a=h.luaH_getstr(r,v(t,k));if(a.ttisstring())return a.svalue()}return b(e.ttnov())},m=function(t,e,r,a,n,u){var o=t.top;if(c.pushobj2s(t,e),c.pushobj2s(t,r),c.pushobj2s(t,a),u||c.pushobj2s(t,n),t.ci.callstatus&f.CIST_LUA?_.luaD_call(t,o,u):_.luaD_callnoyield(t,o,u),u){var s=t.stack[t.top-1];delete t.stack[--t.top],n.setfrom(s)}},E=function(t,e,r,a,n){var u=S(t,e,n);return u.ttisnil()&&(u=S(t,r,n)),!u.ttisnil()&&(m(t,u,e,r,a,1),!0)},U=function(t,e,r,a,n){if(!E(t,e,r,a,n))switch(n){case T.TM_CONCAT:return A.luaG_concaterror(t,e,r);case T.TM_BAND:case T.TM_BOR:case T.TM_BXOR:case T.TM_SHL:case T.TM_SHR:case T.TM_BNOT:var u=L.tonumber(e),o=L.tonumber(r);return!1!==u&&!1!==o?A.luaG_tointerror(t,e,r):A.luaG_opinterror(t,e,r,s("perform bitwise operation on",!0));default:return A.luaG_opinterror(t,e,r,s("perform arithmetic on",!0))}},R=function(t,e,r,a){var n=new c.TValue;return E(t,e,r,n,a)?!n.l_isfalse():null},y=function(t,e,r){return null===e?null:e.flags&1<<r?null:N(e,r,t.l_G.tmname[r])},N=function(t,e,r){var a=h.luaH_getstr(t,r);return i(e<=T.TM_EQ),a.ttisnil()?(t.flags|=1<<e,null):a},S=function(t,e,r){var a=void 0;switch(e.ttnov()){case u:case o:a=e.value.metatable;break;default:a=t.l_G.mt[e.ttnov()]}return a?h.luaH_getstr(a,t.l_G.tmname[r]):c.luaO_nilobject};t.exports.fasttm=y,t.exports.TMS=T,t.exports.luaT_callTM=m,t.exports.luaT_callbinTM=E,t.exports.luaT_trybinTM=U,t.exports.luaT_callorderTM=R,t.exports.luaT_gettm=N,t.exports.luaT_gettmbyobj=S,t.exports.luaT_init=x,t.exports.luaT_objtypename=O,t.exports.ttypename=b},function(t,e,r){"use strict";var a=r(0),n=a.LUA_MASKLINE,u=a.LUA_MASKCOUNT,o=a.LUA_MULTRET,s=a.constant_types,l=s.LUA_TBOOLEAN,i=s.LUA_TLCF,c=s.LUA_TLIGHTUSERDATA,_=s.LUA_TLNGSTR,f=s.LUA_TNIL,p=s.LUA_TNUMBER,v=s.LUA_TNUMFLT,d=s.LUA_TNUMINT,h=s.LUA_TSHRSTR,A=s.LUA_TTABLE,L=s.LUA_TUSERDATA,g=a.to_luastring,b=r(15),T=b.INDEXK,x=b.ISK,k=b.LFIELDS_PER_FLUSH,O=b.OpCodesI,m=O.OP_ADD,E=O.OP_BAND,U=O.OP_BNOT,R=O.OP_BOR,y=O.OP_BXOR,N=O.OP_CALL,S=O.OP_CLOSURE,w=O.OP_CONCAT,I=O.OP_DIV,M=O.OP_EQ,C=O.OP_EXTRAARG,P=O.OP_FORLOOP,D=O.OP_FORPREP,K=O.OP_GETTABLE,V=O.OP_GETTABUP,B=O.OP_GETUPVAL,G=O.OP_IDIV,j=O.OP_JMP,F=O.OP_LE,H=O.OP_LEN,X=O.OP_LOADBOOL,z=O.OP_LOADK,q=O.OP_LOADKX,Y=O.OP_LOADNIL,Z=O.OP_LT,J=O.OP_MOD,W=O.OP_MOVE,Q=O.OP_MUL,$=O.OP_NEWTABLE,tt=O.OP_NOT,et=O.OP_POW,rt=O.OP_RETURN,at=O.OP_SELF,nt=O.OP_SETLIST,ut=O.OP_SETTABLE,ot=O.OP_SETTABUP,st=O.OP_SETUPVAL,lt=O.OP_SHL,it=O.OP_SHR,ct=O.OP_SUB,_t=O.OP_TAILCALL,ft=O.OP_TEST,pt=O.OP_TESTSET,vt=O.OP_TFORCALL,dt=O.OP_TFORLOOP,ht=O.OP_UNM,At=O.OP_VARARG,Lt=r(6),gt=Lt.LUA_MAXINTEGER,bt=Lt.LUA_MININTEGER,Tt=Lt.lua_numbertointeger,xt=r(1),kt=xt.lua_assert,Ot=xt.luai_nummod,mt=r(4),Et=r(11),Ut=r(12),Rt=r(9),yt=Rt.luaS_bless,Nt=Rt.luaS_eqlngstr,St=Rt.luaS_hashlongstr,wt=r(7),It=r(13),Mt=r(8),Ct=r(10),Pt=function(t){var e=t.ci,r=e.l_base,a=e.l_code[e.l_savedpc-1],n=a.opcode;switch(n){case m:case ct:case Q:case I:case G:case E:case R:case y:case lt:case it:case J:case et:case ht:case U:case H:case V:case K:case at:mt.setobjs2s(t,r+a.A,t.top-1),delete t.stack[--t.top];break;case F:case Z:case M:var u=!t.stack[t.top-1].l_isfalse();delete t.stack[--t.top],e.callstatus&Ut.CIST_LEQ&&(kt(n===F),e.callstatus^=Ut.CIST_LEQ,u=!u),kt(e.l_code[e.l_savedpc].opcode===j),u!==!!a.A&&e.l_savedpc++;break;case w:var o=t.top-1,s=a.B,l=o-1-(r+s);mt.setobjs2s(t,o-2,o),l>1&&(t.top=o-1,pe(t,l)),mt.setobjs2s(t,e.l_base+a.A,t.top-1),wt.adjust_top(t,e.top);break;case vt:kt(e.l_code[e.l_savedpc].opcode===dt),wt.adjust_top(t,e.top);break;case N:a.C-1>=0&&wt.adjust_top(t,e.top)}},Dt=function(t,e,r){return e+r.A},Kt=function(t,e,r){return e+r.B},Vt=function(t,e,r,a){return x(a.B)?r[T(a.B)]:t.stack[e+a.B]},Bt=function(t,e,r,a){return x(a.C)?r[T(a.C)]:t.stack[e+a.C]},Gt=function(t){var e=t.ci;e.callstatus|=Ut.CIST_FRESH;t:for(;;){kt(e===t.ci);var r=e.func.value,a=r.p.k,s=e.l_base,l=e.l_code[e.l_savedpc++];t.hookmask&(n|u)&&Ct.luaG_traceexec(t);var i=Dt(0,s,l),c=l.opcode;switch(c){case W:mt.setobjs2s(t,i,Kt(0,s,l));break;case z:var _=a[l.Bx];mt.setobj2s(t,i,_);break;case q:kt(e.l_code[e.l_savedpc].opcode===C);var f=a[e.l_code[e.l_savedpc++].Ax];mt.setobj2s(t,i,f);break;case X:t.stack[i].setbvalue(0!==l.B),0!==l.C&&e.l_savedpc++;break;case Y:for(var p=0;p<=l.B;p++)t.stack[i+p].setnilvalue();break;case B:var v=l.B;mt.setobj2s(t,i,r.upvals[v].v);break;case V:var d=r.upvals[l.B].v,h=Bt(t,s,a,l);ve(t,d,h,i);break;case K:var A=t.stack[Kt(0,s,l)],L=Bt(t,s,a,l);ve(t,A,L,i);break;case ot:var b=r.upvals[l.A].v,T=Vt(t,s,a,l),x=Bt(t,s,a,l);de(t,b,T,x);break;case st:var O=r.upvals[l.B];O.v.setfrom(t.stack[i]);break;case ut:var Lt=t.stack[i],gt=Vt(t,s,a,l),bt=Bt(t,s,a,l);de(t,Lt,gt,bt);break;case $:t.stack[i].sethvalue(Mt.luaH_new(t));break;case at:var Tt=Kt(0,s,l),xt=Bt(t,s,a,l);mt.setobjs2s(t,i+1,Tt),ve(t,t.stack[Tt],xt,i);break;case m:var Rt=Vt(t,s,a,l),yt=Bt(t,s,a,l),Nt=void 0,St=void 0;Rt.ttisinteger()&&yt.ttisinteger()?t.stack[i].setivalue(Rt.value+yt.value|0):!1!==(Nt=Wt(Rt))&&!1!==(St=Wt(yt))?t.stack[i].setfltvalue(Nt+St):It.luaT_trybinTM(t,Rt,yt,t.stack[i],It.TMS.TM_ADD);break;case ct:var Pt=Vt(t,s,a,l),Gt=Bt(t,s,a,l),qt=void 0,Zt=void 0;Pt.ttisinteger()&&Gt.ttisinteger()?t.stack[i].setivalue(Pt.value-Gt.value|0):!1!==(qt=Wt(Pt))&&!1!==(Zt=Wt(Gt))?t.stack[i].setfltvalue(qt-Zt):It.luaT_trybinTM(t,Pt,Gt,t.stack[i],It.TMS.TM_SUB);break;case Q:var Qt=Vt(t,s,a,l),$t=Bt(t,s,a,l),te=void 0,le=void 0;Qt.ttisinteger()&&$t.ttisinteger()?t.stack[i].setivalue(re(Qt.value,$t.value)):!1!==(te=Wt(Qt))&&!1!==(le=Wt($t))?t.stack[i].setfltvalue(te*le):It.luaT_trybinTM(t,Qt,$t,t.stack[i],It.TMS.TM_MUL);break;case J:var ie=Vt(t,s,a,l),ce=Bt(t,s,a,l),_e=void 0,fe=void 0;ie.ttisinteger()&&ce.ttisinteger()?t.stack[i].setivalue(ne(t,ie.value,ce.value)):!1!==(_e=Wt(ie))&&!1!==(fe=Wt(ce))?t.stack[i].setfltvalue(Ot(t,_e,fe)):It.luaT_trybinTM(t,ie,ce,t.stack[i],It.TMS.TM_MOD);break;case et:var he=Vt(t,s,a,l),Ae=Bt(t,s,a,l),Le=void 0,ge=void 0;!1!==(Le=Wt(he))&&!1!==(ge=Wt(Ae))?t.stack[i].setfltvalue(Math.pow(Le,ge)):It.luaT_trybinTM(t,he,Ae,t.stack[i],It.TMS.TM_POW);break;case I:var be=Vt(t,s,a,l),Te=Bt(t,s,a,l),xe=void 0,ke=void 0;!1!==(xe=Wt(be))&&!1!==(ke=Wt(Te))?t.stack[i].setfltvalue(xe/ke):It.luaT_trybinTM(t,be,Te,t.stack[i],It.TMS.TM_DIV);break;case G:var Oe=Vt(t,s,a,l),me=Bt(t,s,a,l),Ee=void 0,Ue=void 0;Oe.ttisinteger()&&me.ttisinteger()?t.stack[i].setivalue(ae(t,Oe.value,me.value)):!1!==(Ee=Wt(Oe))&&!1!==(Ue=Wt(me))?t.stack[i].setfltvalue(Math.floor(Ee/Ue)):It.luaT_trybinTM(t,Oe,me,t.stack[i],It.TMS.TM_IDIV);break;case E:var Re=Vt(t,s,a,l),ye=Bt(t,s,a,l),Ne=void 0,Se=void 0;!1!==(Ne=Jt(Re))&&!1!==(Se=Jt(ye))?t.stack[i].setivalue(Ne&Se):It.luaT_trybinTM(t,Re,ye,t.stack[i],It.TMS.TM_BAND);break;case R:var we=Vt(t,s,a,l),Ie=Bt(t,s,a,l),Me=void 0,Ce=void 0;!1!==(Me=Jt(we))&&!1!==(Ce=Jt(Ie))?t.stack[i].setivalue(Me|Ce):It.luaT_trybinTM(t,we,Ie,t.stack[i],It.TMS.TM_BOR);break;case y:var Pe=Vt(t,s,a,l),De=Bt(t,s,a,l),Ke=void 0,Ve=void 0;!1!==(Ke=Jt(Pe))&&!1!==(Ve=Jt(De))?t.stack[i].setivalue(Ke^Ve):It.luaT_trybinTM(t,Pe,De,t.stack[i],It.TMS.TM_BXOR);break;case lt:var Be=Vt(t,s,a,l),Ge=Bt(t,s,a,l),je=void 0,Fe=void 0;!1!==(je=Jt(Be))&&!1!==(Fe=Jt(Ge))?t.stack[i].setivalue(ue(je,Fe)):It.luaT_trybinTM(t,Be,Ge,t.stack[i],It.TMS.TM_SHL);break;case it:var He=Vt(t,s,a,l),Xe=Bt(t,s,a,l),ze=void 0,qe=void 0;!1!==(ze=Jt(He))&&!1!==(qe=Jt(Xe))?t.stack[i].setivalue(ue(ze,-qe)):It.luaT_trybinTM(t,He,Xe,t.stack[i],It.TMS.TM_SHR);break;case ht:var Ye=t.stack[Kt(0,s,l)],Ze=void 0;Ye.ttisinteger()?t.stack[i].setivalue(0|-Ye.value):!1!==(Ze=Wt(Ye))?t.stack[i].setfltvalue(-Ze):It.luaT_trybinTM(t,Ye,Ye,t.stack[i],It.TMS.TM_UNM);break;case U:var Je=t.stack[Kt(0,s,l)];Je.ttisinteger()?t.stack[i].setivalue(~Je.value):It.luaT_trybinTM(t,Je,Je,t.stack[i],It.TMS.TM_BNOT);break;case tt:var We=t.stack[Kt(0,s,l)];t.stack[i].setbvalue(We.l_isfalse());break;case H:ee(t,t.stack[i],t.stack[Kt(0,s,l)]);break;case w:var Qe=l.B,$e=l.C;t.top=s+$e+1,pe(t,$e-Qe+1);var tr=s+Qe;mt.setobjs2s(t,i,tr),wt.adjust_top(t,e.top);break;case j:jt(t,e,l,0);break;case M:zt(t,Vt(t,s,a,l),Bt(t,s,a,l))!==l.A?e.l_savedpc++:Ft(t,e);break;case Z:Ht(t,Vt(t,s,a,l),Bt(t,s,a,l))!==l.A?e.l_savedpc++:Ft(t,e);break;case F:Xt(t,Vt(t,s,a,l),Bt(t,s,a,l))!==l.A?e.l_savedpc++:Ft(t,e);break;case ft:(l.C?t.stack[i].l_isfalse():!t.stack[i].l_isfalse())?e.l_savedpc++:Ft(t,e);break;case pt:var er=Kt(0,s,l),rr=t.stack[er];(l.C?rr.l_isfalse():!rr.l_isfalse())?e.l_savedpc++:(mt.setobjs2s(t,i,er),Ft(t,e));break;case N:var ar=l.B,nr=l.C-1;if(0!==ar&&wt.adjust_top(t,i+ar),!wt.luaD_precall(t,i,nr)){e=t.ci;continue t}nr>=0&&wt.adjust_top(t,e.top);break;case _t:var ur=l.B;if(0!==ur&&wt.adjust_top(t,i+ur),!wt.luaD_precall(t,i,o)){var or=t.ci,sr=or.previous,lr=or.func,ir=or.funcOff,cr=sr.funcOff,_r=or.l_base+lr.value.p.numparams;r.p.p.length>0&&Et.luaF_close(t,sr.l_base);for(var fr=0;ir+fr<_r;fr++)mt.setobjs2s(t,cr+fr,ir+fr);sr.l_base=cr+(or.l_base-ir),sr.top=cr+(t.top-ir),wt.adjust_top(t,sr.top),sr.l_code=or.l_code,sr.l_savedpc=or.l_savedpc,sr.callstatus|=Ut.CIST_TAIL,sr.next=null,e=t.ci=sr,kt(t.top===sr.l_base+t.stack[cr].value.p.maxstacksize);continue t}break;case rt:r.p.p.length>0&&Et.luaF_close(t,s);var pr=wt.luaD_poscall(t,e,i,0!==l.B?l.B-1:t.top-i);if(e.callstatus&Ut.CIST_FRESH)return;e=t.ci,pr&&wt.adjust_top(t,e.top),kt(e.callstatus&Ut.CIST_LUA),kt(e.l_code[e.l_savedpc-1].opcode===N);continue t;case P:if(t.stack[i].ttisinteger()){var vr=t.stack[i+2].value,dr=t.stack[i].value+vr|0,hr=t.stack[i+1].value;(0<vr?dr<=hr:hr<=dr)&&(e.l_savedpc+=l.sBx,t.stack[i].chgivalue(dr),t.stack[i+3].setivalue(dr))}else{var Ar=t.stack[i+2].value,Lr=t.stack[i].value+Ar,gr=t.stack[i+1].value;(0<Ar?Lr<=gr:gr<=Lr)&&(e.l_savedpc+=l.sBx,t.stack[i].chgfltvalue(Lr),t.stack[i+3].setfltvalue(Lr))}break;case D:var br=t.stack[i],Tr=t.stack[i+1],xr=t.stack[i+2],kr=void 0;if(br.ttisinteger()&&xr.ttisinteger()&&(kr=Yt(Tr,xr.value))){var Or=kr.stopnow?0:br.value;Tr.value=kr.ilimit,br.value=Or-xr.value|0}else{var mr=void 0,Er=void 0,Ur=void 0;!1===(mr=Wt(Tr))&&Ct.luaG_runerror(t,g("'for' limit must be a number",!0)),t.stack[i+1].setfltvalue(mr),!1===(Er=Wt(xr))&&Ct.luaG_runerror(t,g("'for' step must be a number",!0)),t.stack[i+2].setfltvalue(Er),!1===(Ur=Wt(br))&&Ct.luaG_runerror(t,g("'for' initial value must be a number",!0)),t.stack[i].setfltvalue(Ur-Er)}e.l_savedpc+=l.sBx;break;case vt:var Rr=i+3;mt.setobjs2s(t,Rr+2,i+2),mt.setobjs2s(t,Rr+1,i+1),mt.setobjs2s(t,Rr,i),wt.adjust_top(t,Rr+3),wt.luaD_call(t,Rr,l.C),wt.adjust_top(t,e.top),l=e.l_code[e.l_savedpc++],i=Dt(0,s,l),kt(l.opcode===dt);case dt:t.stack[i+1].ttisnil()||(mt.setobjs2s(t,i,i+1),e.l_savedpc+=l.sBx);break;case nt:var yr=l.B,Nr=l.C;0===yr&&(yr=t.top-i-1),0===Nr&&(kt(e.l_code[e.l_savedpc].opcode===C),Nr=e.l_code[e.l_savedpc++].Ax);for(var Sr=t.stack[i].value,wr=(Nr-1)*k+yr;yr>0;yr--)Mt.luaH_setint(Sr,wr--,t.stack[i+yr]);wt.adjust_top(t,e.top);break;case S:var Ir=r.p.p[l.Bx],Mr=oe(Ir,r.upvals,t.stack,s);null===Mr?se(t,Ir,r.upvals,s,i):t.stack[i].setclLvalue(Mr);break;case At:var Cr=l.B-1,Pr=s-e.funcOff-r.p.numparams-1,Dr=void 0;for(Pr<0&&(Pr=0),Cr<0&&(Cr=Pr,wt.luaD_checkstack(t,Pr),wt.adjust_top(t,i+Pr)),Dr=0;Dr<Cr&&Dr<Pr;Dr++)mt.setobjs2s(t,i+Dr,s-Pr+Dr);for(;Dr<Cr;Dr++)t.stack[i+Dr].setnilvalue();break;case C:throw Error("invalid opcode")}}},jt=function(t,e,r,a){var n=r.A;0!==n&&Et.luaF_close(t,e.l_base+n-1),e.l_savedpc+=r.sBx+a},Ft=function(t,e){jt(t,e,e.l_code[e.l_savedpc],1)},Ht=function(t,e,r){if(e.ttisnumber()&&r.ttisnumber())return Qt(e,r)?1:0;if(e.ttisstring()&&r.ttisstring())return te(e.tsvalue(),r.tsvalue())<0?1:0;var a=It.luaT_callorderTM(t,e,r,It.TMS.TM_LT);return null===a&&Ct.luaG_ordererror(t,e,r),a?1:0},Xt=function(t,e,r){var a=void 0;return e.ttisnumber()&&r.ttisnumber()?$t(e,r)?1:0:e.ttisstring()&&r.ttisstring()?te(e.tsvalue(),r.tsvalue())<=0?1:0:null!==(a=It.luaT_callorderTM(t,e,r,It.TMS.TM_LE))?a?1:0:(t.ci.callstatus|=Ut.CIST_LEQ,a=It.luaT_callorderTM(t,r,e,It.TMS.TM_LT),t.ci.callstatus^=Ut.CIST_LEQ,null===a&&Ct.luaG_ordererror(t,e,r),a?0:1)},zt=function(t,e,r){if(e.ttype()!==r.ttype())return e.ttnov()!==r.ttnov()||e.ttnov()!==p?0:e.value===r.value?1:0;var a=void 0;switch(e.ttype()){case f:return 1;case l:return e.value==r.value?1:0;case c:case d:case v:case i:return e.value===r.value?1:0;case h:case _:return Nt(e.tsvalue(),r.tsvalue())?1:0;case L:case A:if(e.value===r.value)return 1;if(null===t)return 0;a=It.fasttm(t,e.value.metatable,It.TMS.TM_EQ),null===a&&(a=It.fasttm(t,r.value.metatable,It.TMS.TM_EQ));break;default:return e.value===r.value?1:0}if(null===a)return 0;var n=new mt.TValue;return It.luaT_callTM(t,a,e,r,n,1),n.l_isfalse()?0:1},qt=function(t,e){return zt(null,t,e)},Yt=function(t,e){var r=!1,a=Zt(t,e<0?2:1);if(!1===a){var n=Wt(t);if(!1===n)return!1;0<n?(a=gt,e<0&&(r=!0)):(a=bt,e>=0&&(r=!0))}return{stopnow:r,ilimit:a}},Zt=function t(e,r){if(e.ttisfloat()){var a=e.value,n=Math.floor(a);if(a!==n){if(0===r)return!1;r>1&&(n+=1)}return Tt(n)}if(e.ttisinteger())return e.value;if(ie(e)){var u=new mt.TValue;if(mt.luaO_str2num(e.svalue(),u)===e.vslen()+1)return t(u,r)}return!1},Jt=function(t){return t.ttisinteger()?t.value:Zt(t,0)},Wt=function(t){if(t.ttnov()===p)return t.value;if(ie(t)){var e=new mt.TValue;if(mt.luaO_str2num(t.svalue(),e)===t.vslen()+1)return e.value}return!1},Qt=function(t,e){return t.value<e.value},$t=function(t,e){return t.value<=e.value},te=function(t,e){var r=St(t),a=St(e);return r===a?0:r<a?-1:1},ee=function(t,e,r){var a=void 0;switch(r.ttype()){case A:var n=r.value;if(null!==(a=It.fasttm(t,n.metatable,It.TMS.TM_LEN)))break;return void e.setivalue(Mt.luaH_getn(n));case h:case _:return void e.setivalue(r.vslen());default:a=It.luaT_gettmbyobj(t,r,It.TMS.TM_LEN),a.ttisnil()&&Ct.luaG_typeerror(t,r,g("get length of",!0))}It.luaT_callTM(t,a,r,r,e,1)},re=Math.imul||function(t,e){var r=t>>>16&65535,a=65535&t,n=e>>>16&65535,u=65535&e;return a*u+(r*u+a*n<<16>>>0)|0},ae=function(t,e,r){return 0===r&&Ct.luaG_runerror(t,g("attempt to divide by zero")),0|Math.floor(e/r)},ne=function(t,e,r){return 0===r&&Ct.luaG_runerror(t,g("attempt to perform 'n%%0'")),e-Math.floor(e/r)*r|0},ue=function(t,e){return e<0?e<=-32?0:t>>>-e:e>=32?0:t<<e},oe=function(t,e,r,a){var n=t.cache;if(null!==n)for(var u=t.upvalues,o=u.length,s=0;s<o;s++){var l=u[s].instack?r[a+u[s].idx]:e[u[s].idx].v;if(n.upvals[s].v!==l)return null}return n},se=function(t,e,r,a,n){var u=e.upvalues.length,o=e.upvalues,s=new mt.LClosure(t,u);s.p=e,t.stack[n].setclLvalue(s);for(var l=0;l<u;l++)o[l].instack?s.upvals[l]=Et.luaF_findupval(t,a+o[l].idx):s.upvals[l]=r[o[l].idx],s.upvals[l].refcount++;e.cache=s},le=function(t){return t.ttisnumber()},ie=function(t){return t.ttisstring()},ce=function(t,e){var r=t.stack[e];return!!r.ttisstring()||!!le(r)&&(mt.luaO_tostring(t,r),!0)},_e=function(t){return t.ttisstring()&&0===t.vslen()},fe=function(t,e,r,a){var n=0;do{var u=t.stack[e-r],o=u.vslen(),s=u.svalue();a.set(s,n),n+=o}while(--r>0)},pe=function(t,e){kt(e>=2);do{var r=t.top,a=2;if((t.stack[r-2].ttisstring()||le(t.stack[r-2]))&&ce(t,r-1))if(_e(t.stack[r-1]))ce(t,r-2);else if(_e(t.stack[r-2]))mt.setobjs2s(t,r-2,r-1);else{var n=t.stack[r-1].vslen();for(a=1;a<e&&ce(t,r-a-1);a++){var u=t.stack[r-a-1].vslen();n+=u}var o=new Uint8Array(n);fe(t,r,a,o);var s=yt(t,o);mt.setsvalue2s(t,r-a,s)}else It.luaT_trybinTM(t,t.stack[r-2],t.stack[r-1],t.stack[r-2],It.TMS.TM_CONCAT);for(e-=a-1;t.top>r-(a-1);)delete t.stack[--t.top]}while(e>1)},ve=function(t,e,r,a){for(var n=0;n<2e3;n++){var u=void 0;if(e.ttistable()){var o=Mt.luaH_get(t,e.value,r);if(!o.ttisnil())return void mt.setobj2s(t,a,o);if(null===(u=It.fasttm(t,e.value.metatable,It.TMS.TM_INDEX)))return void t.stack[a].setnilvalue()}else u=It.luaT_gettmbyobj(t,e,It.TMS.TM_INDEX),u.ttisnil()&&Ct.luaG_typeerror(t,e,g("index",!0));if(u.ttisfunction())return void It.luaT_callTM(t,u,e,r,t.stack[a],1);e=u}Ct.luaG_runerror(t,g("'__index' chain too long; possible loop",!0))},de=function(t,e,r,a){for(var n=0;n<2e3;n++){var u=void 0;if(e.ttistable()){var o=e.value,s=Mt.luaH_set(t,o,r);if(!s.ttisnil()||null===(u=It.fasttm(t,o.metatable,It.TMS.TM_NEWINDEX)))return a.ttisnil()?Mt.luaH_delete(t,o,r):s.setfrom(a),void Mt.invalidateTMcache(o)}else(u=It.luaT_gettmbyobj(t,e,It.TMS.TM_NEWINDEX)).ttisnil()&&Ct.luaG_typeerror(t,e,g("index",!0));if(u.ttisfunction())return void It.luaT_callTM(t,u,e,r,a,0);e=u}Ct.luaG_runerror(t,g("'__newindex' chain too long; possible loop",!0))};t.exports.cvt2str=le,t.exports.cvt2num=ie,t.exports.luaV_gettable=ve,t.exports.luaV_concat=pe,t.exports.luaV_div=ae,t.exports.luaV_equalobj=zt,t.exports.luaV_execute=Gt,t.exports.luaV_finishOp=Pt,t.exports.luaV_imul=re,t.exports.luaV_lessequal=Xt,t.exports.luaV_lessthan=Ht,t.exports.luaV_mod=ne,t.exports.luaV_objlen=ee,t.exports.luaV_rawequalobj=qt,t.exports.luaV_shiftl=ue,t.exports.luaV_tointeger=Zt,t.exports.settable=de,t.exports.tointeger=Jt,t.exports.tonumber=Wt},function(t,e,r){"use strict";var a=["MOVE","LOADK","LOADKX","LOADBOOL","LOADNIL","GETUPVAL","GETTABUP","GETTABLE","SETTABUP","SETUPVAL","SETTABLE","NEWTABLE","SELF","ADD","SUB","MUL","MOD","POW","DIV","IDIV","BAND","BOR","BXOR","SHL","SHR","UNM","BNOT","NOT","LEN","CONCAT","JMP","EQ","LT","LE","TEST","TESTSET","CALL","TAILCALL","RETURN","FORLOOP","FORPREP","TFORCALL","TFORLOOP","SETLIST","CLOSURE","VARARG","EXTRAARG"],n={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},u=[96,113,65,84,80,80,92,108,60,16,60,84,108,124,124,124,124,124,124,124,124,124,124,124,124,96,96,96,96,104,34,188,188,188,132,228,84,84,16,98,98,4,98,20,81,80,23],o=function(t){return 3&u[t]},s=function(t){return u[t]>>4&3},l=function(t){return u[t]>>2&3},i=function(t){return 64&u[t]},c=function(t){return 128&u[t]},_=function(t){return 256&t},f=function(t){return-257&t},p=function(t){return 256|t},v=function(t,e){return~(-1<<t)<<e},d=function(t,e){return~v(t,e)},h=function(t){return t.opcode},A=function(t,e){return t.code=t.code&d(6,0)|e<<0&v(6,0),S(t)},L=function(t,e,r,a){return t.code=t.code&d(a,r)|e<<r&v(a,r),S(t)},g=function(t){return t.A},b=function(t,e){return L(t,e,6,8)},T=function(t){return t.B},x=function(t,e){return L(t,e,23,9)},k=function(t){return t.C},O=function(t,e){return L(t,e,14,9)},m=function(t){return t.Bx},E=function(t,e){return L(t,e,14,18)},U=function(t){return t.Ax},R=function(t,e){return L(t,e,6,26)},y=function(t){return t.sBx},N=function(t,e){return E(t,e+131071)},S=function(t){if("number"==typeof t)return{code:t,opcode:t>>0&v(6,0),A:t>>6&v(8,0),B:t>>23&v(9,0),C:t>>14&v(9,0),Bx:t>>14&v(18,0),Ax:t>>6&v(26,0),sBx:(t>>14&v(18,0))-131071};var e=t.code;return t.opcode=e>>0&v(6,0),t.A=e>>6&v(8,0),t.B=e>>23&v(9,0),t.C=e>>14&v(9,0),t.Bx=e>>14&v(18,0),t.Ax=e>>6&v(26,0),t.sBx=(e>>14&v(18,0))-131071,t},w=function(t,e,r,a){return S(t<<0|e<<6|r<<23|a<<14)},I=function(t,e,r){return S(t<<0|e<<6|r<<14)},M=function(t,e){return S(t<<0|e<<6)};t.exports.BITRK=256,t.exports.CREATE_ABC=w,t.exports.CREATE_ABx=I,t.exports.CREATE_Ax=M,t.exports.GET_OPCODE=h,t.exports.GETARG_A=g,t.exports.GETARG_B=T,t.exports.GETARG_C=k,t.exports.GETARG_Bx=m,t.exports.GETARG_Ax=U,t.exports.GETARG_sBx=y,t.exports.INDEXK=f,t.exports.ISK=_,t.exports.LFIELDS_PER_FLUSH=50,t.exports.MAXARG_A=255,t.exports.MAXARG_Ax=67108863,t.exports.MAXARG_B=511,t.exports.MAXARG_Bx=262143,t.exports.MAXARG_C=511,t.exports.MAXARG_sBx=131071,t.exports.MAXINDEXRK=255,t.exports.NO_REG=255,t.exports.OpArgK=3,t.exports.OpArgN=0,t.exports.OpArgR=2,t.exports.OpArgU=1,t.exports.OpCodes=a,t.exports.OpCodesI=n,t.exports.POS_A=6,t.exports.POS_Ax=6,t.exports.POS_B=23,t.exports.POS_Bx=14,t.exports.POS_C=14,t.exports.POS_OP=0,t.exports.RKASK=p,t.exports.SETARG_A=b,t.exports.SETARG_Ax=R,t.exports.SETARG_B=x,t.exports.SETARG_Bx=E,t.exports.SETARG_C=O,t.exports.SETARG_sBx=N,t.exports.SET_OPCODE=A,t.exports.SIZE_A=8,t.exports.SIZE_Ax=26,t.exports.SIZE_B=9,t.exports.SIZE_Bx=18,t.exports.SIZE_C=9,t.exports.SIZE_OP=6,t.exports.fullins=S,t.exports.getBMode=s,t.exports.getCMode=l,t.exports.getOpMode=o,t.exports.iABC=0,t.exports.iABx=1,t.exports.iAsBx=2,t.exports.iAx=3,t.exports.testAMode=i,t.exports.testTMode=c},function(t,e,r){"use strict";var a=r(2),n=a.LUA_VERSION_MAJOR,u=a.LUA_VERSION_MINOR,o="_"+n+"_"+u;t.exports.LUA_VERSUFFIX=o,t.exports.lua_assert=function(t){};t.exports.LUA_COLIBNAME="coroutine",t.exports.luaopen_coroutine=r(23).luaopen_coroutine;t.exports.LUA_TABLIBNAME="table",t.exports.luaopen_table=r(24).luaopen_table;t.exports.LUA_OSLIBNAME="os",t.exports.luaopen_os=r(25).luaopen_os;t.exports.LUA_STRLIBNAME="string",t.exports.luaopen_string=r(26).luaopen_string;t.exports.LUA_UTF8LIBNAME="utf8",t.exports.luaopen_utf8=r(27).luaopen_utf8;t.exports.LUA_BITLIBNAME="bit32";t.exports.LUA_MATHLIBNAME="math",t.exports.luaopen_math=r(28).luaopen_math;t.exports.LUA_DBLIBNAME="debug",t.exports.luaopen_debug=r(29).luaopen_debug;t.exports.LUA_LOADLIBNAME="package",t.exports.luaopen_package=r(30).luaopen_package;var s=r(37);t.exports.luaL_openlibs=s.luaL_openlibs},function(t,e,r){"use strict";var a=r(0),n=a.LUA_MULTRET,u=a.LUA_OPBNOT,o=a.LUA_OPEQ,s=a.LUA_OPLE,l=a.LUA_OPLT,i=a.LUA_OPUNM,c=a.LUA_REGISTRYINDEX,_=a.LUA_RIDX_GLOBALS,f=a.LUA_VERSION_NUM,p=a.constant_types,v=p.LUA_NUMTAGS,d=p.LUA_TBOOLEAN,h=p.LUA_TCCL,A=p.LUA_TFUNCTION,L=p.LUA_TLCF,g=p.LUA_TLCL,b=p.LUA_TLIGHTUSERDATA,T=p.LUA_TLNGSTR,x=p.LUA_TNIL,k=p.LUA_TNONE,O=p.LUA_TNUMFLT,m=p.LUA_TNUMINT,E=p.LUA_TSHRSTR,U=p.LUA_TTABLE,R=p.LUA_TTHREAD,y=p.LUA_TUSERDATA,N=a.thread_status.LUA_OK,S=a.from_userstring,w=a.to_luastring,I=r(1),M=I.api_check,C=I.lua_assert,P=r(10),D=r(7),K=r(34),V=K.luaU_dump,B=r(11),G=r(4),j=r(12),F=r(9),H=F.luaS_bless,X=F.luaS_new,z=F.luaS_newliteral,q=r(13),Y=r(6),Z=Y.LUAI_MAXSTACK,J=r(14),W=r(8),Q=r(18),$=Q.ZIO,tt=G.TValue,et=G.CClosure,rt=function(t){t.top++,M(t,t.top<=t.ci.top,"stack overflow")},at=function(t,e){M(t,e<t.top-t.ci.funcOff,"not enough elements in the stack")},nt=function(t){if(!t)throw TypeError("invalid argument")},ut=function(t){return t!==G.luaO_nilobject},ot=function(t){return null===t?f:t.l_G.version},st=function(t,e){var r=t.l_G.panic;return t.l_G.panic=e,r},lt=function(t,e){var r=t.l_G.atnativeerror;return t.l_G.atnativeerror=e,r},it=function(t,e){var r=t.ci;if(e>0){var a=r.funcOff+e;return M(t,e<=r.top-(r.funcOff+1),"unacceptable index"),a>=t.top?G.luaO_nilobject:t.stack[a]}return e>c?(M(t,0!==e&&-e<=t.top,"invalid index"),t.stack[t.top+e]):e===c?t.l_G.l_registry:(e=c-e,M(t,e<=B.MAXUPVAL+1,"upvalue index too large"),r.func.ttislcf()?G.luaO_nilobject:e<=r.func.value.nupvalues?r.func.value.upvalue[e-1]:G.luaO_nilobject)},ct=function(t,e){var r=t.ci;if(e>0){var a=r.funcOff+e;return M(t,e<=r.top-(r.funcOff+1),"unacceptable index"),a>=t.top?null:a}if(e>c)return M(t,0!==e&&-e<=t.top,"invalid index"),t.top+e;throw Error("attempt to use pseudo-index")},_t=function(t,e){var r=void 0,a=t.ci;if(M(t,e>=0,"negative 'n'"),t.stack_last-t.top>e)r=!0;else{t.top+j.EXTRA_STACK>Z-e?r=!1:(D.luaD_growstack(t,e),r=!0)}return r&&a.top<t.top+e&&(a.top=t.top+e),r},ft=function(t,e,r){if(t!==e){at(t,r),M(t,t.l_G===e.l_G,"moving among independent states"),M(t,e.ci.top-e.top>=r,"stack overflow"),t.top-=r;for(var a=0;a<r;a++)e.stack[e.top]=new G.TValue,G.setobj2s(e,e.top,t.stack[t.top+a]),delete t.stack[t.top+a],e.top++}},pt=function(t,e){return e>0||e<=c?e:t.top-t.ci.funcOff+e},vt=function(t){return t.top-(t.ci.funcOff+1)},dt=function(t,e){G.pushobj2s(t,it(t,e)),M(t,t.top<=t.ci.top,"stack overflow")},ht=function(t,e){var r=t.ci.funcOff,a=void 0;e>=0?(M(t,e<=t.stack_last-(r+1),"new top too large"),a=r+1+e):(M(t,-(e+1)<=t.top-(r+1),"invalid new top"),a=t.top+e+1),D.adjust_top(t,a)},At=function(t,e){ht(t,-e-1)},Lt=function(t,e,r){for(;e<r;e++,r--){var a=t.stack[e],n=new tt(a.type,a.value);G.setobjs2s(t,e,r),G.setobj2s(t,r,n)}},gt=function(t,e,r){var a=t.top-1,n=ct(t,e),u=t.stack[n];M(t,ut(u)&&e>c,"index not in the stack"),M(t,(r>=0?r:-r)<=a-n+1,"invalid 'n'");var o=r>=0?a-r:n-r-1;Lt(t,n,o),Lt(t,o+1,t.top-1),Lt(t,n,t.top-1)},bt=function(t,e,r){var a=it(t,e);it(t,r).setfrom(a)},Tt=function(t,e){gt(t,e,-1),At(t,1)},xt=function(t,e){gt(t,e,1)},kt=function(t,e){bt(t,-1,e),At(t,1)},Ot=function(t){t.stack[t.top]=new tt(x,null),rt(t)},mt=function(t,e){nt(t),t.stack[t.top]=new tt(O,e),rt(t)},Et=function(t,e){nt(t),t.stack[t.top]=new tt(m,e),rt(t)},Ut=function(t,e,r){nt(t);var a=void 0;return 0===r?(e=w("",!0),a=H(t,e)):(e=S(e),M(t,e.length>=r,"invalid length to lua_pushlstring"),a=X(t,e.subarray(0,r))),G.pushsvalue2s(t,a),M(t,t.top<=t.ci.top,"stack overflow"),a.value},Rt=function(t,e){if(void 0===e||null===e)t.stack[t.top]=new tt(x,null),t.top++;else{var r=X(t,S(e));G.pushsvalue2s(t,r),e=r.getstr()}return M(t,t.top<=t.ci.top,"stack overflow"),e},yt=function(t,e,r){return e=S(e),G.luaO_pushvfstring(t,e,r)},Nt=function(t,e){e=S(e);for(var r=arguments.length,a=Array(r>2?r-2:0),n=2;n<r;n++)a[n-2]=arguments[n];return G.luaO_pushvfstring(t,e,a)},St=function(t,e){if(void 0===e||null===e)t.stack[t.top]=new tt(x,null),t.top++;else{nt("string"==typeof e);var r=z(t,e);G.pushsvalue2s(t,r),e=r.getstr()}return M(t,t.top<=t.ci.top,"stack overflow"),e},wt=function(t,e,r){if(nt("function"==typeof e||"number"==typeof r),0===r)t.stack[t.top]=new tt(L,e);else{at(t,r),M(t,r<=B.MAXUPVAL,"upvalue index too large");for(var a=new et(t,e,r),n=0;n<r;n++)a.upvalue[n].setfrom(t.stack[t.top-r+n]);for(var u=1;u<r;u++)delete t.stack[--t.top];r>0&&--t.top,t.stack[t.top].setclCvalue(a)}rt(t)},It=wt,Mt=function(t,e){wt(t,e,0)},Ct=Mt,Pt=function(t,e){t.stack[t.top]=new tt(d,!!e),rt(t)},Dt=function(t,e){t.stack[t.top]=new tt(b,e),rt(t)},Kt=function(t){return t.stack[t.top]=new tt(R,t),rt(t),t.l_G.mainthread===t},Vt=function(t){Jt(t,c,_)},Bt=function(t,e,r){var a=X(t,S(r));at(t,1),G.pushsvalue2s(t,a),M(t,t.top<=t.ci.top,"stack overflow"),J.settable(t,e,t.stack[t.top-1],t.stack[t.top-2]),delete t.stack[--t.top],delete t.stack[--t.top]},Gt=function(t,e){Bt(t,W.luaH_getint(t.l_G.l_registry.value,_),e)},jt=function(t,e){at(t,1);var r=void 0,a=it(t,e);switch(t.stack[t.top-1].ttisnil()?r=null:(M(t,t.stack[t.top-1].ttistable(),"table expected"),r=t.stack[t.top-1].value),a.ttnov()){case y:case U:a.value.metatable=r;break;default:t.l_G.mt[a.ttnov()]=r}return delete t.stack[--t.top],!0},Ft=function(t,e){at(t,2);var r=it(t,e);J.settable(t,r,t.stack[t.top-2],t.stack[t.top-1]),delete t.stack[--t.top],delete t.stack[--t.top]},Ht=function(t,e,r){Bt(t,it(t,e),r)},Xt=function(t,e,r){nt("number"==typeof r&&(0|r)===r),at(t,1);var a=it(t,e);t.stack[t.top]=new tt(m,r),rt(t),J.settable(t,a,t.stack[t.top-1],t.stack[t.top-2]),delete t.stack[--t.top],delete t.stack[--t.top]},zt=function(t,e){at(t,2);var r=it(t,e);M(t,r.ttistable(),"table expected");var a=t.stack[t.top-2],n=t.stack[t.top-1];if(n.ttisnil())W.luaH_delete(t,r.value,a);else{W.luaH_set(t,r.value,a).setfrom(n)}W.invalidateTMcache(r.value),delete t.stack[--t.top],delete t.stack[--t.top]},qt=function(t,e,r){at(t,1);var a=it(t,e);M(t,a.ttistable(),"table expected"),W.luaH_setint(a.value,r,t.stack[t.top-1]),delete t.stack[--t.top]},Yt=function(t,e,r){at(t,1);var a=it(t,e);M(t,a.ttistable(),"table expected");var n=new tt(b,r),u=t.stack[t.top-1];if(u.ttisnil())W.luaH_delete(t,a.value,n);else{W.luaH_set(t,a.value,n).setfrom(u)}delete t.stack[--t.top]},Zt=function(t,e,r){var a=X(t,S(r));return G.pushsvalue2s(t,a),M(t,t.top<=t.ci.top,"stack overflow"),J.luaV_gettable(t,e,t.stack[t.top-1],t.top-1),t.stack[t.top-1].ttnov()},Jt=function(t,e,r){var a=it(t,e);return M(t,a.ttistable(),"table expected"),G.pushobj2s(t,W.luaH_getint(a.value,r)),M(t,t.top<=t.ci.top,"stack overflow"),t.stack[t.top-1].ttnov()},Wt=function(t,e,r){var a=it(t,e);M(t,a.ttistable(),"table expected");var n=new tt(b,r);return G.pushobj2s(t,W.luaH_get(t,a.value,n)),M(t,t.top<=t.ci.top,"stack overflow"),t.stack[t.top-1].ttnov()},Qt=function(t,e){var r=it(t,e);return M(t,r.ttistable(r),"table expected"),G.setobj2s(t,t.top-1,W.luaH_get(t,r.value,t.stack[t.top-1])),t.stack[t.top-1].ttnov()},$t=function(t,e,r){var a=new G.TValue(U,W.luaH_new(t));t.stack[t.top]=a,rt(t)},te=function(t,e){return new G.Udata(t,e)},ee=function(t,e){var r=te(t,e);return t.stack[t.top]=new G.TValue(y,r),rt(t),r.data},re=function(t,e,r){switch(e.ttype()){case h:var a=e.value;return 1<=r&&r<=a.nupvalues?{name:w("",!0),val:a.upvalue[r-1]}:null;case g:var n=e.value,u=n.p;if(!(1<=r&&r<=u.upvalues.length))return null;var o=u.upvalues[r-1].name;return{name:o?o.getstr():w("(*no name)",!0),val:n.upvals[r-1].v};default:return null}},ae=function(t,e,r){var a=re(0,it(t,e),r);if(a){var n=a.name,u=a.val;return G.pushobj2s(t,u),M(t,t.top<=t.ci.top,"stack overflow"),n}return null},ne=function(t,e,r){var a=it(t,e);at(t,1);var n=re(0,a,r);if(n){var u=n.name;return n.val.setfrom(t.stack[t.top-1]),delete t.stack[--t.top],u}return null},ue=function(t){$t(t)},oe=function(t,e,r){Mt(t,r),Gt(t,e)},se=function(t,e){var r=it(t,e),a=void 0,n=!1;switch(r.ttnov()){case U:case y:a=r.value.metatable;break;default:a=t.l_G.mt[r.ttnov()]}return null!==a&&void 0!==a&&(t.stack[t.top]=new tt(U,a),rt(t),n=!0),n},le=function(t,e){var r=it(t,e);M(t,r.ttisfulluserdata(),"full userdata expected");var a=r.value.uservalue;return t.stack[t.top]=new tt(a.type,a.value),rt(t),t.stack[t.top-1].ttnov()},ie=function(t,e){var r=it(t,e);return J.luaV_gettable(t,r,t.stack[t.top-1],t.top-1),t.stack[t.top-1].ttnov()},ce=function(t,e,r){return Zt(t,it(t,e),r)},_e=function(t,e,r){nt("number"==typeof r&&(0|r)===r);var a=it(t,e);return t.stack[t.top]=new tt(m,r),rt(t),J.luaV_gettable(t,a,t.stack[t.top-1],t.top-1),t.stack[t.top-1].ttnov()},fe=function(t,e){return Zt(t,W.luaH_getint(t.l_G.l_registry.value,_),e)},pe=function(t,e){return!it(t,e).l_isfalse()},ve=function(t,e){var r=it(t,e);if(!r.ttisstring()){if(!J.cvt2str(r))return null;G.luaO_tostring(t,r)}return r.svalue()},de=ve,he=function(t,e){var r=it(t,e);if(!r.ttisstring()){if(!J.cvt2str(r))return null;G.luaO_tostring(t,r)}return r.jsstring()},Ae=he,Le=function(t,e){var r=ve(t,e);return new DataView(r.buffer,r.byteOffset,r.byteLength)},ge=function(t,e){var r=it(t,e);switch(r.ttype()){case E:case T:return r.vslen();case y:return r.value.len;case U:return W.luaH_getn(r.value);default:return 0}},be=function(t,e){var r=it(t,e);return r.ttislcf()||r.ttisCclosure()?r.value:null},Te=function(t,e){var r=xe(t,e);return!1===r?0:r},xe=function(t,e){return J.tointeger(it(t,e))},ke=function(t,e){var r=Oe(t,e);return!1===r?0:r},Oe=function(t,e){return J.tonumber(it(t,e))},me=function(t,e){var r=it(t,e);switch(r.ttnov()){case y:return r.value.data;case b:return r.value;default:return null}},Ee=function(t,e){var r=it(t,e);return r.ttisthread()?r.value:null},Ue=function(t,e){var r=it(t,e);switch(r.ttype()){case U:case g:case h:case L:case R:case y:case b:return r.value;default:return null}},Re=new WeakMap,ye=function(t,e){var r=Re.get(t);return!!r&&(null===e||e.l_G===r)},Ne=function(t,e,r){var a=function(a){M(a,a instanceof j.lua_State&&t===a.l_G,"must be from same global state"),a.stack[a.top]=new tt(e,r),rt(a)};return Re.set(a,t),a},Se=function(t,e){var r=it(t,e);return Ne(t.l_G,r.type,r.value)},we=function(t,e,r,a){var n=it(t,e),u=it(t,r),i=0;if(ut(n)&&ut(u))switch(a){case o:i=J.luaV_equalobj(t,n,u);break;case l:i=J.luaV_lessthan(t,n,u);break;case s:i=J.luaV_lessequal(t,n,u);break;default:M(t,!1,"invalid option")}return i},Ie=function(t,e){var r=new tt,a=G.luaO_str2num(e,r);return 0!==a&&(t.stack[t.top]=r,rt(t)),a},Me=function(t,e){D.luaD_callnoyield(t,e.funcOff,e.nresults)},Ce=function(t,e){var r=it(t,e);return ut(r)?r.ttnov():k},Pe=function(t,e){return M(t,k<=e&&e<v,"invalid tag"),q.ttypename(e)},De=function(t,e){var r=it(t,e);return r.ttislcf(r)||r.ttisCclosure()},Ke=function(t,e){return Ce(t,e)===x},Ve=function(t,e){return Ce(t,e)===d},Be=function(t,e){return Ce(t,e)===k},Ge=function(t,e){return Ce(t,e)<=0},je=function(t,e){return it(t,e).ttistable()},Fe=function(t,e){return it(t,e).ttisinteger()},He=function(t,e){return!1!==J.tonumber(it(t,e))},Xe=function(t,e){var r=it(t,e);return r.ttisstring()||J.cvt2str(r)},ze=function(t,e){var r=it(t,e);return r.ttisfulluserdata(r)||r.ttislightuserdata()},qe=function(t,e){return Ce(t,e)===R},Ye=function(t,e){return Ce(t,e)===A},Ze=function(t,e){return Ce(t,e)===b},Je=function(t,e,r){var a=it(t,e),n=it(t,r);return ut(a)&&ut(n)?J.luaV_equalobj(null,a,n):0},We=function(t,e){e!==i&&e!==u?at(t,2):(at(t,1),G.pushobj2s(t,t.stack[t.top-1]),M(t,t.top<=t.ci.top,"stack overflow")),G.luaO_arith(t,e,t.stack[t.top-2],t.stack[t.top-1],t.stack[t.top-2]),delete t.stack[--t.top]},Qe=w("?"),$e=function(t,e,r,a,n){a=a?S(a):Qe,null!==n&&(n=S(n));var u=new $(t,e,r),o=D.luaD_protectedparser(t,u,a,n);if(o===N){var s=t.stack[t.top-1].value;if(s.nupvalues>=1){var l=W.luaH_getint(t.l_G.l_registry.value,_);s.upvals[0].v.setfrom(l)}}return o},tr=function(t,e,r,a){at(t,1);var n=t.stack[t.top-1];return n.ttisLclosure()?V(t,n.value.p,e,r,a):1},er=function(t){return t.status},rr=function(t,e){at(t,1);var r=it(t,e);M(t,r.ttisfulluserdata(),"full userdata expected"),r.value.uservalue.setfrom(t.stack[t.top-1]),delete t.stack[--t.top]},ar=function(t,e,r){M(t,r==n||t.ci.top-t.top>=r-e,"results from function overflow current stack size")},nr=function(t,e,r,a,u){M(t,null===u||!(t.ci.callstatus&j.CIST_LUA),"cannot use continuations inside hooks"),at(t,e+1),M(t,t.status===N,"cannot do calls on non-normal thread"),ar(t,e,r);var o=t.top-(e+1);null!==u&&0===t.nny?(t.ci.c_k=u,t.ci.c_ctx=a,D.luaD_call(t,o,r)):D.luaD_callnoyield(t,o,r),r===n&&t.ci.top<t.top&&(t.ci.top=t.top)},ur=function(t,e,r){nr(t,e,r,0,null)},or=function(t,e,r,a,u,o){M(t,null===o||!(t.ci.callstatus&j.CIST_LUA),"cannot use continuations inside hooks"),at(t,e+1),M(t,t.status===N,"cannot do calls on non-normal thread"),ar(t,e,r);var s={func:null,funcOff:NaN,nresults:NaN},l=void 0,i=void 0;if(i=0===a?0:ct(t,a),s.funcOff=t.top-(e+1),s.func=t.stack[s.funcOff],null===o||t.nny>0)s.nresults=r,l=D.luaD_pcall(t,Me,s,s.funcOff,i);else{var c=t.ci;c.c_k=o,c.c_ctx=u,c.extra=s.funcOff,c.c_old_errfunc=t.errfunc,t.errfunc=i,c.callstatus&=~j.CIST_OAH|t.allowhook,c.callstatus|=j.CIST_YPCALL,D.luaD_call(t,s.funcOff,r),c.callstatus&=~j.CIST_YPCALL,t.errfunc=c.c_old_errfunc,l=N}return r===n&&t.ci.top<t.top&&(t.ci.top=t.top),l},sr=function(t,e,r,a){return or(t,e,r,a,0,null)},lr=function(t){at(t,1),P.luaG_errormsg(t)},ir=function(t,e){var r=it(t,e);return M(t,r.ttistable(),"table expected"),t.stack[t.top]=new tt,W.luaH_next(t,r.value,t.top-1)?(rt(t),1):(delete t.stack[t.top],delete t.stack[--t.top],0)},cr=function(t,e){at(t,e),e>=2?J.luaV_concat(t,e):0===e&&(G.pushsvalue2s(t,H(t,w("",!0))),M(t,t.top<=t.ci.top,"stack overflow"))},_r=function(t,e){var r=it(t,e),a=new tt;J.luaV_objlen(t,a,r),t.stack[t.top]=a,rt(t)},fr=function(t,e,r){var a=it(t,e);M(t,a.ttisLclosure(),"Lua function expected");var n=a.value;return M(t,1<=r&&r<=n.p.upvalues.length,"invalid upvalue index"),{closure:n,upval:n.upvals[r-1],upvalOff:r-1}},pr=function(t,e,r){var a=it(t,e);switch(a.ttype()){case g:return fr(t,e,r).upval;case h:var n=a.value;return M(t,1<=r&&r<=n.nupvalues,"invalid upvalue index"),n.upvalue[r-1];default:return M(t,!1,"closure expected"),null}},vr=function(t,e,r,a,n){var u=fr(t,e,r),o=fr(t,a,n),s=u.upval,l=o.upval,i=u.closure;C(s.refcount>0),s.refcount--,i.upvals[u.upvalOff]=l,l.refcount++},dr=function(){},hr=function(){return console.warn("lua_getallocf is not available"),0},Ar=function(){return console.warn("lua_setallocf is not available"),0},Lr=function(){return console.warn("lua_getextraspace is not available"),0};t.exports.api_incr_top=rt,t.exports.api_checknelems=at,t.exports.lua_absindex=pt,t.exports.lua_arith=We,t.exports.lua_atpanic=st,t.exports.lua_atnativeerror=lt,t.exports.lua_call=ur,t.exports.lua_callk=nr,t.exports.lua_checkstack=_t,t.exports.lua_compare=we,t.exports.lua_concat=cr,t.exports.lua_copy=bt,t.exports.lua_createtable=$t,t.exports.lua_dump=tr,t.exports.lua_error=lr,t.exports.lua_gc=dr,t.exports.lua_getallocf=hr,t.exports.lua_getextraspace=Lr,t.exports.lua_getfield=ce,t.exports.lua_getglobal=fe,t.exports.lua_geti=_e,t.exports.lua_getmetatable=se,t.exports.lua_gettable=ie,t.exports.lua_gettop=vt,t.exports.lua_getupvalue=ae,t.exports.lua_getuservalue=le,t.exports.lua_insert=xt,t.exports.lua_isboolean=Ve,t.exports.lua_iscfunction=De,t.exports.lua_isfunction=Ye,t.exports.lua_isinteger=Fe,t.exports.lua_islightuserdata=Ze,t.exports.lua_isnil=Ke,t.exports.lua_isnone=Be,t.exports.lua_isnoneornil=Ge,t.exports.lua_isnumber=He,t.exports.lua_isproxy=ye,t.exports.lua_isstring=Xe,t.exports.lua_istable=je,t.exports.lua_isthread=qe,t.exports.lua_isuserdata=ze,t.exports.lua_len=_r,t.exports.lua_load=$e,t.exports.lua_newtable=ue,t.exports.lua_newuserdata=ee,t.exports.lua_next=ir,t.exports.lua_pcall=sr,t.exports.lua_pcallk=or,t.exports.lua_pop=At,t.exports.lua_pushboolean=Pt,t.exports.lua_pushcclosure=wt,t.exports.lua_pushcfunction=Mt,t.exports.lua_pushfstring=Nt,t.exports.lua_pushglobaltable=Vt,t.exports.lua_pushinteger=Et,t.exports.lua_pushjsclosure=It,t.exports.lua_pushjsfunction=Ct,t.exports.lua_pushlightuserdata=Dt,t.exports.lua_pushliteral=St,t.exports.lua_pushlstring=Ut,t.exports.lua_pushnil=Ot,t.exports.lua_pushnumber=mt,t.exports.lua_pushstring=Rt,t.exports.lua_pushthread=Kt,t.exports.lua_pushvalue=dt,t.exports.lua_pushvfstring=yt,t.exports.lua_rawequal=Je,t.exports.lua_rawget=Qt,t.exports.lua_rawgeti=Jt,t.exports.lua_rawgetp=Wt,t.exports.lua_rawlen=ge,t.exports.lua_rawset=zt,t.exports.lua_rawseti=qt,t.exports.lua_rawsetp=Yt,t.exports.lua_register=oe,t.exports.lua_remove=Tt,t.exports.lua_replace=kt,t.exports.lua_rotate=gt,t.exports.lua_setallocf=Ar,t.exports.lua_setfield=Ht,t.exports.lua_setglobal=Gt,t.exports.lua_seti=Xt,t.exports.lua_setmetatable=jt,t.exports.lua_settable=Ft,t.exports.lua_settop=ht,t.exports.lua_setupvalue=ne,t.exports.lua_setuservalue=rr,t.exports.lua_status=er,t.exports.lua_stringtonumber=Ie,t.exports.lua_toboolean=pe,t.exports.lua_tocfunction=be,t.exports.lua_todataview=Le,t.exports.lua_tointeger=Te,t.exports.lua_tointegerx=xe,t.exports.lua_tojsstring=Ae,t.exports.lua_toljsstring=he,t.exports.lua_tolstring=ve,t.exports.lua_tonumber=ke,t.exports.lua_tonumberx=Oe,t.exports.lua_topointer=Ue,t.exports.lua_toproxy=Se,t.exports.lua_tostring=de,t.exports.lua_tothread=Ee,t.exports.lua_touserdata=me,t.exports.lua_type=Ce,t.exports.lua_typename=Pe,t.exports.lua_upvalueid=pr,t.exports.lua_upvaluejoin=vr,t.exports.lua_version=ot,t.exports.lua_xmove=ft},function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),u=r(1),o=u.lua_assert,s=function t(){a(this,t),this.buffer=null,this.n=0},l=function(t){return t.buffer.subarray(0,t.n)},i=function(t,e){t.n-=e},c=function(t){t.n=0},_=function(t,e,r){var a=new Uint8Array(r);e.buffer&&a.set(e.buffer),e.buffer=a},f=function(){function t(e,r,n){a(this,t),this.L=e,o("function"==typeof r,"ZIO requires a reader"),this.reader=r,this.data=n,this.n=0,this.buffer=null,this.off=0}return n(t,[{key:"zgetc",value:function(){return this.n-- >0?this.buffer[this.off++]:p(this)}}]),t}(),p=function(t){var e=t.reader(t.L,t.data);if(null===e)return-1;o(e instanceof Uint8Array,"Should only load binary of array of bytes");var r=e.length;return 0===r?-1:(t.buffer=e,t.off=0,t.n=r-1,t.buffer[t.off++])},v=function(t,e,r,a){for(;a;){if(0===t.n){if(-1===p(t))return a;t.n++,t.off--}for(var n=a<=t.n?a:t.n,u=0;u<n;u++)e[r++]=t.buffer[t.off++];t.n-=n,0===t.n&&(t.buffer=null),a-=n}return 0};t.exports.EOZ=-1,t.exports.luaZ_buffer=l,t.exports.luaZ_buffremove=i,t.exports.luaZ_fill=p,t.exports.luaZ_read=v,t.exports.luaZ_resetbuffer=c,t.exports.luaZ_resizebuffer=_,t.exports.MBuffer=s,t.exports.ZIO=f},function(t,e,r){"use strict";var a=r(3);t.exports.FENGARI_AUTHORS=a.FENGARI_AUTHORS,t.exports.FENGARI_COPYRIGHT=a.FENGARI_COPYRIGHT,t.exports.FENGARI_RELEASE=a.FENGARI_RELEASE,t.exports.FENGARI_VERSION=a.FENGARI_VERSION,t.exports.FENGARI_VERSION_MAJOR=a.FENGARI_VERSION_MAJOR,t.exports.FENGARI_VERSION_MINOR=a.FENGARI_VERSION_MINOR,t.exports.FENGARI_VERSION_NUM=a.FENGARI_VERSION_NUM,t.exports.FENGARI_VERSION_RELEASE=a.FENGARI_VERSION_RELEASE,t.exports.luastring_eq=a.luastring_eq,t.exports.luastring_indexOf=a.luastring_indexOf,t.exports.luastring_of=a.luastring_of,t.exports.to_jsstring=a.to_jsstring,t.exports.to_luastring=a.to_luastring,t.exports.to_uristring=a.to_uristring;var n=r(2),u=r(5),o=r(16);t.exports.lua=n,t.exports.lauxlib=u,t.exports.lualib=o},function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=r(0),u=n.constant_types.LUA_TLNGSTR,o=n.char,s=n.thread_status.LUA_ERRSYNTAX,l=n.to_luastring,i=r(1),c=i.lua_assert,_=r(10),f=r(7),p=r(21),v=r(4),d=r(9),h=d.luaS_bless,A=d.luaS_hash,L=d.luaS_hashlongstr,g=d.luaS_new,b=r(8),T=r(1),x=r(18),k=l("_ENV",!0),O={TK_AND:257,TK_BREAK:258,TK_DO:259,TK_ELSE:260,TK_ELSEIF:261,TK_END:262,TK_FALSE:263,TK_FOR:264,TK_FUNCTION:265,TK_GOTO:266,TK_IF:267,TK_IN:268,TK_LOCAL:269,TK_NIL:270,TK_NOT:271,TK_OR:272,TK_REPEAT:273,TK_RETURN:274,TK_THEN:275,TK_TRUE:276,TK_UNTIL:277,TK_WHILE:278,TK_IDIV:279,TK_CONCAT:280,TK_DOTS:281,TK_EQ:282,TK_GE:283,TK_LE:284,TK_NE:285,TK_SHL:286,TK_SHR:287,TK_DBCOLON:288,TK_EOS:289,TK_FLT:290,TK_INT:291,TK_NAME:292,TK_STRING:293},m=O,E=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","//","..","...","==",">=","<=","~=","<<",">>","::","<eof>","<number>","<integer>","<name>","<string>"],U=function t(){a(this,t),this.r=NaN,this.i=NaN,this.ts=null},R=function t(){a(this,t),this.token=NaN,this.seminfo=new U},y=function t(){a(this,t),this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new R,this.lookahead=new R,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null},N=function(t,e){var r=t.buff;if(r.n+1>r.buffer.length){r.buffer.length>=T.MAX_INT/2&&j(t,l("lexical element too long",!0),0);var a=2*r.buffer.length;x.luaZ_resizebuffer(t.L,r,a)}r.buffer[r.n++]=e<0?255+e+1:e},S=function(t,e){if(e<257)return v.luaO_pushfstring(t.L,l("'%c'",!0),e);var r=E[e-257];return e<m.TK_EOS?v.luaO_pushfstring(t.L,l("'%s'",!0),l(r)):l(r)},w=function(t){return t.current===o["\n"]||t.current===o["\r"]},I=function(t){t.current=t.z.zgetc()},M=function(t){N(t,t.current),I(t)},C=function(t,e){var r=t.L,a=g(r,e),n=b.luaH_set(r,t.h,new v.TValue(u,a));if(n.ttisnil())n.setbvalue(!0);else{var o=t.h.strong.get(L(a));c(o.value==n),a=o.key.tsvalue()}return a},P=function(t){var e=t.current;c(w(t)),I(t),w(t)&&t.current!==e&&I(t),++t.linenumber>=T.MAX_INT&&j(t,l("chunk has too many lines",!0),0)},D=function(t,e,r,a,n){e.t={token:0,seminfo:new U},e.L=t,e.current=n,e.lookahead={token:m.TK_EOS,seminfo:new U},e.z=r,e.fs=null,e.linenumber=1,e.lastline=1,e.source=a,e.envn=h(t,k),x.luaZ_resizebuffer(t,e.buff,T.LUA_MINBUFFER)},K=function(t,e){return t.current===e.charCodeAt(0)&&(I(t),!0)},V=function(t,e){return(t.current===e[0].charCodeAt(0)||t.current===e[1].charCodeAt(0))&&(M(t),!0)},B=function(t,e){var r="Ee",a=t.current;for(c(p.lisdigit(t.current)),M(t),a===o[0]&&V(t,"xX")&&(r="Pp");;)if(V(t,r)&&V(t,"-+"),p.lisxdigit(t.current))M(t);else{if(t.current!==o["."])break;M(t)}var n=new v.TValue;return 0===v.luaO_str2num(x.luaZ_buffer(t.buff),n)&&j(t,l("malformed number",!0),m.TK_FLT),n.ttisinteger()?(e.i=n.value,m.TK_INT):(c(n.ttisfloat()),e.r=n.value,m.TK_FLT)},G=function(t,e){switch(e){case m.TK_NAME:case m.TK_STRING:case m.TK_FLT:case m.TK_INT:return v.luaO_pushfstring(t.L,l("'%s'",!0),x.luaZ_buffer(t.buff));default:return S(t,e)}},j=function(t,e,r){e=_.luaG_addinfo(t.L,e,t.source,t.linenumber),r&&v.luaO_pushfstring(t.L,l("%s near %s"),e,G(t,r)),f.luaD_throw(t.L,s)},F=function(t,e){j(t,e,t.t.token)},H=function(t){var e=0,r=t.current;for(c(r===o["["]||r===o["]"]),M(t);t.current===o["="];)M(t),e++;return t.current===r?e:-e-1},X=function(t,e,r){var a=t.linenumber;M(t),w(t)&&P(t);for(var n=!1;!n;)switch(t.current){case x.EOZ:j(t,l("unfinished long "+(e?"string":"comment")+" (starting at line "+a+")"),m.TK_EOS);break;case o["]"]:H(t)===r&&(M(t),n=!0);break;case o["\n"]:case o["\r"]:N(t,o["\n"]),P(t),e||x.luaZ_resetbuffer(t.buff);break;default:e?M(t):I(t)}e&&(e.ts=C(t,t.buff.buffer.subarray(2+r,t.buff.n-(2+r))))},z=function(t,e,r){e||(t.current!==x.EOZ&&M(t),j(t,r,m.TK_STRING))},q=function(t){return M(t),z(t,p.lisxdigit(t.current),l("hexadecimal digit expected",!0)),v.luaO_hexavalue(t.current)},Y=function(t){var e=q(t);return e=(e<<4)+q(t),x.luaZ_buffremove(t.buff,2),e},Z=function(t){var e=4;M(t),z(t,t.current===o["{"],l("missing '{'",!0));var r=q(t);for(M(t);p.lisxdigit(t.current);)e++,r=(r<<4)+v.luaO_hexavalue(t.current),z(t,r<=1114111,l("UTF-8 value too large",!0)),M(t);return z(t,t.current===o["}"],l("missing '}'",!0)),I(t),x.luaZ_buffremove(t.buff,e),r},J=function(t){for(var e=new Uint8Array(v.UTF8BUFFSZ),r=v.luaO_utf8esc(e,Z(t));r>0;r--)N(t,e[v.UTF8BUFFSZ-r])},W=function(t){var e=0,r=void 0;for(r=0;r<3&&p.lisdigit(t.current);r++)e=10*e+t.current-o[0],M(t);return z(t,e<=255,l("decimal escape too large",!0)),x.luaZ_buffremove(t.buff,r),e},Q=function(t,e,r){for(M(t);t.current!==e;)switch(t.current){case x.EOZ:j(t,l("unfinished string",!0),m.TK_EOS);break;case o["\n"]:case o["\r"]:j(t,l("unfinished string",!0),m.TK_STRING);break;case o["\\"]:M(t);var a=void 0,n=void 0;switch(t.current){case o.a:n=7,a="read_save";break;case o.b:n=o["\b"],a="read_save";break;case o.f:n=o["\f"],a="read_save";break;case o.n:n=o["\n"],a="read_save";break;case o.r:n=o["\r"],a="read_save";break;case o.t:n=o["\t"],a="read_save";break;case o.v:n=o["\v"],a="read_save";break;case o.x:n=Y(t),a="read_save";break;case o.u:J(t),a="no_save";break;case o["\n"]:case o["\r"]:P(t),n=o["\n"],a="only_save";break;case o["\\"]:case o['"']:case o["'"]:n=t.current,a="read_save";break;case x.EOZ:a="no_save";break;case o.z:for(x.luaZ_buffremove(t.buff,1),I(t);p.lisspace(t.current);)w(t)?P(t):I(t);a="no_save";break;default:z(t,p.lisdigit(t.current),l("invalid escape sequence",!0)),n=W(t),a="only_save"}"read_save"===a&&I(t),"read_save"!==a&&"only_save"!==a||(x.luaZ_buffremove(t.buff,1),N(t,n));break;default:M(t)}M(t),r.ts=C(t,t.buff.buffer.subarray(1,t.buff.n-1))},$=Object.create(null);E.forEach(function(t,e){return $[A(l(t))]=e});var tt=function(t){var e=$[L(t)];return void 0!==e&&e<=22},et=function(t,e){for(x.luaZ_resetbuffer(t.buff);;)switch(c("number"==typeof t.current),t.current){case o["\n"]:case o["\r"]:P(t);break;case o[" "]:case o["\f"]:case o["\t"]:case o["\v"]:I(t);break;case o["-"]:if(I(t),t.current!==o["-"])return o["-"];if(I(t),t.current===o["["]){var r=H(t);if(x.luaZ_resetbuffer(t.buff),r>=0){X(t,null,r),x.luaZ_resetbuffer(t.buff);break}}for(;!w(t)&&t.current!==x.EOZ;)I(t);break;case o["["]:var a=H(t);return a>=0?(X(t,e,a),m.TK_STRING):(-1!==a&&j(t,l("invalid long string delimiter",!0),m.TK_STRING),o["["]);case o["="]:return I(t),K(t,"=")?m.TK_EQ:o["="];case o["<"]:return I(t),K(t,"=")?m.TK_LE:K(t,"<")?m.TK_SHL:o["<"];case o[">"]:return I(t),K(t,"=")?m.TK_GE:K(t,">")?m.TK_SHR:o[">"];case o["/"]:return I(t),K(t,"/")?m.TK_IDIV:o["/"];case o["~"]:return I(t),K(t,"=")?m.TK_NE:o["~"];case o[":"]:return I(t),K(t,":")?m.TK_DBCOLON:o[":"];case o['"']:case o["'"]:return Q(t,t.current,e),m.TK_STRING;case o["."]:return M(t),K(t,".")?K(t,".")?m.TK_DOTS:m.TK_CONCAT:p.lisdigit(t.current)?B(t,e):o["."];case o[0]:case o[1]:case o[2]:case o[3]:case o[4]:case o[5]:case o[6]:case o[7]:case o[8]:case o[9]:return B(t,e);case x.EOZ:return m.TK_EOS;default:if(p.lislalpha(t.current)){do{M(t)}while(p.lislalnum(t.current));var n=C(t,x.luaZ_buffer(t.buff));e.ts=n;var u=$[L(n)];return void 0!==u&&u<=22?u+257:m.TK_NAME}var s=t.current;return I(t),s}},rt=function(t){t.lastline=t.linenumber,t.lookahead.token!==m.TK_EOS?(t.t.token=t.lookahead.token,t.t.seminfo.i=t.lookahead.seminfo.i,t.t.seminfo.r=t.lookahead.seminfo.r,t.t.seminfo.ts=t.lookahead.seminfo.ts,t.lookahead.token=m.TK_EOS):t.t.token=et(t,t.t.seminfo)},at=function(t){return c(t.lookahead.token===m.TK_EOS),t.lookahead.token=et(t,t.lookahead.seminfo),t.lookahead.token};t.exports.FIRST_RESERVED=257,t.exports.LUA_ENV=k,t.exports.LexState=y,t.exports.RESERVED=O,t.exports.isreserved=tt,t.exports.luaX_lookahead=at,t.exports.luaX_newstring=C,t.exports.luaX_next=rt,t.exports.luaX_setinput=D,t.exports.luaX_syntaxerror=F,t.exports.luaX_token2str=S,t.exports.luaX_tokens=E},function(t,e,r){"use strict";var a=function(t){return/^\d$/.test(String.fromCharCode(t))},n=function(t){return/^[0-9a-fA-F]$/.test(String.fromCharCode(t))},u=function(t){return/^[\x20-\x7E]$/.test(String.fromCharCode(t))},o=function(t){return/^\s$/.test(String.fromCharCode(t))},s=function(t){return/^[_a-zA-Z]$/.test(String.fromCharCode(t))},l=function(t){return/^[_a-zA-Z0-9]$/.test(String.fromCharCode(t))};t.exports.lisdigit=a,t.exports.lislalnum=l,t.exports.lislalpha=s,t.exports.lisprint=u,t.exports.lisspace=o,t.exports.lisxdigit=n},function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),u=r(0),o=u.LUA_MULTRET,s=u.char,l=u.to_luastring,i=r(32),c=i.BinOpr,_=c.OPR_ADD,f=c.OPR_AND,p=c.OPR_BAND,v=c.OPR_BOR,d=c.OPR_BXOR,h=c.OPR_CONCAT,A=c.OPR_DIV,L=c.OPR_EQ,g=c.OPR_GE,b=c.OPR_GT,T=c.OPR_IDIV,x=c.OPR_LE,k=c.OPR_LT,O=c.OPR_MOD,m=c.OPR_MUL,E=c.OPR_NE,U=c.OPR_NOBINOPR,R=c.OPR_OR,y=c.OPR_POW,N=c.OPR_SHL,S=c.OPR_SHR,w=c.OPR_SUB,I=i.UnOpr,M=I.OPR_BNOT,C=I.OPR_LEN,P=I.OPR_MINUS,D=I.OPR_NOT,K=I.OPR_NOUNOPR,V=i.NO_JUMP,B=i.getinstruction,G=i.luaK_checkstack,j=i.luaK_codeABC,F=i.luaK_codeABx,H=i.luaK_codeAsBx,X=i.luaK_codek,z=i.luaK_concat,q=i.luaK_dischargevars,Y=i.luaK_exp2RK,Z=i.luaK_exp2anyreg,J=i.luaK_exp2anyregup,W=i.luaK_exp2nextreg,Q=i.luaK_exp2val,$=i.luaK_fixline,tt=i.luaK_getlabel,et=i.luaK_goiffalse,rt=i.luaK_goiftrue,at=i.luaK_indexed,nt=i.luaK_infix,ut=i.luaK_intK,ot=i.luaK_jump,st=i.luaK_jumpto,lt=i.luaK_nil,it=i.luaK_patchclose,ct=i.luaK_patchlist,_t=i.luaK_patchtohere,ft=i.luaK_posfix,pt=i.luaK_prefix,vt=i.luaK_reserveregs,dt=i.luaK_ret,ht=i.luaK_self,At=i.luaK_setlist,Lt=i.luaK_setmultret,gt=i.luaK_setoneret,bt=i.luaK_setreturns,Tt=i.luaK_storevar,xt=i.luaK_stringK,kt=r(7),Ot=r(11),mt=r(20),Et=r(1),Ut=Et.LUAI_MAXCCALLS,Rt=Et.MAX_INT,yt=Et.lua_assert,Nt=r(4),St=r(15),wt=St.OpCodesI,It=wt.OP_CALL,Mt=wt.OP_CLOSURE,Ct=wt.OP_FORLOOP,Pt=wt.OP_FORPREP,Dt=wt.OP_GETUPVAL,Kt=wt.OP_MOVE,Vt=wt.OP_NEWTABLE,Bt=wt.OP_SETTABLE,Gt=wt.OP_TAILCALL,jt=wt.OP_TFORCALL,Ft=wt.OP_TFORLOOP,Ht=wt.OP_VARARG,Xt=St.LFIELDS_PER_FLUSH,zt=St.SETARG_B,qt=St.SETARG_C,Yt=St.SET_OPCODE,Zt=r(9),Jt=Zt.luaS_eqlngstr,Wt=Zt.luaS_new,Qt=Zt.luaS_newliteral,$t=r(8),te=Ot.Proto,ee=mt.RESERVED,re=function(t){return t===ue.VCALL||t===ue.VVARARG},ae=function(t,e){return Jt(t,e)},ne=function t(){a(this,t),this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN},ue={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14},oe=function(t){return ue.VLOCAL<=t&&t<=ue.VINDEXED},se=function(t){return t===ue.VNONRELOC||t===ue.VLOCAL},le=function(){function t(){a(this,t),this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}return n(t,[{key:"to",value:function(t){this.k=t.k,this.u=t.u,this.t=t.t,this.f=t.f}}]),t}(),ie=function t(){a(this,t),this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN},ce=function t(){a(this,t),this.idx=NaN},_e=function t(){a(this,t),this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN},fe=function t(){a(this,t),this.arr=[],this.n=NaN,this.size=NaN},pe=function t(){a(this,t),this.actvar={arr:[],n:NaN,size:NaN},this.gt=new fe,this.label=new fe},ve=function(t,e){t.t.token=0,mt.luaX_syntaxerror(t,e)},de=function(t,e){mt.luaX_syntaxerror(t,Nt.luaO_pushfstring(t.L,l("%s expected",!0),mt.luaX_token2str(t,e)))},he=function(t,e,r){var a=t.ls.L,n=t.f.linedefined,u=0===n?l("main function",!0):Nt.luaO_pushfstring(a,l("function at line %d",!0),n),o=Nt.luaO_pushfstring(a,l("too many %s (limit is %d) in %s",!0),r,e,u);mt.luaX_syntaxerror(t.ls,o)},Ae=function(t,e,r,a){e>r&&he(t,r,a)},Le=function(t,e){return t.t.token===e&&(mt.luaX_next(t),!0)},ge=function(t,e){t.t.token!==e&&de(t,e)},be=function(t,e){ge(t,e),mt.luaX_next(t)},Te=function(t,e,r){e||mt.luaX_syntaxerror(t,r)},xe=function(t,e,r,a){Le(t,e)||(a===t.linenumber?de(t,e):mt.luaX_syntaxerror(t,Nt.luaO_pushfstring(t.L,l("%s expected (to close %s at line %d)"),mt.luaX_token2str(t,e),mt.luaX_token2str(t,r),a)))},ke=function(t){ge(t,ee.TK_NAME);var e=t.t.seminfo.ts;return mt.luaX_next(t),e},Oe=function(t,e,r){t.f=t.t=V,t.k=e,t.u.info=r},me=function(t,e,r){Oe(e,ue.VK,xt(t.fs,r))},Ee=function(t,e){me(t,e,ke(t))},Ue=function(t,e){var r=t.fs,a=r.f;return a.locvars[r.nlocvars]=new Nt.LocVar,a.locvars[r.nlocvars].varname=e,r.nlocvars++},Re=function(t,e){var r=t.fs,a=t.dyd,n=Ue(t,e);Ae(r,a.actvar.n+1-r.firstlocal,200,l("local variables",!0)),a.actvar.arr[a.actvar.n]=new ce,a.actvar.arr[a.actvar.n].idx=n,a.actvar.n++},ye=function(t,e){Re(t,mt.luaX_newstring(t,l(e,!0)))},Ne=function(t,e){var r=t.ls.dyd.actvar.arr[t.firstlocal+e].idx;return yt(r<t.nlocvars),t.f.locvars[r]},Se=function(t,e){var r=t.fs;for(r.nactvar=r.nactvar+e;e;e--)Ne(r,r.nactvar-e).startpc=r.pc},we=function(t,e){for(t.ls.dyd.actvar.n-=t.nactvar-e;t.nactvar>e;)Ne(t,--t.nactvar).endpc=t.pc},Ie=function(t,e){for(var r=t.f.upvalues,a=0;a<t.nups;a++)if(ae(r[a].name,e))return a;return-1},Me=function(t,e,r){var a=t.f;return Ae(t,t.nups+1,Ot.MAXUPVAL,l("upvalues",!0)),a.upvalues[t.nups]={instack:r.k===ue.VLOCAL,idx:r.u.info,name:e},t.nups++},Ce=function(t,e){for(var r=t.nactvar-1;r>=0;r--)if(ae(e,Ne(t,r).varname))return r;return-1},Pe=function(t,e){for(var r=t.bl;r.nactvar>e;)r=r.previous;r.upval=1},De=function t(e,r,a,n){if(null===e)Oe(a,ue.VVOID,0);else{var u=Ce(e,r);if(u>=0)Oe(a,ue.VLOCAL,u),n||Pe(e,u);else{var o=Ie(e,r);if(o<0){if(t(e.prev,r,a,0),a.k===ue.VVOID)return;o=Me(e,r,a)}Oe(a,ue.VUPVAL,o)}}},Ke=function(t,e){var r=ke(t),a=t.fs;if(De(a,r,e,1),e.k===ue.VVOID){var n=new le;De(a,t.envn,e,1),yt(e.k!==ue.VVOID),me(t,n,r),at(a,e,n)}},Ve=function(t,e,r,a){var n=t.fs,u=e-r;if(re(a.k))u++,u<0&&(u=0),bt(n,a,u),u>1&&vt(n,u-1);else if(a.k!==ue.VVOID&&W(n,a),u>0){var o=n.freereg;vt(n,u),lt(n,o,u)}r>e&&(t.fs.freereg-=r-e)},Be=function(t){var e=t.L;++e.nCcalls,Ae(t.fs,e.nCcalls,Ut,l("JS levels",!0))},Ge=function(t){return t.L.nCcalls--},je=function(t,e,r){var a=t.fs,n=t.dyd.gt,u=n.arr[e];if(yt(ae(u.name,r.name)),u.nactvar<r.nactvar){var o=Ne(a,u.nactvar).varname,s=Nt.luaO_pushfstring(t.L,l("<goto %s> at line %d jumps into the scope of local '%s'"),u.name.getstr(),u.line,o.getstr());ve(t,s)}ct(a,u.pc,r.pc);for(var i=e;i<n.n-1;i++)n.arr[i]=n.arr[i+1];n.n--},Fe=function(t,e){for(var r=t.fs.bl,a=t.dyd,n=a.gt.arr[e],u=r.firstlabel;u<a.label.n;u++){var o=a.label.arr[u];if(ae(o.name,n.name))return n.nactvar>o.nactvar&&(r.upval||a.label.n>r.firstlabel)&&it(t.fs,n.pc,o.nactvar),je(t,e,o),!0}return!1},He=function(t,e,r,a,n){var u=e.n;return e.arr[u]=new _e,e.arr[u].name=r,e.arr[u].line=a,e.arr[u].nactvar=t.fs.nactvar,e.arr[u].pc=n,e.n=u+1,u},Xe=function(t,e){for(var r=t.dyd.gt,a=t.fs.bl.firstgoto;a<r.n;)ae(r.arr[a].name,e.name)?je(t,a,e):a++},ze=function(t,e){for(var r=e.firstgoto,a=t.ls.dyd.gt;r<a.n;){var n=a.arr[r];n.nactvar>e.nactvar&&(e.upval&&it(t,n.pc,e.nactvar),n.nactvar=e.nactvar),Fe(t.ls,r)||r++}},qe=function(t,e,r){e.isloop=r,e.nactvar=t.nactvar,e.firstlabel=t.ls.dyd.label.n,e.firstgoto=t.ls.dyd.gt.n,e.upval=0,e.previous=t.bl,t.bl=e,yt(t.freereg===t.nactvar)},Ye=function(t){var e=Qt(t.L,"break"),r=He(t,t.dyd.label,e,0,t.fs.pc);Xe(t,t.dyd.label.arr[r])},Ze=function(t,e){var r=mt.isreserved(e.name)?"<%s> at line %d not inside a loop":"no visible label '%s' for <goto> at line %d";r=Nt.luaO_pushfstring(t.L,l(r),e.name.getstr(),e.line),ve(t,r)},Je=function(t){var e=t.L,r=new te(e),a=t.fs;return a.f.p[a.np++]=r,r},We=function(t,e){var r=t.fs.prev;Oe(e,ue.VRELOCABLE,F(r,Mt,0,r.np-1)),W(r,e)},Qe=function(t,e,r){e.prev=t.fs,e.ls=t,t.fs=e,e.pc=0,e.lasttarget=0,e.jpc=V,e.freereg=0,e.nk=0,e.np=0,e.nups=0,e.nlocvars=0,e.nactvar=0,e.firstlocal=t.dyd.actvar.n,e.bl=null;var a=new te(t.L);a=e.f,a.source=t.source,a.maxstacksize=2,qe(e,r,!1)},$e=function(t){var e=t.bl,r=t.ls;if(e.previous&&e.upval){var a=ot(t);it(t,a,e.nactvar),_t(t,a)}e.isloop&&Ye(r),t.bl=e.previous,we(t,e.nactvar),yt(e.nactvar===t.nactvar),t.freereg=t.nactvar,r.dyd.label.n=e.firstlabel,e.previous?ze(t,e):e.firstgoto<r.dyd.gt.n&&Ze(r,r.dyd.gt.arr[e.firstgoto])},tr=function(t){var e=t.fs;dt(e,0,0),$e(e),yt(null===e.bl),t.fs=e.prev},er=function(t,e){switch(t.t.token){case ee.TK_ELSE:case ee.TK_ELSEIF:case ee.TK_END:case ee.TK_EOS:return!0;case ee.TK_UNTIL:return e;default:return!1}},rr=function(t){for(;!er(t,1);){if(t.t.token===ee.TK_RETURN)return void Yr(t);Yr(t)}},ar=function(t,e){var r=t.fs,a=new le;J(r,e),mt.luaX_next(t),Ee(t,a),at(r,e,a)},nr=function(t,e){mt.luaX_next(t),kr(t,e),Q(t.fs,e),be(t,s["]"])},ur=function t(){a(this,t),this.v=new le,this.t=new le,this.nh=NaN,this.na=NaN,this.tostore=NaN},or=function(t,e){var r=t.fs,a=t.fs.freereg,n=new le,u=new le;t.t.token===ee.TK_NAME?(Ae(r,e.nh,Rt,l("items in a constructor",!0)),Ee(t,n)):nr(t,n),e.nh++,be(t,s["="]);var o=Y(r,n);kr(t,u),j(r,Bt,e.t.u.info,o,Y(r,u)),r.freereg=a},sr=function(t,e){e.v.k!==ue.VVOID&&(W(t,e.v),e.v.k=ue.VVOID,e.tostore===Xt&&(At(t,e.t.u.info,e.na,e.tostore),e.tostore=0))},lr=function(t,e){0!==e.tostore&&(re(e.v.k)?(Lt(t,e.v),At(t,e.t.u.info,e.na,o),e.na--):(e.v.k!==ue.VVOID&&W(t,e.v),At(t,e.t.u.info,e.na,e.tostore)))},ir=function(t,e){kr(t,e.v),Ae(t.fs,e.na,Rt,l("items in a constructor",!0)),e.na++,e.tostore++},cr=function(t,e){switch(t.t.token){case ee.TK_NAME:mt.luaX_lookahead(t)!==s["="]?ir(t,e):or(t,e);break;case s["["]:or(t,e);break;default:ir(t,e)}},_r=function(t,e){var r=t.fs,a=t.linenumber,n=j(r,Vt,0,0,0),u=new ur;u.na=u.nh=u.tostore=0,u.t=e,Oe(e,ue.VRELOCABLE,n),Oe(u.v,ue.VVOID,0),W(t.fs,e),be(t,s["{"]);do{if(yt(u.v.k===ue.VVOID||u.tostore>0),t.t.token===s["}"])break;sr(r,u),cr(t,u)}while(Le(t,s[","])||Le(t,s[";"]));xe(t,s["}"],s["{"],a),lr(r,u),zt(r.f.code[n],Nt.luaO_int2fb(u.na)),qt(r.f.code[n],Nt.luaO_int2fb(u.nh))},fr=function(t){var e=t.fs,r=e.f,a=0;if(r.is_vararg=!1,t.t.token!==s[")"])do{switch(t.t.token){case ee.TK_NAME:Re(t,ke(t)),a++;break;case ee.TK_DOTS:mt.luaX_next(t),r.is_vararg=!0;break;default:mt.luaX_syntaxerror(t,l("<name> or '...' expected",!0))}}while(!r.is_vararg&&Le(t,s[","]));Se(t,a),r.numparams=e.nactvar,vt(e,e.nactvar)},pr=function(t,e,r,a){var n=new ie,u=new ne;n.f=Je(t),n.f.linedefined=a,Qe(t,n,u),be(t,s["("]),r&&(ye(t,"self"),Se(t,1)),fr(t),be(t,s[")"]),rr(t),n.f.lastlinedefined=t.linenumber,xe(t,ee.TK_END,ee.TK_FUNCTION,a),We(t,e),tr(t)},vr=function(t,e){var r=1;for(kr(t,e);Le(t,s[","]);)W(t.fs,e),kr(t,e),r++;return r},dr=function(t,e,r){var a=t.fs,n=new le;switch(t.t.token){case s["("]:mt.luaX_next(t),t.t.token===s[")"]?n.k=ue.VVOID:(vr(t,n),Lt(a,n)),xe(t,s[")"],s["("],r);break;case s["{"]:_r(t,n);break;case ee.TK_STRING:me(t,n,t.t.seminfo.ts),mt.luaX_next(t);break;default:mt.luaX_syntaxerror(t,l("function arguments expected",!0))}yt(e.k===ue.VNONRELOC);var u=void 0,i=e.u.info;re(n.k)?u=o:(n.k!==ue.VVOID&&W(a,n),u=a.freereg-(i+1)),Oe(e,ue.VCALL,j(a,It,i,u+1,2)),$(a,r),a.freereg=i+1},hr=function(t,e){switch(t.t.token){case s["("]:var r=t.linenumber;return mt.luaX_next(t),kr(t,e),xe(t,s[")"],s["("],r),void q(t.fs,e);case ee.TK_NAME:return void Ke(t,e);default:mt.luaX_syntaxerror(t,l("unexpected symbol",!0))}},Ar=function(t,e){var r=t.fs,a=t.linenumber;for(hr(t,e);;)switch(t.t.token){case s["."]:ar(t,e);break;case s["["]:var n=new le;J(r,e),nr(t,n),at(r,e,n);break;case s[":"]:var u=new le;mt.luaX_next(t),Ee(t,u),ht(r,e,u),dr(t,e,a);break;case s["("]:case ee.TK_STRING:case s["{"]:W(r,e),dr(t,e,a);break;default:return}},Lr=function(t,e){switch(t.t.token){case ee.TK_FLT:Oe(e,ue.VKFLT,0),e.u.nval=t.t.seminfo.r;break;case ee.TK_INT:Oe(e,ue.VKINT,0),e.u.ival=t.t.seminfo.i;break;case ee.TK_STRING:me(t,e,t.t.seminfo.ts);break;case ee.TK_NIL:Oe(e,ue.VNIL,0);break;case ee.TK_TRUE:Oe(e,ue.VTRUE,0);break;case ee.TK_FALSE:Oe(e,ue.VFALSE,0);break;case ee.TK_DOTS:var r=t.fs;Te(t,r.f.is_vararg,l("cannot use '...' outside a vararg function",!0)),Oe(e,ue.VVARARG,j(r,Ht,0,1,0));break;case s["{"]:return void _r(t,e);case ee.TK_FUNCTION:return mt.luaX_next(t),void pr(t,e,0,t.linenumber);default:return void Ar(t,e)}mt.luaX_next(t)},gr=function(t){switch(t){case ee.TK_NOT:return D;case s["-"]:return P;case s["~"]:return M;case s["#"]:return C;default:return K}},br=function(t){switch(t){case s["+"]:return _;case s["-"]:return w;case s["*"]:return m;case s["%"]:return O;case s["^"]:return y;case s["/"]:return A;case ee.TK_IDIV:return T;case s["&"]:return p;case s["|"]:return v;case s["~"]:return d;case ee.TK_SHL:return N;case ee.TK_SHR:return S;case ee.TK_CONCAT:return h;case ee.TK_NE:return E;case ee.TK_EQ:return L;case s["<"]:return k;case ee.TK_LE:return x;case s[">"]:return b;case ee.TK_GE:return g;case ee.TK_AND:return f;case ee.TK_OR:return R;default:return U}},Tr=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],xr=function t(e,r,a){Be(e);var n=gr(e.t.token);if(n!==K){var u=e.linenumber;mt.luaX_next(e),t(e,r,12),pt(e.fs,n,r,u)}else Lr(e,r);for(var o=br(e.t.token);o!==U&&Tr[o].left>a;){var s=new le,l=e.linenumber;mt.luaX_next(e),nt(e.fs,o,r);var i=t(e,s,Tr[o].right);ft(e.fs,o,r,s,l),o=i}return Ge(e),o},kr=function(t,e){xr(t,e,0)},Or=function(t){var e=t.fs,r=new ne;qe(e,r,0),rr(t),$e(e)},mr=function t(){a(this,t),this.prev=null,this.v=new le},Er=function(t,e,r){for(var a=t.fs,n=a.freereg,u=!1;e;e=e.prev)e.v.k===ue.VINDEXED&&(e.v.u.ind.vt===r.k&&e.v.u.ind.t===r.u.info&&(u=!0,e.v.u.ind.vt=ue.VLOCAL,e.v.u.ind.t=n),r.k===ue.VLOCAL&&e.v.u.ind.idx===r.u.info&&(u=!0,e.v.u.ind.idx=n));if(u){var o=r.k===ue.VLOCAL?Kt:Dt;j(a,o,n,r.u.info,0),vt(a,1)}},Ur=function t(e,r,a){var n=new le;if(Te(e,oe(r.v.k),l("syntax error",!0)),Le(e,s[","])){var u=new mr;u.prev=r,Ar(e,u.v),u.v.k!==ue.VINDEXED&&Er(e,r,u.v),Ae(e.fs,a+e.L.nCcalls,Ut,l("JS levels",!0)),t(e,u,a+1)}else{be(e,s["="]);var o=vr(e,n);if(o===a)return gt(e.fs,n),void Tt(e.fs,r.v,n);Ve(e,a,o,n)}Oe(n,ue.VNONRELOC,e.fs.freereg-1),Tt(e.fs,r.v,n)},Rr=function(t){var e=new le;return kr(t,e),e.k===ue.VNIL&&(e.k=ue.VFALSE),rt(t.fs,e),e.f},yr=function(t,e){var r=t.linenumber,a=void 0;Le(t,ee.TK_GOTO)?a=ke(t):(mt.luaX_next(t),a=Qt(t.L,"break"));var n=He(t,t.dyd.gt,a,r,e);Fe(t,n)},Nr=function(t,e,r){for(var a=t.bl.firstlabel;a<e.n;a++)if(ae(r,e.arr[a].name)){var n=Nt.luaO_pushfstring(t.ls.L,l("label '%s' already defined on line %d",!0),r.getstr(),e.arr[a].line);ve(t.ls,n)}},Sr=function(t){for(;t.t.token===s[";"]||t.t.token===ee.TK_DBCOLON;)Yr(t)},wr=function(t,e,r){var a=t.fs,n=t.dyd.label,u=void 0;Nr(a,n,e),be(t,ee.TK_DBCOLON),u=He(t,n,e,r,tt(a)),Sr(t),er(t,0)&&(n.arr[u].nactvar=a.bl.nactvar),Xe(t,n.arr[u])},Ir=function(t,e){var r=t.fs,a=new ne;mt.luaX_next(t);var n=tt(r),u=Rr(t);qe(r,a,1),be(t,ee.TK_DO),Or(t),st(r,n),xe(t,ee.TK_END,ee.TK_WHILE,e),$e(r),_t(r,u)},Mr=function(t,e){var r=t.fs,a=tt(r),n=new ne,u=new ne;qe(r,n,1),qe(r,u,0),mt.luaX_next(t),rr(t),xe(t,ee.TK_UNTIL,ee.TK_REPEAT,e);var o=Rr(t);u.upval&&it(r,o,u.nactvar),$e(r),ct(r,o,a),$e(r)},Cr=function(t){var e=new le;return kr(t,e),W(t.fs,e),yt(e.k===ue.VNONRELOC),e.u.info},Pr=function(t,e,r,a,n){var u=new ne,o=t.fs,s=void 0;Se(t,3),be(t,ee.TK_DO);var l=n?H(o,Pt,e,V):ot(o);qe(o,u,0),Se(t,a),vt(o,a),Or(t),$e(o),_t(o,l),n?s=H(o,Ct,e,V):(j(o,jt,e,0,a),$(o,r),s=H(o,Ft,e+2,V)),ct(o,s,l+1),$(o,r)},Dr=function(t,e,r){var a=t.fs,n=a.freereg;ye(t,"(for index)"),ye(t,"(for limit)"),ye(t,"(for step)"),Re(t,e),be(t,s["="]),Cr(t),be(t,s[","]),Cr(t),Le(t,s[","])?Cr(t):(X(a,a.freereg,ut(a,1)),vt(a,1)),Pr(t,n,r,1,1)},Kr=function(t,e){var r=t.fs,a=new le,n=4,u=r.freereg;for(ye(t,"(for generator)"),ye(t,"(for state)"),ye(t,"(for control)"),Re(t,e);Le(t,s[","]);)Re(t,ke(t)),n++;be(t,ee.TK_IN);var o=t.linenumber;Ve(t,3,vr(t,a),a),G(r,3),Pr(t,u,o,n-3,0)},Vr=function(t,e){var r=t.fs,a=new ne;qe(r,a,1),mt.luaX_next(t);var n=ke(t);switch(t.t.token){case s["="]:Dr(t,n,e);break;case s[","]:case ee.TK_IN:Kr(t,n);break;default:mt.luaX_syntaxerror(t,l("'=' or 'in' expected",!0))}xe(t,ee.TK_END,ee.TK_FOR,e),$e(r)},Br=function(t,e){var r=new ne,a=t.fs,n=new le,u=void 0;if(mt.luaX_next(t),kr(t,n),be(t,ee.TK_THEN),t.t.token===ee.TK_GOTO||t.t.token===ee.TK_BREAK){for(et(t.fs,n),qe(a,r,!1),yr(t,n.t);Le(t,s[";"]););if(er(t,0))return $e(a),e;u=ot(a)}else rt(t.fs,n),qe(a,r,!1),u=n.f;return rr(t),$e(a),t.t.token!==ee.TK_ELSE&&t.t.token!==ee.TK_ELSEIF||(e=z(a,e,ot(a))),_t(a,u),e},Gr=function(t,e){var r=t.fs,a=V;for(a=Br(t,a);t.t.token===ee.TK_ELSEIF;)a=Br(t,a);Le(t,ee.TK_ELSE)&&Or(t),xe(t,ee.TK_END,ee.TK_IF,e),_t(r,a)},jr=function(t){var e=new le,r=t.fs;Re(t,ke(t)),Se(t,1),pr(t,e,0,t.linenumber),Ne(r,e.u.info).startpc=r.pc},Fr=function(t){var e=0,r=void 0,a=new le;do{Re(t,ke(t)),e++}while(Le(t,s[","]));Le(t,s["="])?r=vr(t,a):(a.k=ue.VVOID,r=0),Ve(t,e,r,a),Se(t,e)},Hr=function(t,e){var r=0;for(Ke(t,e);t.t.token===s["."];)ar(t,e);return t.t.token===s[":"]&&(r=1,ar(t,e)),r},Xr=function(t,e){var r=new le,a=new le;mt.luaX_next(t);var n=Hr(t,r);pr(t,a,n,e),Tt(t.fs,r,a),$(t.fs,e)},zr=function(t){var e=t.fs,r=new mr;Ar(t,r.v),t.t.token===s["="]||t.t.token===s[","]?(r.prev=null,Ur(t,r,1)):(Te(t,r.v.k===ue.VCALL,l("syntax error",!0)),qt(B(e,r.v),1))},qr=function(t){var e=t.fs,r=new le,a=void 0,n=void 0;er(t,1)||t.t.token===s[";"]?a=n=0:(n=vr(t,r),re(r.k)?(Lt(e,r),r.k===ue.VCALL&&1===n&&(Yt(B(e,r),Gt),yt(B(e,r).A===e.nactvar)),a=e.nactvar,n=o):1===n?a=Z(e,r):(W(e,r),a=e.nactvar,yt(n===e.freereg-a))),dt(e,a,n),Le(t,s[";"])},Yr=function(t){var e=t.linenumber;switch(Be(t),t.t.token){case s[";"]:mt.luaX_next(t);break;case ee.TK_IF:Gr(t,e);break;case ee.TK_WHILE:Ir(t,e);break;case ee.TK_DO:mt.luaX_next(t),Or(t),xe(t,ee.TK_END,ee.TK_DO,e);break;case ee.TK_FOR:Vr(t,e);break;case ee.TK_REPEAT:Mr(t,e);break;case ee.TK_FUNCTION:Xr(t,e);break;case ee.TK_LOCAL:mt.luaX_next(t),Le(t,ee.TK_FUNCTION)?jr(t):Fr(t);break;case ee.TK_DBCOLON:mt.luaX_next(t),wr(t,ke(t),e);break;case ee.TK_RETURN:mt.luaX_next(t),qr(t);break;case ee.TK_BREAK:case ee.TK_GOTO:yr(t,ot(t.fs));break;default:zr(t)}yt(t.fs.f.maxstacksize>=t.fs.freereg&&t.fs.freereg>=t.fs.nactvar),t.fs.freereg=t.fs.nactvar,Ge(t)},Zr=function(t,e){var r=new ne,a=new le;Qe(t,e,r),e.f.is_vararg=!0,Oe(a,ue.VLOCAL,0),Me(e,t.envn,a),mt.luaX_next(t),rr(t),ge(t,ee.TK_EOS),tr(t)},Jr=function(t,e,r,a,n,u){var o=new mt.LexState,s=new ie,l=Ot.luaF_newLclosure(t,1);return kt.luaD_inctop(t),t.stack[t.top-1].setclLvalue(l),o.h=$t.luaH_new(t),kt.luaD_inctop(t),t.stack[t.top-1].sethvalue(o.h),s.f=l.p=new te(t),s.f.source=Wt(t,n),o.buff=r,o.dyd=a,a.actvar.n=a.gt.n=a.label.n=0,mt.luaX_setinput(t,o,e,s.f.source,u),Zr(o,s),yt(!s.prev&&1===s.nups&&!o.fs),yt(0===a.actvar.n&&0===a.gt.n&&0===a.label.n),delete t.stack[--t.top],l};t.exports.Dyndata=pe,t.exports.expkind=ue,t.exports.expdesc=le,t.exports.luaY_parser=Jr,t.exports.vkisinreg=se},function(t,e,r){"use strict";var a=r(2),n=a.LUA_OK,u=a.LUA_TFUNCTION,o=a.LUA_TSTRING,s=a.LUA_YIELD,l=a.lua_Debug,i=a.lua_checkstack,c=a.lua_concat,_=a.lua_error,f=a.lua_getstack,p=a.lua_gettop,v=a.lua_insert,d=a.lua_isyieldable,h=a.lua_newthread,A=a.lua_pop,L=a.lua_pushboolean,g=a.lua_pushcclosure,b=a.lua_pushliteral,T=a.lua_pushthread,x=a.lua_pushvalue,k=a.lua_resume,O=a.lua_status,m=a.lua_tothread,E=a.lua_type,U=a.lua_upvalueindex,R=a.lua_xmove,y=a.lua_yield,N=r(5),S=N.luaL_argcheck,w=N.luaL_checktype,I=N.luaL_newlib,M=N.luaL_where,C=r(3),P=C.to_luastring,D=function(t){var e=m(t,1);return S(t,e,1,P("thread expected",!0)),e},K=function(t,e,r){if(!i(e,r))return b(t,"too many arguments to resume"),-1;if(O(e)===n&&0===p(e))return b(t,"cannot resume dead coroutine"),-1;R(t,e,r);var a=k(e,t,r);if(a===n||a===s){var u=p(e);return i(t,u+1)?(R(e,t,u),u):(A(e,u),b(t,"too many results to resume"),-1)}return R(e,t,1),-1},V=function(t){var e=D(t),r=K(t,e,p(t)-1);return r<0?(L(t,0),v(t,-2),2):(L(t,1),v(t,-(r+1)),r+1)},B=function(t){var e=m(t,U(1)),r=K(t,e,p(t));return r<0?(E(t,-1)===o&&(M(t,1),v(t,-2),c(t,2)),_(t)):r},G=function(t){w(t,1,u);var e=h(t);return x(t,1),R(t,e,1),1},j=function(t){return G(t),g(t,B,1),1},F=function(t){return y(t,p(t))},H=function(t){var e=D(t);if(t===e)b(t,"running");else switch(O(e)){case s:b(t,"suspended");break;case n:var r=new l;f(e,0,r)>0?b(t,"normal"):0===p(e)?b(t,"dead"):b(t,"suspended");break;default:b(t,"dead")}return 1},X=function(t){return L(t,d(t)),1},z=function(t){return L(t,T(t)),2},q={create:G,isyieldable:X,resume:V,running:z,status:H,wrap:j,yield:F},Y=function(t){return I(t,q),1};t.exports.luaopen_coroutine=Y},function(t,e,r){"use strict";var a=r(6),n=a.LUA_MAXINTEGER,u=r(2),o=u.LUA_OPEQ,s=u.LUA_OPLT,l=u.LUA_TFUNCTION,i=u.LUA_TNIL,c=u.LUA_TTABLE,_=u.lua_call,f=u.lua_checkstack,p=u.lua_compare,v=u.lua_createtable,d=u.lua_geti,h=u.lua_getmetatable,A=u.lua_gettop,L=u.lua_insert,g=u.lua_isnil,b=u.lua_isnoneornil,T=u.lua_isstring,x=u.lua_pop,k=u.lua_pushinteger,O=u.lua_pushnil,m=u.lua_pushstring,E=u.lua_pushvalue,U=u.lua_rawget,R=u.lua_setfield,y=u.lua_seti,N=u.lua_settop,S=u.lua_toboolean,w=u.lua_type,I=r(5),M=I.luaL_Buffer,C=I.luaL_addlstring,P=I.luaL_addvalue,D=I.luaL_argcheck,K=I.luaL_buffinit,V=I.luaL_checkinteger,B=I.luaL_checktype,G=I.luaL_error,j=I.luaL_len,F=I.luaL_newlib,H=I.luaL_opt,X=I.luaL_optinteger,z=I.luaL_optlstring,q=I.luaL_pushresult,Y=I.luaL_typename,Z=r(16),J=r(3),W=J.to_luastring,Q=function(t,e,r){return m(t,e),U(t,-r)!==i},$=function(t,e,r){if(w(t,e)!==c){var a=1;!h(t,e)||1&r&&!Q(t,W("__index",!0),++a)||2&r&&!Q(t,W("__newindex",!0),++a)||4&r&&!Q(t,W("__len",!0),++a)?B(t,e,c):x(t,a)}},tt=function(t,e,r){return $(t,e,4|r),j(t,e)},et=function(t,e,r){d(t,1,r),T(t,-1)||G(t,W("invalid value (%s) at index %d in table for 'concat'"),Y(t,-1),r),P(e)},rt=function(t){var e=tt(t,1,3)+1,r=void 0;switch(A(t)){case 2:r=e;break;case 3:r=V(t,2),D(t,1<=r&&r<=e,2,W("position out of bounds",!0));for(var a=e;a>r;a--)d(t,1,a-1),y(t,1,a);break;default:return G(t,W("wrong number of arguments to 'insert'",!0))}return y(t,1,r),0},at=function(t){var e=tt(t,1,3),r=X(t,2,e);for(r!==e&&D(t,1<=r&&r<=e+1,1,W("position out of bounds",!0)),d(t,1,r);r<e;r++)d(t,1,r+1),y(t,1,r);return O(t),y(t,1,r),1},nt=function(t){var e=V(t,2),r=V(t,3),a=V(t,4),u=b(t,5)?1:5;if($(t,1,1),$(t,u,2),r>=e){D(t,e>0||r<n+e,3,W("too many elements to move",!0));var s=r-e+1;if(D(t,a<=n-s+1,4,W("destination wrap around",!0)),a>r||a<=e||1!==u&&1!==p(t,1,u,o))for(var l=0;l<s;l++)d(t,1,e+l),y(t,u,a+l);else for(var i=s-1;i>=0;i--)d(t,1,e+i),y(t,u,a+i)}return E(t,u),1},ut=function(t){var e=tt(t,1,1),r=z(t,2,W("")),a=r.length,n=X(t,3,1);e=X(t,4,e);var u=new M;for(K(t,u);n<e;n++)et(t,u,n),C(u,r,a);return n===e&&et(t,u,n),q(u),1},ot=function(t){var e=A(t);v(t,e,1),L(t,1);for(var r=e;r>=1;r--)y(t,1,r);return k(t,e),R(t,1,W("n")),1},st=function(t){var e=X(t,2,1),r=H(t,V,3,j(t,1));if(e>r)return 0;var a=r-e;if(a>=Number.MAX_SAFE_INTEGER||!f(t,++a))return G(t,W("too many results to unpack",!0));for(;e<r;e++)d(t,1,e);return d(t,1,r),a},lt=function(){return Math.floor(1*Math.random()<<32)},it=function(t,e,r){y(t,1,e),y(t,1,r)},ct=function(t,e,r){if(g(t,2))return p(t,e,r,s);E(t,2),E(t,e-1),E(t,r-2),_(t,2,1);var a=S(t,-1);return x(t,1),a},_t=function(t,e,r){for(var a=e,n=r-1;;){for(;d(t,1,++a),ct(t,-1,-2);)a==r-1&&G(t,W("invalid order function for sorting")),x(t,1);for(;d(t,1,--n),ct(t,-3,-1);)n<a&&G(t,W("invalid order function for sorting")),x(t,1);if(n<a)return x(t,1),it(t,r-1,a),a;it(t,a,n)}},ft=function(t,e,r){var a=Math.floor((e-t)/4),n=r%(2*a)+(t+a);return Z.lua_assert(t+a<=n&&n<=e-a),n},pt=function t(e,r,a,n){for(;r<a;){if(d(e,1,r),d(e,1,a),ct(e,-1,-2)?it(e,r,a):x(e,2),a-r==1)return;var u=void 0;if(u=a-r<100||0===n?Math.floor((r+a)/2):ft(r,a,n),d(e,1,u),d(e,1,r),ct(e,-2,-1)?it(e,u,r):(x(e,1),d(e,1,a),ct(e,-1,-2)?it(e,u,a):x(e,2)),a-r==2)return;d(e,1,u),E(e,-1),d(e,1,a-1),it(e,u,a-1),u=_t(e,r,a);var o=void 0;u-r<a-u?(t(e,r,u-1,n),o=u-r,r=u+1):(t(e,u+1,a,n),o=a-u,a=u-1),(a-r)/128>o&&(n=lt())}},vt=function(t){var e=tt(t,1,3);return e>1&&(D(t,e<n,1,W("array too big",!0)),b(t,2)||B(t,2,l),N(t,2),pt(t,1,e,0)),0},dt={concat:ut,insert:rt,move:nt,pack:ot,remove:at,sort:vt,unpack:st},ht=function(t){return F(t,dt),1};t.exports.luaopen_table=ht},function(t,e,r){"use strict";var a=r(2),n=a.LUA_TNIL,u=a.LUA_TTABLE,o=(a.lua_close,a.lua_createtable),s=a.lua_getfield,l=(a.lua_isboolean,a.lua_isnoneornil),i=a.lua_pop,c=(a.lua_pushboolean,a.lua_pushfstring),_=a.lua_pushinteger,f=(a.lua_pushliteral,a.lua_pushnil,a.lua_pushnumber),p=(a.lua_pushstring,a.lua_setfield),v=a.lua_settop,d=(a.lua_toboolean,a.lua_tointegerx),h=r(5),A=h.luaL_Buffer,L=h.luaL_addchar,g=h.luaL_addstring,b=h.luaL_argerror,T=h.luaL_buffinit,x=h.luaL_checkinteger,k=(h.luaL_checkstring,h.luaL_checktype),O=h.luaL_error,m=(h.luaL_execresult,h.luaL_fileresult,h.luaL_newlib),E=h.luaL_opt,U=(h.luaL_optinteger,h.luaL_optlstring),R=(h.luaL_optstring,h.luaL_pushresult),y=r(3),N=y.luastring_indexOf,S=y.to_jsstring,w=y.to_luastring,I=r(35),M=w("aAbBcdHIjmMpSUwWxXyYZ%"),C=M,P=function(t,e,r){_(t,r),p(t,-2,w(e,!0))},D=function(t,e,r){P(t,"sec",r?e.getUTCSeconds():e.getSeconds()),P(t,"min",r?e.getUTCMinutes():e.getMinutes()),P(t,"hour",r?e.getUTCHours():e.getHours()),P(t,"day",r?e.getUTCDate():e.getDate()),P(t,"month",r?e.getUTCMonth():e.getMonth()),P(t,"year",r?e.getUTCFullYear():e.getFullYear()),P(t,"wday",r?e.getUTCDay():e.getDay());var a=new Date;P(t,"yday",Math.floor((a-new Date(a.getFullYear(),0,0))/864e5))},K=Number.MAX_SAFE_INTEGER/2,V=function(t,e,r,a){var u=s(t,-1,w(e,!0)),o=d(t,-1);if(!1===o){if(u!==n)return O(t,w("field '%s' is not an integer"),e);if(r<0)return O(t,w("field '%s' missing in date table"),e);o=r}else{if(!(-K<=o&&o<=K))return O(t,w("field '%s' is out-of-bound"),e);o-=a}return i(t,1),o},B=function(t,e,r,a,n){for(var u=0;u<n;u++)if(t[e+u]!==r[a+u])return!1;return!0},G=function(t,e,r,a){for(var n=C,u=0,o=1;u<n.length&&o<=e.length-r;u+=o)if(n[u]==="|".charCodeAt(0))o++;else if(B(e,r,n,u,o))return a.set(e.subarray(r,r+o)),r+o;b(t,1,c(t,w("invalid conversion specifier '%%%s'"),e))},j=function(t){var e=U(t,1,w("%c")),r=1e3*E(t,H,2,(new Date).getTime()/1e3),a=new Date(r),n=!1,u=0;if(e[u]==="!".charCodeAt(0)&&(n=!0,u++),null===a&&O(t,w("time result cannot be represented in this installation",!0)),e[u]==="*".charCodeAt(0)&&e[u+1]==="t".charCodeAt(0))o(t,0,9),D(t,a,n);else{var s=new Uint8Array(4);s[0]="%".charCodeAt(0);var l=new A;for(T(t,l);u<e.length;)if(e[u]!=="%".charCodeAt(0))L(l,e[u++]);else{u++,u=G(t,e,u,s.subarray(1));var i=N(s,0);-1!==i&&(s=s.subarray(0,i));var c=I(S(s),a);g(l,w(c))}R(l)}return 1},F=function(t){var e=new Date;return l(t,1)||(k(t,1,u),v(t,1),e.setSeconds(V(t,"sec",0,0)),e.setMinutes(V(t,"min",0,0)),e.setHours(V(t,"hour",12,0)),e.setDate(V(t,"day",-1,0)),e.setMonth(V(t,"month",-1,1)),e.setFullYear(V(t,"year",-1,0)),D(t,e)),_(t,Math.floor(e/1e3)),1},H=function(t,e){return x(t,e)},X=function(t){var e=H(t,1),r=H(t,2);return f(t,new Date(e)-new Date(r)),1},z={date:j,difftime:X,time:F};z.clock=function(t){return f(t,performance.now()/1e3),1};var q=function(t){return m(t,z),1};t.exports.luaopen_os=q},function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=r(36),u=n.sprintf,o=r(6),s=o.LUA_INTEGER_FMT,l=o.LUA_INTEGER_FRMLEN,i=o.LUA_MININTEGER,c=o.LUA_NUMBER_FMT,_=o.LUA_NUMBER_FRMLEN,f=o.frexp,p=o.lua_getlocaledecpoint,v=r(2),d=v.LUA_TBOOLEAN,h=v.LUA_TFUNCTION,A=v.LUA_TNIL,L=v.LUA_TNUMBER,g=v.LUA_TSTRING,b=v.LUA_TTABLE,T=v.lua_call,x=v.lua_createtable,k=v.lua_dump,O=v.lua_gettable,m=v.lua_gettop,E=v.lua_isinteger,U=v.lua_isstring,R=v.lua_pop,y=v.lua_pushcclosure,N=v.lua_pushinteger,S=v.lua_pushlightuserdata,w=v.lua_pushliteral,I=v.lua_pushlstring,M=v.lua_pushnil,C=v.lua_pushnumber,P=v.lua_pushstring,D=v.lua_pushvalue,K=v.lua_remove,V=v.lua_setfield,B=v.lua_setmetatable,G=v.lua_settop,j=v.lua_toboolean,F=v.lua_tointeger,H=v.lua_tonumber,X=v.lua_tostring,z=v.lua_touserdata,q=v.lua_type,Y=v.lua_upvalueindex,Z=r(5),J=Z.luaL_Buffer,W=Z.luaL_addchar,Q=Z.luaL_addlstring,$=Z.luaL_addsize,tt=Z.luaL_addstring,et=Z.luaL_addvalue,rt=Z.luaL_argcheck,at=Z.luaL_argerror,nt=Z.luaL_buffinit,ut=Z.luaL_buffinitsize,ot=Z.luaL_checkinteger,st=Z.luaL_checknumber,lt=Z.luaL_checkstack,it=Z.luaL_checkstring,ct=Z.luaL_checktype,_t=Z.luaL_error,ft=Z.luaL_newlib,pt=Z.luaL_optinteger,vt=Z.luaL_optstring,dt=Z.luaL_prepbuffsize,ht=Z.luaL_pushresult,At=Z.luaL_pushresultsize,Lt=Z.luaL_tolstring,gt=Z.luaL_typename,bt=r(16),Tt=r(3),xt=Tt.luastring_indexOf,kt=Tt.to_jsstring,Ot=Tt.to_luastring,mt="%",Et=mt.charCodeAt(0),Ut=function(t){var e=xt(t,0);return e>-1?e:t.length},Rt=function(t,e){return t>=0?t:0-t>e?0:e+t+1},yt=function(t){var e=it(t,1),r=e.length,a=Rt(ot(t,2),r),n=Rt(pt(t,3,-1),r);return a<1&&(a=1),n>r&&(n=r),a<=n?P(t,e.subarray(a-1,a-1+(n-a+1))):w(t,""),1},Nt=function(t){return N(t,it(t,1).length),1},St=function(t){for(var e=m(t),r=new J,a=ut(t,r,e),n=1;n<=e;n++){var u=ot(t,n);rt(t,u>=0&&u<=255,"value out of range"),a[n-1]=u}return At(r,e),1},wt=function(t,e,r,a){return Q(a,e,r),0},It=function(t){var e=new J,r=j(t,2);return ct(t,1,h),G(t,1),nt(t,e),0!==k(t,wt,e,r)?_t(t,Ot("unable to dump given function")):(ht(e),1)},Mt=_.length+1,Ct=function(t){if(Object.is(t,1/0))return Ot("inf");if(Object.is(t,-1/0))return Ot("-inf");if(Number.isNaN(t))return Ot("nan");if(0===t){var e=u(c+"x0p+0",t);return Object.is(t,-0)&&(e="-"+e),Ot(e)}var r="",a=f(t),n=a[0],o=a[1];return n<0&&(r+="-",n=-n),r+="0x",r+=(2*n).toString(16),o-=1,r+=u("p%+d",o),Ot(r)},Pt=function(t,e,r){var a=Ct(r);if(e[Mt]==="A".charCodeAt(0))for(var n=0;n<a.length;n++)a[n]=String.fromCharCode(a[n]).toUpperCase().charCodeAt(0);else e[Mt]!=="a".charCodeAt(0)&&_t(t,Ot("modifiers for format '%%a'/'%%A' not implemented"));return a},Dt=["-".charCodeAt(0),"+".charCodeAt(0)," ".charCodeAt(0),"#".charCodeAt(0),"0".charCodeAt(0)],Kt=function(t){return"a".charCodeAt(0)<=t&&t<="z".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0)},Vt=function(t){return"0".charCodeAt(0)<=t&&t<="9".charCodeAt(0)},Bt=function(t){return 0<=t&&t<=31||127===t},Gt=function(t){return t>32&&t<127},jt=function(t){return/^[a-z]$/.test(String.fromCharCode(t))},Ft=function(t){return/^[A-Z]$/.test(String.fromCharCode(t))},Ht=function(t){return/^[a-zA-Z0-9]$/.test(String.fromCharCode(t))},Xt=function(t){return Gt(t)&&!Ht(t)},zt=function(t){return/^\s$/.test(String.fromCharCode(t))},qt=function(t){return/^[0-9A-Fa-f]$/.test(String.fromCharCode(t))},Yt=function(t,e,r){W(t,'"'.charCodeAt(0));for(var a=0;r--;){if(e[a]==='"'.charCodeAt(0)||e[a]==="\\".charCodeAt(0)||e[a]==="\n".charCodeAt(0))W(t,"\\".charCodeAt(0)),W(t,e[a]);else if(Bt(e[a])){var n=void 0;n=Ot(Vt(e[a+1])?u("\\%03d",e[a]):u("\\%d",e[a])),tt(t,n)}else W(t,e[a]);a++}W(t,'"'.charCodeAt(0))},Zt=function(t){if(xt(t,".".charCodeAt(0))<0){var e=p().charCodeAt(0),r=xt(t,e);r&&(t[r]=".")}},Jt=function(t,e,r){switch(q(t,r)){case g:var a=X(t,r);Yt(e,a,a.length);break;case L:var n=void 0;if(E(t,r)){var o=F(t,r);n=Ot(u(o===i?"0x%"+l+"x":s,o))}else{var c=H(t,r);n=Pt(t,Ot("%"+l+"a"),c),Zt(n)}tt(e,n);break;case A:case d:Lt(t,r),et(e);break;default:at(t,r,Ot("value has no literal form",!0))}},Wt=function(t,e,r,a){for(var n=r;0!==e[n]&&xt(Dt,e[n])>=0;)n++;n-r>=Dt.length&&_t(t,Ot("invalid format (repeated flags)",!0)),Vt(e[n])&&n++,Vt(e[n])&&n++,e[n]===".".charCodeAt(0)&&(n++,Vt(e[n])&&n++,Vt(e[n])&&n++),Vt(e[n])&&_t(t,Ot("invalid format (width or precision too long)",!0)),a[0]="%".charCodeAt(0);for(var u=0;u<n-r+1;u++)a[u+1]=e[r+u];return n},Qt=function(t,e){for(var r=t.length,a=e.length,n=t[r-1],u=0;u<e.length;u++)t[u+r-1]=e[u];t[r+a-1]=n},$t=function(t){var e=m(t),r=1,a=it(t,r),n=0,o=new J;for(nt(t,o);n<a.length;)if(a[n]!==Et)W(o,a[n++]);else if(a[++n]===Et)W(o,a[n++]);else{var s=[];switch(++r>e&&at(t,r,Ot("no value",!0)),n=Wt(t,a,n,s),String.fromCharCode(a[n++])){case"c":W(o,ot(t,r));break;case"d":case"i":case"o":case"u":case"x":case"X":var i=ot(t,r);Qt(s,l.split("").map(function(t){return t.charCodeAt(0)})),tt(o,Ot(u(String.fromCharCode.apply(String,s),i)));break;case"a":case"A":Qt(s,l.split("").map(function(t){return t.charCodeAt(0)})),tt(o,Pt(t,s,st(t,r)));break;case"e":case"E":case"f":case"g":case"G":var c=st(t,r);Qt(s,l.split("").map(function(t){return t.charCodeAt(0)})),tt(o,Ot(u(String.fromCharCode.apply(String,s),c)));break;case"q":Jt(t,o,r);break;case"s":var _=Lt(t,r);s.length<=2||0===s[2]?et(o):(rt(t,_.length===Ut(_),r,Ot("string contains zeros",!0)),xt(s,".".charCodeAt(0))<0&&_.length>=100?et(o):(tt(o,Ot(u(String.fromCharCode.apply(String,s),kt(_)))),R(t,1)));break;default:return _t(t,Ot("invalid option '%%%c' to 'format'"),a[n-1])}}return ht(o),1},te=function t(e){a(this,t),this.L=e,this.islittle=!0,this.maxalign=1},ee={Kint:0,Kuint:1,Kfloat:2,Kchar:3,Kstring:4,Kzstr:5,Kpadding:6,Kpaddalign:7,Knop:8},re=function(t){return"0".charCodeAt(0)<=t&&t<="9".charCodeAt(0)},ae=function(t,e){if(t.off>=t.s.length||!re(t.s[t.off]))return e;var r=0;do{r=10*r+(t.s[t.off++]-"0".charCodeAt(0))}while(t.off<t.s.length&&re(t.s[t.off])&&r<=214748363.8);return r},ne=function(t,e,r){var a=ae(e,r);return(a>16||a<=0)&&_t(t.L,Ot("integral size (%d) out of limits [1,%d]"),a,16),a},ue=function(t,e){var r={opt:NaN,size:NaN};switch(r.opt=e.s[e.off++],r.size=0,r.opt){case"b".charCodeAt(0):return r.size=1,r.opt=ee.Kint,r;case"B".charCodeAt(0):return r.size=1,r.opt=ee.Kuint,r;case"h".charCodeAt(0):return r.size=2,r.opt=ee.Kint,r;case"H".charCodeAt(0):return r.size=2,r.opt=ee.Kuint,r;case"l".charCodeAt(0):return r.size=4,r.opt=ee.Kint,r;case"L".charCodeAt(0):return r.size=4,r.opt=ee.Kuint,r;case"j".charCodeAt(0):return r.size=4,r.opt=ee.Kint,r;case"J".charCodeAt(0):case"T".charCodeAt(0):return r.size=4,r.opt=ee.Kuint,r;case"f".charCodeAt(0):return r.size=4,r.opt=ee.Kfloat,r;case"d".charCodeAt(0):case"n".charCodeAt(0):return r.size=8,r.opt=ee.Kfloat,r;case"i".charCodeAt(0):return r.size=ne(t,e,4),r.opt=ee.Kint,r;case"I".charCodeAt(0):return r.size=ne(t,e,4),r.opt=ee.Kuint,r;case"s".charCodeAt(0):return r.size=ne(t,e,4),r.opt=ee.Kstring,r;case"c".charCodeAt(0):return r.size=ae(e,-1),-1===r.size&&_t(t.L,Ot("missing size for format option 'c'")),r.opt=ee.Kchar,r;case"z".charCodeAt(0):return r.opt=ee.Kzstr,r;case"x".charCodeAt(0):return r.size=1,r.opt=ee.Kpadding,r;case"X".charCodeAt(0):return r.opt=ee.Kpaddalign,r;case" ".charCodeAt(0):break;case"<".charCodeAt(0):t.islittle=!0;break;case">".charCodeAt(0):t.islittle=!1;break;case"=".charCodeAt(0):t.islittle=!0;break;case"!".charCodeAt(0):t.maxalign=ne(t,e,8);break;default:_t(t.L,Ot("invalid format option '%c'"),r.opt)}return r.opt=ee.Knop,r},oe=function(t,e,r){var a={opt:NaN,size:NaN,ntoalign:NaN},n=ue(t,r);a.size=n.size,a.opt=n.opt;var u=a.size;if(a.opt===ee.Kpaddalign)if(r.off>=r.s.length||0===r.s[r.off])at(t.L,1,Ot("invalid next option for option 'X'",!0));else{var o=ue(t,r);u=o.size,o=o.opt,o!==ee.Kchar&&0!==u||at(t.L,1,Ot("invalid next option for option 'X'",!0))}return u<=1||a.opt===ee.Kchar?a.ntoalign=0:(u>t.maxalign&&(u=t.maxalign),0!=(u&u-1)&&at(t.L,1,Ot("format asks for alignment not power of 2",!0)),a.ntoalign=u-(e&u-1)&u-1),a},se=function(t,e,r,a,n){var u=dt(t,a);u[r?0:a-1]=255&e;for(var o=1;o<a;o++)e>>=8,u[r?o:a-1-o]=255&e;if(n&&a>4)for(var s=4;s<a;s++)u[r?s:a-1-s]=255;$(t,a)},le=function(t){var e=new J,r=new te(t),a={s:it(t,1),off:0},n=1,u=0;for(M(t),nt(t,e);a.off<a.s.length;){var o=oe(r,u,a),s=o.opt,l=o.size,i=o.ntoalign;for(u+=i+l;i-- >0;)W(e,0);switch(n++,s){case ee.Kint:var c=ot(t,n);if(l<4){var _=1<<8*l-1;rt(t,-_<=c&&c<_,n,Ot("integer overflow",!0))}se(e,c,r.islittle,l,c<0);break;case ee.Kuint:var f=ot(t,n);l<4&&rt(t,f>>>0<1<<8*l,n,Ot("unsigned overflow",!0)),se(e,f>>>0,r.islittle,l,!1);break;case ee.Kfloat:var p=dt(e,l),v=st(t,n),d=new DataView(p.buffer,p.byteOffset,p.byteLength);4===l?d.setFloat32(0,v,r.islittle):d.setFloat64(0,v,r.islittle),$(e,l);break;case ee.Kchar:var h=it(t,n),A=h.length;for(rt(t,A<=l,n,Ot("string longer than given size",!0)),Q(e,h,A);A++<l;)W(e,0);break;case ee.Kstring:var L=it(t,n),g=L.length;rt(t,l>=4||g<1<<8*l,n,Ot("string length does not fit in given size",!0)),se(e,g,r.islittle,l,0),Q(e,L,g),u+=g;break;case ee.Kzstr:var b=it(t,n),T=b.length;rt(t,xt(b,0)<0,n,Ot("strings contains zeros",!0)),Q(e,b,T),W(e,0),u+=T+1;break;case ee.Kpadding:W(e,0);case ee.Kpaddalign:case ee.Knop:n--}}return ht(e),1},ie=function(t){for(var e=it(t,1),r=e.length,a=new Uint8Array(r),n=0;n<r;n++)a[n]=e[r-1-n];return P(t,a),1},ce=function(t){var e=it(t,1);return P(t,Ot(kt(e).toLowerCase())),1},_e=function(t){var e=it(t,1);return P(t,Ot(kt(e).toUpperCase())),1},fe=function(t){var e=it(t,1),r=e.length,a=ot(t,2),n=vt(t,3,Ot("")),u=n.length;if(a<=0)w(t,"");else{if(r+u<r||r+u>2147483647/a)return _t(t,Ot("resulting string too large"));for(var o=a*r+(a-1)*u,s=new J,l=ut(t,s,o),i=0;a-- >1;)l.set(e,i),i+=r,u>0&&(l.set(n,i),i+=u);l.set(e,i),At(s,o)}return 1},pe=function(t){var e=it(t,1),r=e.length,a=Rt(pt(t,2,1),r),n=Rt(pt(t,3,a),r);if(a<1&&(a=1),n>r&&(n=r),a>n)return 0;if(n-a>=Number.MAX_SAFE_INTEGER)return _t(t,Ot("string slice too long",!0));var u=n-a+1;lt(t,u,Ot("string slice too long",!0));for(var o=0;o<u;o++)N(t,e[a+o-1]);return u},ve=function(t){for(var e=new te(t),r={s:it(t,1),off:0},a=0;r.off<r.s.length;){var n=oe(e,a,r),u=n.opt,o=n.size;switch(o+=n.ntoalign,rt(t,a<=2147483647-o,1,Ot("format result too large",!0)),a+=o,u){case ee.Kstring:case ee.Kzstr:at(t,1,Ot("variable-length format",!0))}}return N(t,a),1},de=function(t,e,r,a,n){for(var u=0,o=a<=4?a:4,s=o-1;s>=0;s--)u<<=8,u|=e[r?s:a-1-s];if(a<4){if(n){var l=1<<8*a-1;u=(u^l)-l}}else if(a>4)for(var i=!n||u>=0?0:255,c=o;c<a;c++)e[r?c:a-1-c]!==i&&_t(t,Ot("%d-byte integer does not fit into Lua Integer"),a);return u},he=function(t,e,r,a){bt.lua_assert(e.length>=a);for(var n=new DataView(new ArrayBuffer(a)),u=0;u<a;u++)n.setUint8(u,e[u],r);return 4==a?n.getFloat32(0,r):n.getFloat64(0,r)},Ae=function(t){var e=new te(t),r={s:it(t,1),off:0},a=it(t,2),n=a.length,u=Rt(pt(t,3,1),n)-1,o=0;for(rt(t,u<=n&&u>=0,3,Ot("initial position out of string",!0));r.off<r.s.length;){var s=oe(e,u,r),l=s.opt,i=s.size,c=s.ntoalign;switch(u+c+i>n&&at(t,2,Ot("data string too short",!0)),u+=c,lt(t,2,Ot("too many results",!0)),o++,l){case ee.Kint:case ee.Kuint:var _=de(t,a.subarray(u),e.islittle,i,l===ee.Kint);N(t,_);break;case ee.Kfloat:var f=he(0,a.subarray(u),e.islittle,i);C(t,f);break;case ee.Kchar:P(t,a.subarray(u,u+i));break;case ee.Kstring:var p=de(t,a.subarray(u),e.islittle,i,0);rt(t,u+p+i<=n,2,Ot("data string too short",!0)),P(t,a.subarray(u+i,u+i+p)),u+=p;break;case ee.Kzstr:var v=xt(a,0,u);-1===v&&(v=a.length-u),P(t,a.subarray(u,v)),u=v+1;break;case ee.Kpaddalign:case ee.Kpadding:case ee.Knop:o--}u+=i}return N(t,u+1),o+1},Le=["^".charCodeAt(0),"$".charCodeAt(0),"*".charCodeAt(0),"+".charCodeAt(0),"?".charCodeAt(0),".".charCodeAt(0),"(".charCodeAt(0),"[".charCodeAt(0),"%".charCodeAt(0),"-".charCodeAt(0)],ge=function t(e){a(this,t),this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=e,this.matchdepth=NaN,this.level=NaN,this.capture=[]},be=function(t,e){return e-="1".charCodeAt(0),e<0||e>=t.level||-1===t.capture[e].len?_t(t.L,Ot("invalid capture index %%%d"),e+1):e},Te=function(t){var e=t.level;for(e--;e>=0;e--)if(-1===t.capture[e].len)return e;return _t(t.L,Ot("invalid pattern capture"))},xe=function(t,e){switch(t.p[e++]){case Et:return e===t.p_end&&_t(t.L,Ot("malformed pattern (ends with '%%')")),e+1;case"[".charCodeAt(0):t.p[e]==="^".charCodeAt(0)&&e++;do{e===t.p_end&&_t(t.L,Ot("malformed pattern (missing ']')")),t.p[e++]===Et&&e<t.p_end&&e++}while(t.p[e]!=="]".charCodeAt(0));return e+1;default:return e}},ke=function(t,e){var r=void 0;switch(String.fromCharCode(e).toLowerCase().charCodeAt(0)){case"a".charCodeAt(0):r=Kt(t);break;case"c".charCodeAt(0):r=Bt(t);break;case"d".charCodeAt(0):r=Vt(t);break;case"g".charCodeAt(0):r=Gt(t);break;case"l".charCodeAt(0):r=jt(t);break;case"p".charCodeAt(0):r=Xt(t);break;case"s".charCodeAt(0):r=zt(t);break;case"u".charCodeAt(0):r=Ft(t);break;case"w".charCodeAt(0):r=Ht(t);break;case"x".charCodeAt(0):r=qt(t);break;case"z".charCodeAt(0):r=0===t;break;default:return e===t}return jt(e)?r:!r},Oe=function(t,e,r,a){var n=!0;for(t.p[r+1]==="^".charCodeAt(0)&&(n=!1,r++);++r<a;)if(t.p[r]===Et){if(r++,ke(e,t.p[r]))return n}else if(t.p[r+1]==="-".charCodeAt(0)&&r+2<a){if(r+=2,t.p[r-2]<=e&&e<=t.p[r])return n}else if(t.p[r]===e)return n;return!n},me=function(t,e,r,a){if(e>=t.src_end)return!1;var n=t.src[e];switch(t.p[r]){case".".charCodeAt(0):return!0;case Et:return ke(n,t.p[r+1]);case"[".charCodeAt(0):return Oe(t,n,r,a-1);default:return t.p[r]===n}},Ee=function(t,e,r){if(r>=t.p_end-1&&_t(t.L,Ot("malformed pattern (missing arguments to '%%b'")),t.src[e]!==t.p[r])return null;for(var a=t.p[r],n=t.p[r+1],u=1;++e<t.src_end;)if(t.src[e]===n){if(0==--u)return e+1}else t.src[e]===a&&u++;return null},Ue=function(t,e,r,a){for(var n=0;me(t,e+n,r,a);)n++;for(;n>=0;){var u=Ie(t,e+n,a+1);if(u)return u;n--}return null},Re=function(t,e,r,a){for(;;){var n=Ie(t,e,a+1);if(null!==n)return n;if(!me(t,e,r,a))return null;e++}},ye=function(t,e,r,a){var n=t.level;n>=32&&_t(t.L,Ot("too many captures",!0)),t.capture[n]=t.capture[n]?t.capture[n]:{},t.capture[n].init=e,t.capture[n].len=a,t.level=n+1;var u=void 0;return null===(u=Ie(t,e,r))&&t.level--,u},Ne=function(t,e,r){var a=Te(t);t.capture[a].len=e-t.capture[a].init;var n=void 0;return null===(n=Ie(t,e,r))&&(t.capture[a].len=-1),n},Se=function(t,e,r,a,n){if(0===n)return!0;var u=e+n;t:for(;;){if(-1===(e=xt(t,r[a],e))||e>=u)return!1;for(var o=1;o<n;o++)if(t[e+o]!==r[a+o]){e++;continue t}return!0}},we=function(t,e,r){r=be(t,r);var a=t.capture[r].len;return t.src_end-e>=a&&Se(t.src,t.capture[r].init,t.src,e,a)?e+a:null},Ie=function t(e,r,a){var n=!1,u=!0;for(0==e.matchdepth--&&_t(e.L,Ot("pattern too complex",!0));u||n;)if(u=!1,a!==e.p_end)switch(n?"x".charCodeAt(0):e.p[a]){case"(".charCodeAt(0):r=e.p[a+1]===")".charCodeAt(0)?ye(e,r,a+2,-2):ye(e,r,a+1,-1);break;case")".charCodeAt(0):r=Ne(e,r,a+1);break;case"$".charCodeAt(0):if(a+1!==e.p_end){n=!0;break}r=e.src.length-r==0?r:null;break;case Et:switch(e.p[a+1]){case"b".charCodeAt(0):r=Ee(e,r,a+2),null!==r&&(a+=4,u=!0);break;case"f".charCodeAt(0):a+=2,e.p[a]!=="[".charCodeAt(0)&&_t(e.L,Ot("missing '[' after '%%f' in pattern"));var o=xe(e,a),s=r===e.src_init?0:e.src[r-1];if(!Oe(e,s,a,o-1)&&Oe(e,r===e.src_end?0:e.src[r],a,o-1)){a=o,u=!0;break}r=null;break;case"0".charCodeAt(0):case"1".charCodeAt(0):case"2".charCodeAt(0):case"3".charCodeAt(0):case"4".charCodeAt(0):case"5".charCodeAt(0):case"6".charCodeAt(0):case"7".charCodeAt(0):case"8".charCodeAt(0):case"9".charCodeAt(0):r=we(e,r,e.p[a+1]),null!==r&&(a+=2,u=!0);break;default:n=!0}break;default:n=!1;var l=xe(e,a);if(me(e,r,a,l))switch(e.p[l]){case"?".charCodeAt(0):var i=void 0;null!==(i=t(e,r+1,l+1))?r=i:(a=l+1,u=!0);break;case"+".charCodeAt(0):r++;case"*".charCodeAt(0):r=Ue(e,r,a,l);break;case"-".charCodeAt(0):r=Re(e,r,a,l);break;default:r++,a=l,u=!0}else{if(e.p[l]==="*".charCodeAt(0)||e.p[l]==="?".charCodeAt(0)||e.p[l]==="-".charCodeAt(0)){a=l+1,u=!0;break}r=null}}return e.matchdepth++,r},Me=function(t,e,r,a){if(e>=t.level)0===e?I(t.L,t.src.subarray(r,a),a-r):_t(t.L,Ot("invalid capture index %%%d"),e+1);else{var n=t.capture[e].len;-1===n&&_t(t.L,Ot("unfinished capture",!0)),-2===n?N(t.L,t.capture[e].init-t.src_init+1):I(t.L,t.src.subarray(t.capture[e].init),n)}},Ce=function(t,e,r){var a=0===t.level&&t.src.subarray(e)?1:t.level;lt(t.L,a,Ot("too many catpures",!0));for(var n=0;n<a;n++)Me(t,n,e,r);return a},Pe=function(t,e){for(var r=0;r<e;r++)if(-1!==Le.indexOf(t[r]))return!1;return!0},De=function(t,e,r,a,n,u){t.L=e,t.matchdepth=200,t.src=r,t.src_init=0,t.src_end=a,t.p=n,t.p_end=u},Ke=function(t){t.level=0,bt.lua_assert(200===t.matchdepth)},Ve=function(t,e,r){var a=r>>>0,n=e.length;if(0===n)return a;t:for(;-1!==(a=t.indexOf(e[0],a));){for(var u=1;u<n;u++)if(t[a+u]!==e[u]){a++;continue t}return a}return-1},Be=function(t,e){var r=it(t,1),a=it(t,2),n=r.length,u=a.length,o=Rt(pt(t,3,1),n);if(o<1)o=1;else if(o>n+1)return M(t),1;if(e&&(j(t,4)||Pe(a,u))){var s=Ve(r.subarray(o-1),a,0);if(s>-1)return N(t,o+s),N(t,o+s+u-1),2}else{var l=new ge(t),i=o-1,c=a[0]==="^".charCodeAt(0);c&&(a=a.subarray(1),u--),De(l,t,r,n,a,u);do{var _=void 0;if(Ke(l),null!==(_=Ie(l,i,0)))return e?(N(t,i+1),N(t,_),Ce(l,null,0)+2):Ce(l,i,_)}while(i++<l.src_end&&!c)}return M(t),1},Ge=function(t){return Be(t,1)},je=function(t){return Be(t,0)},Fe=function t(){a(this,t),this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new ge},He=function(t){var e=z(t,Y(3));e.ms.L=t;for(var r=e.src;r<=e.ms.src_end;r++){Ke(e.ms);var a=void 0;if(null!==(a=Ie(e.ms,r,e.p))&&a!==e.lastmatch)return e.src=e.lastmatch=a,Ce(e.ms,r,a)}return 0},Xe=function(t){var e=it(t,1),r=it(t,2),a=e.length,n=r.length;G(t,2);var u=new Fe;return S(t,u),De(u.ms,t,e,a,r,n),u.src=0,u.p=0,u.lastmatch=null,y(t,He,3),1},ze=function(t,e,r,a){for(var n=t.L,u=X(n,3),o=u.length,s=0;s<o;s++)u[s]!==Et?W(e,u[s]):(s++,Vt(u[s])?u[s]==="0".charCodeAt(0)?Q(e,t.src.subarray(r,a),a-r):(Me(t,u[s]-"1".charCodeAt(0),r,a),Lt(n,-1),K(n,-2),et(e)):(u[s]!==Et&&_t(n,Ot("invalid use of '%c' in replacement string"),Et),W(e,u[s])))},qe=function(t,e,r,a,n){var u=t.L;switch(n){case h:D(u,3);var o=Ce(t,r,a);T(u,o,1);break;case b:Me(t,0,r,a),O(u,3);break;default:return void ze(t,e,r,a)}j(u,-1)?U(u,-1)||_t(u,Ot("invalid replacement value (a %s)"),gt(u,-1)):(R(u,1),I(u,t.src.subarray(r,a),a-r)),et(e)},Ye=function(t){var e=it(t,1),r=e.length,a=it(t,2),n=a.length,u=null,o=q(t,3),s=pt(t,4,r+1),l=a[0]==="^".charCodeAt(0),i=0,c=new ge(t),_=new J;for(rt(t,o===L||o===g||o===h||o===b,3,Ot("string/function/table expected",!0)),nt(t,_),l&&(a=a.subarray(1),n--),De(c,t,e,r,a,n),e=0,a=0;i<s;){var f=void 0;if(Ke(c),null!==(f=Ie(c,e,a))&&f!==u)i++,qe(c,_,e,f,o),e=u=f;else{if(!(e<c.src_end))break;W(_,c.src[e++])}if(l)break}return Q(_,c.src.subarray(e,c.src_end),c.src_end-e),ht(_),N(t,i),2},Ze={byte:pe,char:St,dump:It,find:Ge,format:$t,gmatch:Xe,gsub:Ye,len:Nt,lower:ce,match:je,pack:le,packsize:ve,rep:fe,reverse:ie,sub:yt,unpack:Ae,upper:_e},Je=function(t){x(t,0,1),w(t,""),D(t,-2),B(t,-2),R(t,1),D(t,-2),V(t,-2,Ot("__index",!0)),R(t,1)},We=function(t){return ft(t,Ze),Je(t),1};t.exports.luaopen_string=We},function(t,e,r){"use strict";var a=r(2),n=a.lua_gettop,u=a.lua_pushcfunction,o=a.lua_pushfstring,s=a.lua_pushinteger,l=a.lua_pushnil,i=a.lua_pushstring,c=a.lua_pushvalue,_=a.lua_setfield,f=a.lua_tointeger,p=r(5),v=p.luaL_Buffer,d=p.luaL_addvalue,h=p.luaL_argcheck,A=p.luaL_buffinit,L=p.luaL_checkinteger,g=p.luaL_checkstack,b=p.luaL_checkstring,T=p.luaL_error,x=p.luaL_newlib,k=p.luaL_optinteger,O=p.luaL_pushresult,m=r(3),E=m.luastring_of,U=m.to_luastring,R=function(t){return 128==(192&t)},y=function(t,e){return t>=0?t:0-t>e?0:e+t+1},N=[255,127,2047,65535],S=function(t,e){var r=t[e],a=0;if(r<128)a=r;else{for(var n=0;64&r;){var u=t[e+ ++n];if(128!=(192&u))return null;a=a<<6|63&u,r<<=1}if(a|=(127&r)<<5*n,n>3||a>1114111||a<=N[n])return null;e+=n}return{code:a,pos:e+1}},w=function(t){var e=0,r=b(t,1),a=r.length,n=y(k(t,2,1),a),u=y(k(t,3,-1),a);for(h(t,1<=n&&--n<=a,2,U("initial position out of string")),h(t,--u<a,3,U("final position out of string"));n<=u;){var o=S(r,n);if(null===o)return l(t),s(t,n+1),2;n=o.pos,e++}return s(t,e),1},I=U("%U"),M=function(t,e){var r=L(t,e);h(t,0<=r&&r<=1114111,e,U("value out of range",!0)),o(t,I,r)},C=function(t){var e=n(t);if(1===e)M(t,1);else{var r=new v;A(t,r);for(var a=1;a<=e;a++)M(t,a),d(r);O(r)}return 1},P=function(t){var e=b(t,1),r=L(t,2),a=r>=0?1:e.length+1;if(a=y(k(t,3,a),e.length),h(t,1<=a&&--a<=e.length,3,U("position out of range",!0)),0===r)for(;a>0&&R(e[a]);)a--;else if(R(e[a])&&T(t,U("initial position is a continuation byte",!0)),r<0)for(;r<0&&a>0;){do{a--}while(a>0&&R(e[a]));r++}else for(r--;r>0&&a<e.length;){do{a++}while(R(e[a]));r--}return 0===r?s(t,a+1):l(t),1},D=function(t){var e=b(t,1),r=y(k(t,2,1),e.length),a=y(k(t,3,r),e.length);if(h(t,r>=1,2,U("out of range",!0)),h(t,a<=e.length,3,U("out of range",!0)),r>a)return 0;if(a-r>=Number.MAX_SAFE_INTEGER)return T(t,U("string slice too long",!0));var n=a-r+1;for(g(t,n,U("string slice too long",!0)),n=0,r-=1;r<a;){var u=S(e,r);if(null===u)return T(t,U("invalid UTF-8 code",!0));s(t,u.code),r=u.pos,n++}return n},K=function(t){var e=b(t,1),r=e.length,a=f(t,2)-1;if(a<0)a=0;else if(a<r)for(a++;R(e[a]);)a++;if(a>=r)return 0;var n=S(e,a);return null===n||R(e[n.pos])?T(t,U("invalid UTF-8 code",!0)):(s(t,a+1),s(t,n.code),2)},V=function(t){return b(t,1),u(t,K),c(t,1),s(t,0),3},B={char:C,codepoint:D,codes:V,len:w,offset:P},G=E(91,0,45,127,194,45,244,93,91,128,45,191,93,42),j=function(t){return x(t,B),i(t,G),_(t,-2,U("charpattern",!0)),1};t.exports.luaopen_utf8=j},function(t,e,r){"use strict";var a=r(2),n=a.LUA_OPLT,u=a.LUA_TNUMBER,o=a.lua_compare,s=a.lua_gettop,l=a.lua_isinteger,i=a.lua_isnoneornil,c=a.lua_pushboolean,_=a.lua_pushinteger,f=a.lua_pushliteral,p=a.lua_pushnil,v=a.lua_pushnumber,d=a.lua_pushvalue,h=a.lua_setfield,A=a.lua_settop,L=a.lua_tointeger,g=a.lua_tointegerx,b=a.lua_type,T=r(5),x=T.luaL_argcheck,k=T.luaL_argerror,O=T.luaL_checkany,m=T.luaL_checkinteger,E=T.luaL_checknumber,U=T.luaL_error,R=T.luaL_newlib,y=T.luaL_optnumber,N=r(6),S=N.LUA_MAXINTEGER,w=N.LUA_MININTEGER,I=N.lua_numbertointeger,M=r(3),C=M.to_luastring,P=function(t){var e=void 0,r=void 0,a=Math.random();switch(s(t)){case 0:return v(t,a),1;case 1:e=1,r=m(t,1);break;case 2:e=m(t,1),r=m(t,2);break;default:return U(t,C("wrong number of arguments",!0))}return x(t,e<=r,1,C("interval is empty",!0)),x(t,e>=0||r<=S+e,1,C("interval too large",!0)),a*=r-e+1,_(t,Math.floor(a)+e),1},D=function(t){if(l(t,1)){var e=L(t,1);e<0&&(e=0|-e),_(t,e)}else v(t,Math.abs(E(t,1)));return 1},K=function(t){return v(t,Math.sin(E(t,1))),1},V=function(t){return v(t,Math.cos(E(t,1))),1},B=function(t){return v(t,Math.tan(E(t,1))),1},G=function(t){return v(t,Math.asin(E(t,1))),1},j=function(t){return v(t,Math.acos(E(t,1))),1},F=function(t){var e=E(t,1),r=y(t,2,1);return v(t,Math.atan2(e,r)),1},H=function(t){var e=g(t,1);return!1!==e?_(t,e):(O(t,1),p(t)),1},X=function(t,e){var r=I(e);!1!==r?_(t,r):v(t,e)},z=function(t){return l(t,1)?A(t,1):X(t,Math.floor(E(t,1))),1},q=function(t){return l(t,1)?A(t,1):X(t,Math.ceil(E(t,1))),1},Y=function(t){return v(t,Math.sqrt(E(t,1))),1},Z=function(t){var e=m(t,1),r=m(t,2);return c(t,e>=0?r<0||e<r:r<0&&e<r),1},J=function(t){var e=E(t,1),r=void 0;if(i(t,2))r=Math.log(e);else{var a=E(t,2);r=2===a?Math.log2(e):10===a?Math.log10(e):Math.log(e)/Math.log(a)}return v(t,r),1},W=function(t){return v(t,Math.exp(E(t,1))),1},Q=function(t){return v(t,E(t,1)*(180/Math.PI)),1},$=function(t){return v(t,E(t,1)*(Math.PI/180)),1},tt=function(t){var e=s(t),r=1;x(t,e>=1,1,C("value expected",!0));for(var a=2;a<=e;a++)o(t,a,r,n)&&(r=a);return d(t,r),1},et=function(t){var e=s(t),r=1;x(t,e>=1,1,C("value expected",!0));for(var a=2;a<=e;a++)o(t,r,a,n)&&(r=a);return d(t,r),1},rt=function(t){return b(t,1)===u?l(t,1)?f(t,"integer"):f(t,"float"):(O(t,1),p(t)),1},at=function(t){if(l(t,1)&&l(t,2)){var e=L(t,2);0===e?k(t,2,C("zero",!0)):_(t,L(t,1)%e|0)}else{var r=E(t,1),a=E(t,2);v(t,r%a)}return 1},nt=function(t){if(l(t,1))A(t,1),v(t,0);else{var e=E(t,1),r=e<0?Math.ceil(e):Math.floor(e);X(t,r),v(t,e===r?0:e-r)}return 2},ut={abs:D,acos:j,asin:G,atan:F,ceil:q,cos:V,deg:Q,exp:W,floor:z,fmod:at,log:J,max:et,min:tt,modf:nt,rad:$,random:P,sin:K,sqrt:Y,tan:B,tointeger:H,type:rt,ult:Z},ot=function(t){return R(t,ut),v(t,Math.PI),h(t,-2,C("pi",!0)),v(t,1/0),h(t,-2,C("huge",!0)),_(t,S),h(t,-2,C("maxinteger",!0)),_(t,w),h(t,-2,C("mininteger",!0)),1};t.exports.luaopen_math=ot},function(t,e,r){"use strict";var a=r(2),n=a.LUA_MASKCALL,u=a.LUA_MASKCOUNT,o=a.LUA_MASKLINE,s=a.LUA_MASKRET,l=a.LUA_REGISTRYINDEX,i=a.LUA_TFUNCTION,c=a.LUA_TNIL,_=a.LUA_TTABLE,f=a.LUA_TUSERDATA,p=a.lua_Debug,v=a.lua_call,d=a.lua_checkstack,h=a.lua_createtable,A=a.lua_gethook,L=a.lua_gethookcount,g=a.lua_gethookmask,b=a.lua_getinfo,T=a.lua_getlocal,x=a.lua_getmetatable,k=a.lua_getstack,O=a.lua_getupvalue,m=a.lua_getuservalue,E=a.lua_insert,U=a.lua_iscfunction,R=a.lua_isfunction,y=a.lua_isnoneornil,N=a.lua_isthread,S=a.lua_newtable,w=a.lua_pcall,I=a.lua_pop,M=a.lua_pushboolean,C=a.lua_pushfstring,P=a.lua_pushinteger,D=a.lua_pushlightuserdata,K=a.lua_pushliteral,V=a.lua_pushnil,B=a.lua_pushstring,G=a.lua_pushthread,j=a.lua_pushvalue,F=a.lua_rawget,H=a.lua_rawgetp,X=a.lua_rawset,z=a.lua_rawsetp,q=a.lua_remove,Y=a.lua_rotate,Z=a.lua_setfield,J=a.lua_sethook,W=a.lua_setlocal,Q=a.lua_setmetatable,$=a.lua_settop,tt=a.lua_setupvalue,et=a.lua_setuservalue,rt=a.lua_tojsstring,at=a.lua_tostring,nt=a.lua_tothread,ut=a.lua_type,ot=a.lua_upvalueid,st=a.lua_upvaluejoin,lt=a.lua_xmove,it=r(5),ct=it.luaL_argcheck,_t=it.luaL_argerror,ft=it.luaL_checkany,pt=it.luaL_checkinteger,vt=it.luaL_checkstring,dt=it.luaL_checktype,ht=it.luaL_error,At=it.luaL_loadbuffer,Lt=it.luaL_newlib,gt=it.luaL_optinteger,bt=it.luaL_optstring,Tt=it.luaL_traceback,xt=it.lua_writestringerror,kt=r(16),Ot=r(3),mt=Ot.luastring_indexOf,Et=Ot.to_luastring,Ut=function(t,e,r){t===e||d(e,r)||ht(t,Et("stack overflow",!0))},Rt=function(t){return j(t,l),1},yt=function(t){return ft(t,1),x(t,1)||V(t),1},Nt=function(t){var e=ut(t,2);return ct(t,e==c||e==_,2,Et("nil or table expected",!0)),$(t,2),Q(t,1),1},St=function(t){return ut(t,1)!==f?V(t):m(t,1),1},wt=function(t){return dt(t,1,f),ft(t,2),$(t,2),et(t,1),1},It=function(t){return N(t,1)?{arg:1,thread:nt(t,1)}:{arg:0,thread:t}},Mt=function(t,e,r){B(t,r),Z(t,-2,e)},Ct=function(t,e,r){P(t,r),Z(t,-2,e)},Pt=function(t,e,r){M(t,r),Z(t,-2,e)},Dt=function(t,e,r){t==e?Y(t,-2,1):lt(e,t,1),Z(t,-2,r)},Kt=function(t){var e=new p,r=It(t),a=r.arg,n=r.thread,u=bt(t,a+2,Et("flnStu",!0));if(Ut(t,n,3),R(t,a+1))u=C(t,Et(">%s"),u),j(t,a+1),lt(t,n,1);else if(!k(n,pt(t,a+1),e))return V(t),1;return b(n,u,e)||_t(t,a+2,Et("invalid option",!0)),S(t),mt(u,"S".charCodeAt(0))>-1&&(Mt(t,Et("source",!0),e.source),Mt(t,Et("short_src",!0),e.short_src),Ct(t,Et("linedefined",!0),e.linedefined),Ct(t,Et("lastlinedefined",!0),e.lastlinedefined),Mt(t,Et("what",!0),e.what)),mt(u,"l".charCodeAt(0))>-1&&Ct(t,Et("currentline",!0),e.currentline),mt(u,"u".charCodeAt(0))>-1&&(Ct(t,Et("nups",!0),e.nups),Ct(t,Et("nparams",!0),e.nparams),Pt(t,Et("isvararg",!0),e.isvararg)),mt(u,"n".charCodeAt(0))>-1&&(Mt(t,Et("name",!0),e.name),Mt(t,Et("namewhat",!0),e.namewhat)),mt(u,"t".charCodeAt(0))>-1&&Pt(t,Et("istailcall",!0),e.istailcall),mt(u,"L".charCodeAt(0))>-1&&Dt(t,n,Et("activelines",!0)),mt(u,"f".charCodeAt(0))>-1&&Dt(t,n,Et("func",!0)),1},Vt=function(t){var e=It(t),r=e.thread,a=e.arg,n=new p,u=pt(t,a+2);if(R(t,a+1))return j(t,a+1),B(t,T(t,null,u)),1;var o=pt(t,a+1);if(!k(r,o,n))return _t(t,a+1,Et("level out of range",!0));Ut(t,r,1);var s=T(r,n,u);return s?(lt(r,t,1),B(t,s),Y(t,-2,1),2):(V(t),1)},Bt=function(t){var e=It(t),r=e.thread,a=e.arg,n=new p,u=pt(t,a+1),o=pt(t,a+2);if(!k(r,u,n))return _t(t,a+1,Et("level out of range",!0));ft(t,a+3),$(t,a+3),Ut(t,r,1),lt(t,r,1);var s=W(r,n,o);return null===s&&I(r,1),B(t,s),1},Gt=function(t,e){var r=pt(t,2);dt(t,1,i);var a=e?O(t,1,r):tt(t,1,r);return null===a?0:(B(t,a),E(t,-(e+1)),e+1)},jt=function(t){return Gt(t,1)},Ft=function(t){return ft(t,3),Gt(t,0)},Ht=function(t,e,r){var a=pt(t,r);return dt(t,e,i),ct(t,null!==O(t,e,a),r,Et("invalid upvalue index",!0)),a},Xt=function(t){var e=Ht(t,1,2);return D(t,ot(t,1,e)),1},zt=function(t){var e=Ht(t,1,2),r=Ht(t,3,4);return ct(t,!U(t,1),1,Et("Lua function expected",!0)),ct(t,!U(t,3),3,Et("Lua function expected",!0)),st(t,1,e,3,r),0},qt=Et("__hooks__",!0),Yt=["call","return","line","count","tail call"].map(function(t){return Et(t)}),Zt=function(t,e){H(t,l,qt),G(t),F(t,-2)===i&&(B(t,Yt[e.event]),e.currentline>=0?P(t,e.currentline):V(t),kt.lua_assert(b(t,Et("lS"),e)),v(t,2,0))},Jt=function(t,e){var r=0;return mt(t,"c".charCodeAt(0))>-1&&(r|=n),mt(t,"r".charCodeAt(0))>-1&&(r|=s),mt(t,"l".charCodeAt(0))>-1&&(r|=o),e>0&&(r|=u),r},Wt=function(t,e){var r=0;return t&n&&(e[r++]="c".charCodeAt(0)),t&s&&(e[r++]="r".charCodeAt(0)),t&o&&(e[r++]="l".charCodeAt(0)),e.subarray(0,r)},Qt=function(t){var e=void 0,r=void 0,a=void 0,n=It(t),u=n.thread,o=n.arg;if(y(t,o+1))$(t,o+1),a=null,e=0,r=0;else{var s=vt(t,o+2);dt(t,o+1,i),r=gt(t,o+3,0),a=Zt,e=Jt(s,r)}return H(t,l,qt)===c&&(h(t,0,2),j(t,-1),z(t,l,qt),B(t,Et("k")),Z(t,-2,Et("__mode",!0)),j(t,-1),Q(t,-2)),Ut(t,u,1),G(u),lt(u,t,1),j(t,o+1),X(t,-3),J(u,a,e,r),0},$t=function(t){var e=It(t),r=e.thread,a=new Uint8Array(5),n=g(r),u=A(r);return null===u?V(t):u!==Zt?K(t,"external hook"):(H(t,l,qt),Ut(t,r,1),G(r),lt(r,t,1),F(t,-2),q(t,-2)),B(t,Wt(n,a)),P(t,L(r)),3},te=function(t){var e=It(t),r=e.thread,a=e.arg,n=at(t,a+1);if(null!==n||y(t,a+1)){var u=gt(t,a+2,t===r?1:0);Tt(t,r,n,u)}else j(t,a+1);return 1},ee={gethook:$t,getinfo:Kt,getlocal:Vt,getmetatable:yt,getregistry:Rt,getupvalue:jt,getuservalue:St,sethook:Qt,setlocal:Bt,setmetatable:Nt,setupvalue:Ft,setuservalue:wt,traceback:te,upvalueid:Xt,upvaluejoin:zt},re=void 0;"undefined"!=typeof window&&(re=function(){var t=prompt("lua_debug>","");return null!==t?t:""}),re&&(ee.debug=function(t){for(;;){var e=re();if("cont"===e)return 0;if(0!==e.length){var r=Et(e);(At(t,r,r.length,Et("=(debug command)",!0))||w(t,0,0,0))&&xt(rt(t,-1),"\n"),$(t,0)}}});var ae=function(t){return Lt(t,ee),1};t.exports.luaopen_debug=ae},function(module,exports,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_require=__webpack_require__(2),LUA_CPATH_DEFAULT=_require.LUA_CPATH_DEFAULT,LUA_DIRSEP=_require.LUA_DIRSEP,LUA_EXEC_DIR=_require.LUA_EXEC_DIR,LUA_OK=_require.LUA_OK,LUA_PATH_DEFAULT=_require.LUA_PATH_DEFAULT,LUA_PATH_MARK=_require.LUA_PATH_MARK,LUA_PATH_SEP=_require.LUA_PATH_SEP,LUA_REGISTRYINDEX=_require.LUA_REGISTRYINDEX,LUA_TNIL=_require.LUA_TNIL,LUA_TTABLE=_require.LUA_TTABLE,LUA_VERSUFFIX=_require.LUA_VERSUFFIX,lua_callk=_require.lua_callk,lua_createtable=_require.lua_createtable,lua_getfield=_require.lua_getfield,lua_insert=_require.lua_insert,lua_isfunction=_require.lua_isfunction,lua_isnil=_require.lua_isnil,lua_isstring=_require.lua_isstring,lua_newtable=_require.lua_newtable,lua_pop=_require.lua_pop,lua_pushboolean=_require.lua_pushboolean,lua_pushcclosure=_require.lua_pushcclosure,lua_pushcfunction=_require.lua_pushcfunction,lua_pushfstring=_require.lua_pushfstring,lua_pushglobaltable=_require.lua_pushglobaltable,lua_pushlightuserdata=_require.lua_pushlightuserdata,lua_pushliteral=_require.lua_pushliteral,lua_pushlstring=_require.lua_pushlstring,lua_pushnil=_require.lua_pushnil,lua_pushstring=_require.lua_pushstring,lua_pushvalue=_require.lua_pushvalue,lua_rawgeti=_require.lua_rawgeti,lua_rawgetp=_require.lua_rawgetp,lua_rawseti=_require.lua_rawseti,lua_rawsetp=_require.lua_rawsetp,lua_remove=_require.lua_remove,lua_setfield=_require.lua_setfield,lua_setmetatable=_require.lua_setmetatable,lua_settop=_require.lua_settop,lua_toboolean=_require.lua_toboolean,lua_tostring=_require.lua_tostring,lua_touserdata=_require.lua_touserdata,lua_upvalueindex=_require.lua_upvalueindex,_require2=__webpack_require__(5),LUA_LOADED_TABLE=_require2.LUA_LOADED_TABLE,LUA_PRELOAD_TABLE=_require2.LUA_PRELOAD_TABLE,luaL_Buffer=_require2.luaL_Buffer,luaL_addvalue=_require2.luaL_addvalue,luaL_buffinit=_require2.luaL_buffinit,luaL_checkstring=_require2.luaL_checkstring,luaL_error=_require2.luaL_error,luaL_getsubtable=_require2.luaL_getsubtable,luaL_gsub=_require2.luaL_gsub,luaL_len=_require2.luaL_len,luaL_loadfile=_require2.luaL_loadfile,luaL_newlib=_require2.luaL_newlib,luaL_optstring=_require2.luaL_optstring,luaL_pushresult=_require2.luaL_pushresult,luaL_setfuncs=_require2.luaL_setfuncs,_require3=__webpack_require__(3),luastring_indexOf=_require3.luastring_indexOf,to_jsstring=_require3.to_jsstring,to_luastring=_require3.to_luastring,to_uristring=_require3.to_uristring,fengari=__webpack_require__(19),global_env=function(){return"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:eval("this")}(),CLIBS=to_luastring("__CLIBS__",!0),LUA_PATH_VAR="LUA_PATH",LUA_CPATH_VAR="LUA_CPATH",LUA_IGMARK="-",LUA_CSUBSEP=LUA_DIRSEP,LUA_LSUBSEP=LUA_DIRSEP,LUA_POF=to_luastring("luaopen_"),LUA_OFSEP=to_luastring("_"),LIB_FAIL="open",AUXMARK=to_luastring(""),lsys_load=void 0,pathlib;lsys_load=function(t,e,r){e=to_uristring(e);var a=new XMLHttpRequest;if(a.open("GET",e,!1),a.send(),a.status<200||a.status>=300)return lua_pushstring(t,to_luastring(a.status+": "+a.statusText)),null;var n=a.response;/\/\/[#@] sourceURL=/.test(n)||(n+=" //# sourceURL="+e);var u=void 0;try{u=Function("fengari",n)}catch(e){return lua_pushstring(t,to_luastring(e.name+": "+e.message)),null}var o=u(fengari);return"function"==typeof o||"object"===(void 0===o?"undefined":_typeof(o))&&null!==o?o:void 0===o?global_env:(lua_pushstring(t,to_luastring("library returned unexpected type ("+(void 0===o?"undefined":_typeof(o))+")")),null)};var lsys_sym=function(t,e,r){var a=e[to_jsstring(r)];return a&&"function"==typeof a?a:(lua_pushfstring(t,to_luastring("undefined symbol: %s"),r),null)},noenv=function(t){lua_getfield(t,LUA_REGISTRYINDEX,to_luastring("LUA_NOENV"));var e=lua_toboolean(t,-1);return lua_pop(t,1),e},readable=void 0,fs;readable=function(t){t=to_uristring(t);var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(),e.status>=200&&e.status<=299};var ERRLIB=1,ERRFUNC=2,lookforfunc=function(t,e,r){var a=checkclib(t,e);if(null===a){if(null===(a=lsys_load(t,e,r[0]==="*".charCodeAt(0))))return ERRLIB;addtoclib(t,e,a)}if(r[0]==="*".charCodeAt(0))return lua_pushboolean(t,1),0;var n=lsys_sym(t,a,r);return null===n?ERRFUNC:(lua_pushcfunction(t,n),0)},ll_loadlib=function(t){var e=luaL_checkstring(t,1),r=luaL_checkstring(t,2),a=lookforfunc(t,e,r);return 0===a?1:(lua_pushnil(t),lua_insert(t,-2),lua_pushliteral(t,a===ERRLIB?LIB_FAIL:"init"),3)},env=function(){return global_env}(),setpath=function(t,e,r,a){var n=""+r+LUA_VERSUFFIX;lua_pushstring(t,to_luastring(n));var u=env[n];void 0===u&&(u=env[r]),void 0===u||noenv(t)?lua_pushstring(t,to_luastring(a)):(u=luaL_gsub(t,to_luastring(u),to_luastring(LUA_PATH_SEP+LUA_PATH_SEP,!0),to_luastring(LUA_PATH_SEP+to_jsstring(AUXMARK)+LUA_PATH_SEP,!0)),luaL_gsub(t,u,AUXMARK,to_luastring(a)),lua_remove(t,-2)),lua_setfield(t,-3,e),lua_pop(t,1)},checkclib=function(t,e){lua_rawgetp(t,LUA_REGISTRYINDEX,CLIBS),lua_getfield(t,-1,e);var r=lua_touserdata(t,-1);return lua_pop(t,2),r},addtoclib=function(t,e,r){lua_rawgetp(t,LUA_REGISTRYINDEX,CLIBS),lua_pushlightuserdata(t,r),lua_pushvalue(t,-1),lua_setfield(t,-3,e),lua_rawseti(t,-2,luaL_len(t,-2)+1),lua_pop(t,1)},pushnexttemplate=function(t,e){for(;e[0]===LUA_PATH_SEP.charCodeAt(0);)e=e.subarray(1);if(0===e.length)return null;var r=luastring_indexOf(e,LUA_PATH_SEP.charCodeAt(0));return r<0&&(r=e.length),lua_pushlstring(t,e,r),e.subarray(r)},searchpath=function(t,e,r,a,n){var u=new luaL_Buffer;for(luaL_buffinit(t,u),0!==a[0]&&(e=luaL_gsub(t,e,a,n));null!==(r=pushnexttemplate(t,r));){var o=luaL_gsub(t,lua_tostring(t,-1),to_luastring(LUA_PATH_MARK,!0),e);if(lua_remove(t,-2),readable(o))return o;lua_pushfstring(t,to_luastring("\n\tno file '%s'"),o),lua_remove(t,-2),luaL_addvalue(u)}return luaL_pushresult(u),null},ll_searchpath=function(t){return null!==searchpath(t,luaL_checkstring(t,1),luaL_checkstring(t,2),luaL_optstring(t,3,to_luastring(".")),luaL_optstring(t,4,to_luastring(LUA_DIRSEP)))?1:(lua_pushnil(t),lua_insert(t,-2),2)},findfile=function(t,e,r,a){lua_getfield(t,lua_upvalueindex(1),r);var n=lua_tostring(t,-1);return null===n&&luaL_error(t,to_luastring("'package.%s' must be a string"),r),searchpath(t,e,n,to_luastring("."),a)},checkload=function(t,e,r){return e?(lua_pushstring(t,r),2):luaL_error(t,to_luastring("error loading module '%s' from file '%s':\n\t%s"),lua_tostring(t,1),r,lua_tostring(t,-1))},searcher_Lua=function(t){var e=luaL_checkstring(t,1),r=findfile(t,e,to_luastring("path",!0),to_luastring(LUA_LSUBSEP,!0));return null===r?1:checkload(t,luaL_loadfile(t,r)===LUA_OK,r)},loadfunc=function(t,e,r){var a=void 0;r=luaL_gsub(t,r,to_luastring("."),LUA_OFSEP);var n=luastring_indexOf(r,LUA_IGMARK.charCodeAt(0));if(n>=0){a=lua_pushlstring(t,r,n),a=lua_pushfstring(t,to_luastring("%s%s"),LUA_POF,a);var u=lookforfunc(t,e,a);if(u!==ERRFUNC)return u;r=n+1}return a=lua_pushfstring(t,to_luastring("%s%s"),LUA_POF,r),lookforfunc(t,e,a)},searcher_C=function(t){var e=luaL_checkstring(t,1),r=findfile(t,e,to_luastring("cpath",!0),to_luastring(LUA_CSUBSEP,!0));return null===r?1:checkload(t,0===loadfunc(t,r,e),r)},searcher_Croot=function(t){var e=luaL_checkstring(t,1),r=luastring_indexOf(e,".".charCodeAt(0)),a=void 0;if(r<0)return 0;lua_pushlstring(t,e,r);var n=findfile(t,lua_tostring(t,-1),to_luastring("cpath",!0),to_luastring(LUA_CSUBSEP,!0));return null===n?1:0!==(a=loadfunc(t,n,e))?a!=ERRFUNC?checkload(t,0,n):(lua_pushstring(t,to_luastring("\n\tno module '%s' in file '%s'"),e,n),1):(lua_pushstring(t,n),2)},searcher_preload=function(t){var e=luaL_checkstring(t,1);return lua_getfield(t,LUA_REGISTRYINDEX,LUA_PRELOAD_TABLE),lua_getfield(t,-1,e)===LUA_TNIL&&lua_pushfstring(t,to_luastring("\n\tno field package.preload['%s']"),e),1},findloader=function(t,e,r,a){var n=new luaL_Buffer;return luaL_buffinit(t,n),lua_getfield(t,lua_upvalueindex(1),to_luastring("searchers",!0))!==LUA_TTABLE&&luaL_error(t,to_luastring("'package.searchers' must be a table")),findloader_cont(t,LUA_OK,{name:e,i:1,msg:n,ctx:r,k:a})},findloader_cont=function t(e,r,a){for(;r===LUA_OK?(lua_rawgeti(e,3,a.i)===LUA_TNIL&&(lua_pop(e,1),luaL_pushresult(a.msg),luaL_error(e,to_luastring("module '%s' not found:%s"),a.name,lua_tostring(e,-1))),lua_pushstring(e,a.name),lua_callk(e,1,2,a,t)):r=LUA_OK,!lua_isfunction(e,-2);a.i++)lua_isstring(e,-2)?(lua_pop(e,1),luaL_addvalue(a.msg)):lua_pop(e,2);return a.k(e,LUA_OK,a.ctx)},ll_require=function(t){var e=luaL_checkstring(t,1);return lua_settop(t,1),lua_getfield(t,LUA_REGISTRYINDEX,LUA_LOADED_TABLE),lua_getfield(t,2,e),lua_toboolean(t,-1)?1:(lua_pop(t,1),findloader(t,e,e,ll_require_cont))},ll_require_cont=function(t,e,r){return lua_pushstring(t,r),lua_insert(t,-2),lua_callk(t,2,1,r,ll_require_cont2),ll_require_cont2(t,LUA_OK,r)},ll_require_cont2=function(t,e,r){var a=r;return lua_isnil(t,-1)||lua_setfield(t,2,a),lua_getfield(t,2,a)==LUA_TNIL&&(lua_pushboolean(t,1),lua_pushvalue(t,-1),lua_setfield(t,2,a)),1},pk_funcs={loadlib:ll_loadlib,searchpath:ll_searchpath},ll_funcs={require:ll_require},createsearcherstable=function(t){var e=[searcher_preload,searcher_Lua,searcher_C,searcher_Croot,null];lua_createtable(t);for(var r=0;e[r];r++)lua_pushvalue(t,-2),lua_pushcclosure(t,e[r],1),lua_rawseti(t,-2,r+1);lua_setfield(t,-2,to_luastring("searchers",!0))},createclibstable=function(t){lua_newtable(t),lua_createtable(t,0,1),lua_setmetatable(t,-2),lua_rawsetp(t,LUA_REGISTRYINDEX,CLIBS)},luaopen_package=function(t){return createclibstable(t),luaL_newlib(t,pk_funcs),createsearcherstable(t),setpath(t,to_luastring("path",!0),LUA_PATH_VAR,LUA_PATH_DEFAULT),setpath(t,to_luastring("cpath",!0),LUA_CPATH_VAR,LUA_CPATH_DEFAULT),lua_pushliteral(t,LUA_DIRSEP+"\n"+LUA_PATH_SEP+"\n"+LUA_PATH_MARK+"\n"+LUA_EXEC_DIR+"\n"+LUA_IGMARK+"\n"),lua_setfield(t,-2,to_luastring("config",!0)),luaL_getsubtable(t,LUA_REGISTRYINDEX,LUA_LOADED_TABLE),lua_setfield(t,-2,to_luastring("loaded",!0)),luaL_getsubtable(t,LUA_REGISTRYINDEX,LUA_PRELOAD_TABLE),lua_setfield(t,-2,to_luastring("preload",!0)),lua_pushglobaltable(t),lua_pushvalue(t,-2),luaL_setfuncs(t,ll_funcs,1),lua_pop(t,1),1};module.exports.luaopen_package=luaopen_package},function(t,e,r){"use strict";function a(t,e){if("string"==typeof t)t=(0,n.to_luastring)(t);else if(!Array.isArray(t))throw TypeError("expected string or array of bytes");e=e?(0,n.to_luastring)(e):null;var r=x(y,t,null,e),a=void 0;if(a=r===l?new SyntaxError(T(y,-1)):R(y,-1),h(y,1),r!==i)throw a;return a}Object.defineProperty(e,"__esModule",{value:!0}),e.L=e.interop=e.lualib=e.lauxlib=e.lua=e.to_uristring=e.to_luastring=e.to_jsstring=e.luastring_of=e.luastring_indexOf=e.luastring_eq=e.FENGARI_VERSION_RELEASE=e.FENGARI_VERSION_NUM=e.FENGARI_VERSION_MINOR=e.FENGARI_VERSION_MAJOR=e.FENGARI_VERSION=e.FENGARI_RELEASE=e.FENGARI_COPYRIGHT=e.FENGARI_AUTHORS=void 0,e.load=a;var n=r(19),u=r(39),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(u),s=n.lua.LUA_ERRRUN,l=n.lua.LUA_ERRSYNTAX,i=n.lua.LUA_OK,c=n.lua.lua_Debug,_=n.lua.lua_getinfo,f=n.lua.lua_getstack,p=n.lua.lua_gettop,v=n.lua.lua_insert,d=n.lua.lua_pcall,h=n.lua.lua_pop,A=n.lua.lua_pushcfunction,L=n.lua.lua_pushstring,g=n.lua.lua_remove,b=n.lua.lua_setglobal,T=n.lua.lua_tojsstring,x=n.lauxlib.luaL_loadbuffer,k=n.lauxlib.luaL_newstate,O=n.lauxlib.luaL_requiref,m=o.checkjs,E=o.luaopen_js,U=o.push,R=o.tojs;e.FENGARI_AUTHORS=n.FENGARI_AUTHORS,e.FENGARI_COPYRIGHT=n.FENGARI_COPYRIGHT,e.FENGARI_RELEASE=n.FENGARI_RELEASE,e.FENGARI_VERSION=n.FENGARI_VERSION,e.FENGARI_VERSION_MAJOR=n.FENGARI_VERSION_MAJOR,e.FENGARI_VERSION_MINOR=n.FENGARI_VERSION_MINOR,e.FENGARI_VERSION_NUM=n.FENGARI_VERSION_NUM,e.FENGARI_VERSION_RELEASE=n.FENGARI_VERSION_RELEASE,e.luastring_eq=n.luastring_eq,e.luastring_indexOf=n.luastring_indexOf,e.luastring_of=n.luastring_of,e.to_jsstring=n.to_jsstring,e.to_luastring=n.to_luastring,e.to_uristring=n.to_uristring,e.lua=n.lua,e.lauxlib=n.lauxlib,e.lualib=n.lualib,e.interop=o;var y=e.L=k();if(n.lualib.luaL_openlibs(y),O(y,(0,n.to_luastring)("js"),E,1),h(y,1),L(y,(0,n.to_luastring)(n.FENGARI_COPYRIGHT)),b(y,(0,n.to_luastring)("_COPYRIGHT")),"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);else{var N=function(t){switch(t){case"anonymous":return"omit";case"use-credentials":return"include";default:return"same-origin"}},S=function(t){var e=new c;return f(t,2,e)&&_(t,(0,n.to_luastring)("Sl"),e),U(t,new ErrorEvent("error",{bubbles:!0,cancelable:!0,message:T(t,1),error:R(t,1),filename:e.short_src?(0,n.to_jsstring)(e.short_src):void 0,lineno:e.currentline>0?e.currentline:void 0})),1},w=function(t,e,r){var a=x(y,e,null,r),n=void 0;if(a===l){var u=T(y,-1),o=t.src?t.src:document.location,c=new SyntaxError(u,o,void 0);n=new ErrorEvent("error",{message:u,error:c,filename:o,lineno:void 0})}else if(a===i){var _=p(y);A(y,S),v(y,_),Object.defineProperty(document,"currentScript",{value:t,configurable:!0}),a=d(y,0,0,_),delete document.currentScript,g(y,_),a===s&&(n=m(y,-1))}a!==i&&(void 0===n&&(n=new ErrorEvent("error",{message:T(y,-1),error:R(y,-1)})),h(y,1),window.dispatchEvent(n)&&console.error("uncaught exception",n.error))},I=function(t,e,r){if(t.status>=200&&t.status<300){var a=t.response;a="string"==typeof a?(0,n.to_luastring)(t.response):new Uint8Array(a),w(e,a,r)}else e.dispatchEvent(new Event("error"))},M=function(t){if(t.src){var e=(0,n.to_luastring)("@"+t.src);if("complete"===document.readyState||t.async)if("function"==typeof fetch)fetch(t.src,{method:"GET",credentials:N(t.crossorigin),redirect:"follow",integrity:t.integrity}).then(function(t){if(t.ok)return t.arrayBuffer();throw"unable to fetch"}).then(function(r){var a=new Uint8Array(r);w(t,a,e)}).catch(function(e){t.dispatchEvent(new Event("error"))});else{var r=new XMLHttpRequest;r.open("GET",t.src,!0),r.responseType="arraybuffer",r.onreadystatechange=function(){4===r.readyState&&I(r,t,e)},r.send()}else{var a=new XMLHttpRequest;a.open("GET",t.src,!1),a.send(),I(a,t,e)}}else{var u=(0,n.to_luastring)(t.innerHTML),o=t.id?(0,n.to_luastring)("="+t.id):u;w(t,u,o)}},C=/^(.*?\/.*?)([\t ]*;.*)?$/,P=function(t){if("SCRIPT"===t.tagName){var e=C.exec(t.type);if(e){var r=e[1];"application/lua"!==r&&"text/lua"!==r||M(t)}}};new MutationObserver(function(t,e){for(var r=0;r<t.length;r++)for(var a=t[r],n=0;n<a.addedNodes.length;n++)P(a.addedNodes[n])}).observe(document,{childList:!0,subtree:!0});Array.prototype.forEach.call(document.querySelectorAll('script[type^="application/lua"] script[type^="text/lua"]'),P)}},function(t,e,r){"use strict";var a=r(0),n=a.LUA_MULTRET,u=a.LUA_OPADD,o=a.LUA_OPBAND,s=a.LUA_OPBNOT,l=a.LUA_OPBOR,i=a.LUA_OPBXOR,c=a.LUA_OPDIV,_=a.LUA_OPIDIV,f=a.LUA_OPMOD,p=a.LUA_OPSHL,v=a.LUA_OPSHR,d=a.LUA_OPUNM,h=a.constant_types,A=h.LUA_TBOOLEAN,L=h.LUA_TLIGHTUSERDATA,g=h.LUA_TLNGSTR,b=h.LUA_TNIL,T=h.LUA_TNUMFLT,x=h.LUA_TNUMINT,k=h.LUA_TTABLE,O=a.to_luastring,m=r(1),E=m.lua_assert,U=r(20),R=r(4),y=r(15),N=r(22),S=r(8),w=r(14),I=y.OpCodesI,M=R.TValue,C={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},P={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},D=function(t){return t.t!==t.f},K=function(t,e){var r=N.expkind;if(D(t))return!1;switch(t.k){case r.VKINT:return!e||new M(x,t.u.ival);case r.VKFLT:return!e||new M(T,t.u.nval);default:return!1}},V=function(t,e,r){var a=void 0,n=e+r-1;if(t.pc>t.lasttarget&&(a=t.f.code[t.pc-1],a.opcode===I.OP_LOADNIL)){var u=a.A,o=u+a.B;if(u<=e&&e<=o+1||e<=u&&u<=n+1)return u<e&&(e=u),o>n&&(n=o),y.SETARG_A(a,e),void y.SETARG_B(a,n-e)}ut(t,I.OP_LOADNIL,e,r-1,0)},B=function(t,e){return t.f.code[e.u.info]},G=function(t,e){var r=t.f.code[e].sBx;return-1===r?-1:e+1+r},j=function(t,e,r){var a=t.f.code[e],n=r-(e+1);E(-1!==r),Math.abs(n)>y.MAXARG_sBx&&U.luaX_syntaxerror(t.ls,O("control structure too long",!0)),y.SETARG_sBx(a,n)},F=function(t,e,r){if(-1===r)return e;if(-1===e)e=r;else{for(var a=e,n=G(t,a);-1!==n;)a=n,n=G(t,a);j(t,a,r)}return e},H=function(t){var e=t.jpc;t.jpc=-1;var r=st(t,I.OP_JMP,0,-1);return r=F(t,r,e)},X=function(t,e){return rt(t,H(t),e)},z=function(t,e,r){ut(t,I.OP_RETURN,e,r+1,0)},q=function(t,e,r,a,n){return ut(t,e,r,a,n),H(t)},Y=function(t){return t.lasttarget=t.pc,t.pc},Z=function(t,e){return e>=1&&y.testTMode(t.f.code[e-1].opcode)?e-1:e},J=function(t,e){return t.f.code[Z(t,e)]},W=function(t,e,r){var a=Z(t,e),n=t.f.code[a];return n.opcode===I.OP_TESTSET&&(r!==y.NO_REG&&r!==n.B?y.SETARG_A(n,r):t.f.code[a]=y.CREATE_ABC(I.OP_TEST,n.B,0,n.C),!0)},Q=function(t,e){for(;-1!==e;e=G(t,e))W(t,e,y.NO_REG)},$=function(t,e,r,a,n){for(;-1!==e;){var u=G(t,e);W(t,e,a)?j(t,e,r):j(t,e,n),e=u}},tt=function(t){$(t,t.jpc,t.pc,y.NO_REG,t.pc),t.jpc=-1},et=function(t,e){Y(t),t.jpc=F(t,t.jpc,e)},rt=function(t,e,r){r===t.pc?et(t,e):(E(r<t.pc),$(t,e,r,y.NO_REG,r))},at=function(t,e,r){for(r++;-1!==e;e=G(t,e)){var a=t.f.code[e];E(a.opcode===I.OP_JMP&&(0===a.A||a.A>=r)),y.SETARG_A(a,r)}},nt=function(t,e){var r=t.f;return tt(t),r.code[t.pc]=e,r.lineinfo[t.pc]=t.ls.lastline,t.pc++},ut=function(t,e,r,a,n){return E(y.getOpMode(e)===y.iABC),E(y.getBMode(e)!==y.OpArgN||0===a),E(y.getCMode(e)!==y.OpArgN||0===n),E(r<=y.MAXARG_A&&a<=y.MAXARG_B&&n<=y.MAXARG_C),nt(t,y.CREATE_ABC(e,r,a,n))},ot=function(t,e,r,a){return E(y.getOpMode(e)===y.iABx||y.getOpMode(e)===y.iAsBx),E(y.getCMode(e)===y.OpArgN),E(r<=y.MAXARG_A&&a<=y.MAXARG_Bx),nt(t,y.CREATE_ABx(e,r,a))},st=function(t,e,r,a){return ot(t,e,r,a+y.MAXARG_sBx)},lt=function(t,e){return E(e<=y.MAXARG_Ax),nt(t,y.CREATE_Ax(I.OP_EXTRAARG,e))},it=function(t,e,r){if(r<=y.MAXARG_Bx)return ot(t,I.OP_LOADK,e,r);var a=ot(t,I.OP_LOADKX,e,0);return lt(t,r),a},ct=function(t,e){var r=t.freereg+e;r>t.f.maxstacksize&&(r>=255&&U.luaX_syntaxerror(t.ls,O("function or expression needs too many registers",!0)),t.f.maxstacksize=r)},_t=function(t,e){ct(t,e),t.freereg+=e},ft=function(t,e){!y.ISK(e)&&e>=t.nactvar&&(t.freereg--,E(e===t.freereg))},pt=function(t,e){e.k===N.expkind.VNONRELOC&&ft(t,e.u.info)},vt=function(t,e,r){var a=e.k===N.expkind.VNONRELOC?e.u.info:-1,n=r.k===N.expkind.VNONRELOC?r.u.info:-1;a>n?(ft(t,a),ft(t,n)):(ft(t,n),ft(t,a))},dt=function(t,e,r){var a=t.f,n=S.luaH_set(t.L,t.ls.h,e);if(n.ttisinteger()){var u=n.value;if(u<t.nk&&a.k[u].ttype()===r.ttype()&&a.k[u].value===r.value)return u}var o=t.nk;return n.setivalue(o),a.k[o]=r,t.nk++,o},ht=function(t,e){var r=new M(g,e);return dt(t,r,r)},At=function(t,e){var r=new M(L,e),a=new M(x,e);return dt(t,r,a)},Lt=function(t,e){var r=new M(T,e);return dt(t,r,r)},gt=function(t,e){var r=new M(A,e);return dt(t,r,r)},bt=function(t){var e=new M(b,null),r=new M(k,t.ls.h);return dt(t,r,e)},Tt=function(t,e,r){var a=N.expkind;if(e.k===a.VCALL)y.SETARG_C(B(t,e),r+1);else if(e.k===a.VVARARG){var u=B(t,e);y.SETARG_B(u,r+1),y.SETARG_A(u,t.freereg),_t(t,1)}else E(r===n)},xt=function(t,e){Tt(t,e,n)},kt=function(t,e){var r=N.expkind;e.k===r.VCALL?(E(2===B(t,e).C),e.k=r.VNONRELOC,e.u.info=B(t,e).A):e.k===r.VVARARG&&(y.SETARG_B(B(t,e),2),e.k=r.VRELOCABLE)},Ot=function(t,e){var r=N.expkind;switch(e.k){case r.VLOCAL:e.k=r.VNONRELOC;break;case r.VUPVAL:e.u.info=ut(t,I.OP_GETUPVAL,0,e.u.info,0),e.k=r.VRELOCABLE;break;case r.VINDEXED:var a=void 0;ft(t,e.u.ind.idx),e.u.ind.vt===r.VLOCAL?(ft(t,e.u.ind.t),a=I.OP_GETTABLE):(E(e.u.ind.vt===r.VUPVAL),a=I.OP_GETTABUP),e.u.info=ut(t,a,0,e.u.ind.t,e.u.ind.idx),e.k=r.VRELOCABLE;break;case r.VVARARG:case r.VCALL:kt(t,e)}},mt=function(t,e,r,a){return Y(t),ut(t,I.OP_LOADBOOL,e,r,a)},Et=function(t,e,r){var a=N.expkind;switch(Ot(t,e),e.k){case a.VNIL:V(t,r,1);break;case a.VFALSE:case a.VTRUE:ut(t,I.OP_LOADBOOL,r,e.k===a.VTRUE,0);break;case a.VK:it(t,r,e.u.info);break;case a.VKFLT:it(t,r,Lt(t,e.u.nval));break;case a.VKINT:it(t,r,At(t,e.u.ival));break;case a.VRELOCABLE:var n=B(t,e);y.SETARG_A(n,r);break;case a.VNONRELOC:r!==e.u.info&&ut(t,I.OP_MOVE,r,e.u.info,0);break;default:return void E(e.k===a.VJMP)}e.u.info=r,e.k=a.VNONRELOC},Ut=function(t,e){e.k!==N.expkind.VNONRELOC&&(_t(t,1),Et(t,e,t.freereg-1))},Rt=function(t,e){for(;-1!==e;e=G(t,e)){if(J(t,e).opcode!==I.OP_TESTSET)return!0}return!1},yt=function(t,e,r){var a=N.expkind;if(Et(t,e,r),e.k===a.VJMP&&(e.t=F(t,e.t,e.u.info)),D(e)){var n=void 0,u=-1,o=-1;if(Rt(t,e.t)||Rt(t,e.f)){var s=e.k===a.VJMP?-1:H(t);u=mt(t,r,0,1),o=mt(t,r,1,0),et(t,s)}n=Y(t),$(t,e.f,n,r,u),$(t,e.t,n,r,o)}e.f=e.t=-1,e.u.info=r,e.k=a.VNONRELOC},Nt=function(t,e){Ot(t,e),pt(t,e),_t(t,1),yt(t,e,t.freereg-1)},St=function(t,e){if(Ot(t,e),e.k===N.expkind.VNONRELOC){if(!D(e))return e.u.info;if(e.u.info>=t.nactvar)return yt(t,e,e.u.info),e.u.info}return Nt(t,e),e.u.info},wt=function(t,e){(e.k!==N.expkind.VUPVAL||D(e))&&St(t,e)},It=function(t,e){D(e)?St(t,e):Ot(t,e)},Mt=function(t,e){var r=N.expkind,a=!1;switch(It(t,e),e.k){case r.VTRUE:e.u.info=gt(t,!0),a=!0;break;case r.VFALSE:e.u.info=gt(t,!1),a=!0;break;case r.VNIL:e.u.info=bt(t),a=!0;break;case r.VKINT:e.u.info=At(t,e.u.ival),a=!0;break;case r.VKFLT:e.u.info=Lt(t,e.u.nval),a=!0;break;case r.VK:a=!0}return a&&(e.k=r.VK,e.u.info<=y.MAXINDEXRK)?y.RKASK(e.u.info):St(t,e)},Ct=function(t,e,r){var a=N.expkind;switch(e.k){case a.VLOCAL:return pt(t,r),void yt(t,r,e.u.info);case a.VUPVAL:var n=St(t,r);ut(t,I.OP_SETUPVAL,n,e.u.info,0);break;case a.VINDEXED:var u=e.u.ind.vt===a.VLOCAL?I.OP_SETTABLE:I.OP_SETTABUP,o=Mt(t,r);ut(t,u,e.u.ind.t,e.u.ind.idx,o)}pt(t,r)},Pt=function(t,e,r){St(t,e);var a=e.u.info;pt(t,e),e.u.info=t.freereg,e.k=N.expkind.VNONRELOC,_t(t,2),ut(t,I.OP_SELF,e.u.info,a,Mt(t,r)),pt(t,r)},Dt=function(t,e){var r=J(t,e.u.info);E(y.testTMode(r.opcode)&&r.opcode!==I.OP_TESTSET&&r.opcode!==I.OP_TEST),y.SETARG_A(r,!r.A)},Kt=function(t,e,r){if(e.k===N.expkind.VRELOCABLE){var a=B(t,e);if(a.opcode===I.OP_NOT)return t.pc--,q(t,I.OP_TEST,a.B,0,!r)}return Ut(t,e),pt(t,e),q(t,I.OP_TESTSET,y.NO_REG,e.u.info,r)},Vt=function(t,e){var r=N.expkind,a=void 0;switch(Ot(t,e),e.k){case r.VJMP:Dt(t,e),a=e.u.info;break;case r.VK:case r.VKFLT:case r.VKINT:case r.VTRUE:a=-1;break;default:a=Kt(t,e,0)}e.f=F(t,e.f,a),et(t,e.t),e.t=-1},Bt=function(t,e){var r=N.expkind,a=void 0;switch(Ot(t,e),e.k){case r.VJMP:a=e.u.info;break;case r.VNIL:case r.VFALSE:a=-1;break;default:a=Kt(t,e,1)}e.t=F(t,e.t,a),et(t,e.f),e.f=-1},Gt=function(t,e){var r=N.expkind;switch(Ot(t,e),e.k){case r.VNIL:case r.VFALSE:e.k=r.VTRUE;break;case r.VK:case r.VKFLT:case r.VKINT:case r.VTRUE:e.k=r.VFALSE;break;case r.VJMP:Dt(t,e);break;case r.VRELOCABLE:case r.VNONRELOC:Ut(t,e),pt(t,e),e.u.info=ut(t,I.OP_NOT,0,e.u.info,0),e.k=r.VRELOCABLE}var a=e.f;e.f=e.t,e.t=a,Q(t,e.f),Q(t,e.t)},jt=function(t,e,r){var a=N.expkind;E(!D(e)&&(N.vkisinreg(e.k)||e.k===a.VUPVAL)),e.u.ind.t=e.u.info,e.u.ind.idx=Mt(t,r),e.u.ind.vt=e.k===a.VUPVAL?a.VUPVAL:a.VLOCAL,e.k=a.VINDEXED},Ft=function(t,e,r){switch(t){case o:case l:case i:case p:case v:case s:return!1!==w.tointeger(e)&&!1!==w.tointeger(r);case c:case _:case f:return 0!==r.value;default:return 1}},Ht=function(t,e,r){var a=N.expkind,n=void 0,u=void 0;if(!(n=K(e,!0))||!(u=K(r,!0))||!Ft(t,n,u))return 0;var o=new M;if(R.luaO_arith(null,t,n,u,o),o.ttisinteger())e.k=a.VKINT,e.u.ival=o.value;else{var s=o.value;if(isNaN(s)||0===s)return!1;e.k=a.VKFLT,e.u.nval=s}return!0},Xt=function(t,e,r,a){var n=St(t,r);pt(t,r),r.u.info=ut(t,e,0,n,0),r.k=N.expkind.VRELOCABLE,Wt(t,a)},zt=function(t,e,r,a,n){var u=Mt(t,a),o=Mt(t,r);vt(t,r,a),r.u.info=ut(t,e,0,o,u),r.k=N.expkind.VRELOCABLE,Wt(t,n)},qt=function(t,e,r,a){var n=N.expkind,u=void 0;r.k===n.VK?u=y.RKASK(r.u.info):(E(r.k===n.VNONRELOC),u=r.u.info);var o=Mt(t,a);switch(vt(t,r,a),e){case C.OPR_NE:r.u.info=q(t,I.OP_EQ,0,u,o);break;case C.OPR_GT:case C.OPR_GE:var s=e-C.OPR_NE+I.OP_EQ;r.u.info=q(t,s,1,o,u);break;default:var l=e-C.OPR_EQ+I.OP_EQ;r.u.info=q(t,l,1,u,o)}r.k=n.VJMP},Yt=function(t,e,r,a){var n=new N.expdesc;switch(n.k=N.expkind.VKINT,n.u.ival=n.u.nval=n.u.info=0,n.t=-1,n.f=-1,e){case P.OPR_MINUS:case P.OPR_BNOT:if(Ht(e+d,r,n))break;case P.OPR_LEN:Xt(t,e+I.OP_UNM,r,a);break;case P.OPR_NOT:Gt(t,r)}},Zt=function(t,e,r){switch(e){case C.OPR_AND:Vt(t,r);break;case C.OPR_OR:Bt(t,r);break;case C.OPR_CONCAT:Nt(t,r);break;case C.OPR_ADD:case C.OPR_SUB:case C.OPR_MUL:case C.OPR_DIV:case C.OPR_IDIV:case C.OPR_MOD:case C.OPR_POW:case C.OPR_BAND:case C.OPR_BOR:case C.OPR_BXOR:case C.OPR_SHL:case C.OPR_SHR:K(r,!1)||Mt(t,r);break;default:Mt(t,r)}},Jt=function(t,e,r,a,n){var o=N.expkind;switch(e){case C.OPR_AND:E(-1===r.t),Ot(t,a),a.f=F(t,a.f,r.f),r.to(a);break;case C.OPR_OR:E(-1===r.f),Ot(t,a),a.t=F(t,a.t,r.t),r.to(a);break;case C.OPR_CONCAT:It(t,a);var s=B(t,a);a.k===o.VRELOCABLE&&s.opcode===I.OP_CONCAT?(E(r.u.info===s.B-1),pt(t,r),y.SETARG_B(s,r.u.info),r.k=o.VRELOCABLE,r.u.info=a.u.info):(Nt(t,a),zt(t,I.OP_CONCAT,r,a,n));break;case C.OPR_ADD:case C.OPR_SUB:case C.OPR_MUL:case C.OPR_DIV:case C.OPR_IDIV:case C.OPR_MOD:case C.OPR_POW:case C.OPR_BAND:case C.OPR_BOR:case C.OPR_BXOR:case C.OPR_SHL:case C.OPR_SHR:Ht(e+u,r,a)||zt(t,e+I.OP_ADD,r,a,n);break;case C.OPR_EQ:case C.OPR_LT:case C.OPR_LE:case C.OPR_NE:case C.OPR_GT:case C.OPR_GE:qt(t,e,r,a)}return r},Wt=function(t,e){t.f.lineinfo[t.pc-1]=e},Qt=function(t,e,r,a){var u=(r-1)/y.LFIELDS_PER_FLUSH+1,o=a===n?0:a;E(0!==a&&a<=y.LFIELDS_PER_FLUSH),u<=y.MAXARG_C?ut(t,I.OP_SETLIST,e,o,u):u<=y.MAXARG_Ax?(ut(t,I.OP_SETLIST,e,o,0),lt(t,u)):U.luaX_syntaxerror(t.ls,O("constructor too long",!0)),t.freereg=e+1};t.exports.BinOpr=C,t.exports.NO_JUMP=-1,t.exports.UnOpr=P,t.exports.getinstruction=B,t.exports.luaK_checkstack=ct,t.exports.luaK_code=nt,t.exports.luaK_codeABC=ut,t.exports.luaK_codeABx=ot,t.exports.luaK_codeAsBx=st,t.exports.luaK_codek=it,t.exports.luaK_concat=F,t.exports.luaK_dischargevars=Ot,t.exports.luaK_exp2RK=Mt,t.exports.luaK_exp2anyreg=St,t.exports.luaK_exp2anyregup=wt,t.exports.luaK_exp2nextreg=Nt,t.exports.luaK_exp2val=It,t.exports.luaK_fixline=Wt,t.exports.luaK_getlabel=Y,t.exports.luaK_goiffalse=Bt,t.exports.luaK_goiftrue=Vt,t.exports.luaK_indexed=jt,t.exports.luaK_infix=Zt,t.exports.luaK_intK=At,t.exports.luaK_jump=H,t.exports.luaK_jumpto=X,t.exports.luaK_nil=V,t.exports.luaK_numberK=Lt,t.exports.luaK_patchclose=at,t.exports.luaK_patchlist=rt,t.exports.luaK_patchtohere=et,t.exports.luaK_posfix=Jt,t.exports.luaK_prefix=Yt,t.exports.luaK_reserveregs=_t,t.exports.luaK_ret=z,t.exports.luaK_self=Pt,t.exports.luaK_setlist=Qt,t.exports.luaK_setmultret=xt,t.exports.luaK_setoneret=kt,t.exports.luaK_setreturns=Tt,t.exports.luaK_storevar=Ct,t.exports.luaK_stringK=ht},function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),u=r(0),o=u.LUA_SIGNATURE,s=u.char,l=u.constant_types,i=l.LUA_TBOOLEAN,c=l.LUA_TLNGSTR,_=l.LUA_TNIL,f=l.LUA_TNUMFLT,p=l.LUA_TNUMINT,v=l.LUA_TSHRSTR,d=u.thread_status.LUA_ERRSYNTAX,h=u.is_luastring,A=u.luastring_eq,L=u.to_luastring,g=r(7),b=r(11),T=r(4),x=r(15),k=x.MAXARG_sBx,O=x.POS_A,m=x.POS_Ax,E=x.POS_B,U=x.POS_Bx,R=x.POS_C,y=x.POS_OP,N=x.SIZE_A,S=x.SIZE_Ax,w=x.SIZE_B,I=x.SIZE_Bx,M=x.SIZE_C,C=x.SIZE_OP,P=r(1),D=P.lua_assert,K=r(9),V=K.luaS_bless,B=r(18),G=B.luaZ_read,j=B.ZIO,F=[25,147,s["\r"],s["\n"],26,s["\n"]],H=function(){function t(e,r,n){a(this,t),this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,D(r instanceof j,"BytecodeParser only operates on a ZIO"),D(h(n)),n[0]==s["@"]||n[0]==s["="]?this.name=n.subarray(1):n[0]==o.charCodeAt(0)?this.name=L("binary string",!0):this.name=n,this.L=e,this.Z=r,this.arraybuffer=new ArrayBuffer(Math.max(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}return n(t,[{key:"read",value:function(t){var e=new Uint8Array(t);return 0!==G(this.Z,e,0,t)&&this.error("truncated"),e}},{key:"readByte",value:function(){return 0!==G(this.Z,this.u8,0,1)&&this.error("truncated"),this.u8[0]}},{key:"readInteger",value:function(){return 0!==G(this.Z,this.u8,0,this.integerSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}},{key:"readSize_t",value:function(){return this.readInteger()}},{key:"readInt",value:function(){return 0!==G(this.Z,this.u8,0,this.intSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}},{key:"readNumber",value:function(){return 0!==G(this.Z,this.u8,0,this.numberSize)&&this.error("truncated"),this.dv.getFloat64(0,!0)}},{key:"readString",value:function(){var t=Math.max(this.readByte()-1,0);return t+1===255&&(t=this.readSize_t()-1),0===t?null:V(this.L,this.read(t))}},{key:"readInstruction",value:function(){return 0!==G(this.Z,this.u8,0,this.instructionSize)&&this.error("truncated"),this.dv.getUint32(0,!0)}},{key:"readCode",value:function(e){for(var r=this.readInt(),a=t,n=0;n<r;n++){var u=this.readInstruction();e.code[n]={code:u,opcode:u>>y&a.MASK1(C,0),A:u>>O&a.MASK1(N,0),B:u>>E&a.MASK1(w,0),C:u>>R&a.MASK1(M,0),Bx:u>>U&a.MASK1(I,0),Ax:u>>m&a.MASK1(S,0),sBx:(u>>U&a.MASK1(I,0))-k}}}},{key:"readUpvalues",value:function(t){for(var e=this.readInt(),r=0;r<e;r++)t.upvalues[r]={name:null,instack:this.readByte(),idx:this.readByte()}}},{key:"readConstants",value:function(t){for(var e=this.readInt(),r=0;r<e;r++){var a=this.readByte();switch(a){case _:t.k.push(new T.TValue(_,null));break;case i:t.k.push(new T.TValue(i,0!==this.readByte()));break;case f:t.k.push(new T.TValue(f,this.readNumber()));break;case p:t.k.push(new T.TValue(p,this.readInteger()));break;case v:case c:t.k.push(new T.TValue(c,this.readString()));break;default:this.error("unrecognized constant '"+a+"'")}}}},{key:"readProtos",value:function(t){for(var e=this.readInt(),r=0;r<e;r++)t.p[r]=new b.Proto(this.L),this.readFunction(t.p[r],t.source)}},{key:"readDebug",value:function(t){for(var e=this.readInt(),r=0;r<e;r++)t.lineinfo[r]=this.readInt();e=this.readInt();for(var a=0;a<e;a++)t.locvars[a]={varname:this.readString(),startpc:this.readInt(),endpc:this.readInt()};e=this.readInt();for(var n=0;n<e;n++)t.upvalues[n].name=this.readString()}},{key:"readFunction",value:function(t,e){t.source=this.readString(),null===t.source&&(t.source=e),t.linedefined=this.readInt(),t.lastlinedefined=this.readInt(),t.numparams=this.readByte(),t.is_vararg=0!==this.readByte(),t.maxstacksize=this.readByte(),this.readCode(t),this.readConstants(t),this.readUpvalues(t),this.readProtos(t),this.readDebug(t)}},{key:"checkliteral",value:function(t,e){var r=this.read(t.length);A(r,t)||this.error(e)}},{key:"checkHeader",value:function(){this.checkliteral(L(o.substring(1)),"not a"),83!==this.readByte()&&this.error("version mismatch in"),0!==this.readByte()&&this.error("format mismatch in"),this.checkliteral(F,"corrupted"),this.intSize=this.readByte(),this.size_tSize=this.readByte(),this.instructionSize=this.readByte(),this.integerSize=this.readByte(),this.numberSize=this.readByte(),this.checksize(this.intSize,4,"int"),this.checksize(this.size_tSize,4,"size_t"),this.checksize(this.instructionSize,4,"instruction"),this.checksize(this.integerSize,4,"integer"),this.checksize(this.numberSize,8,"number"),22136!==this.readInteger()&&this.error("endianness mismatch in"),370.5!==this.readNumber()&&this.error("float format mismatch in")}},{key:"error",value:function(t){T.luaO_pushfstring(this.L,L("%s: %s precompiled chunk"),this.name,L(t)),g.luaD_throw(this.L,d)}},{key:"checksize",value:function(t,e,r){t!==e&&this.error(r+" size mismatch in")}}],[{key:"MASK1",value:function(t,e){return~(-1<<t)<<e}},{key:"MASK0",value:function(e,r){return~t.MASK1(e,r)}}]),t}(),X=function(t,e,r){var a=new H(t,e,r);a.checkHeader();var n=b.luaF_newLclosure(t,a.readByte());return g.luaD_inctop(t),t.stack[t.top-1].setclLvalue(n),n.p=new b.Proto(t),a.readFunction(n.p,null),D(n.nupvalues===n.p.upvalues.length),n};t.exports.luaU_undump=X},function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=r(0),u=n.LUA_SIGNATURE,o=n.LUA_VERSION_MAJOR,s=n.LUA_VERSION_MINOR,l=n.constant_types,i=l.LUA_TBOOLEAN,c=l.LUA_TLNGSTR,_=l.LUA_TNIL,f=l.LUA_TNUMFLT,p=l.LUA_TNUMINT,v=l.LUA_TSHRSTR,d=n.luastring_of,h=n.to_luastring,A=d(25,147,13,10,26,10),L=16*Number(o)+Number(s),g=function t(){a(this,t),this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN},b=function(t,e,r){0===r.status&&e>0&&(r.status=r.writer(r.L,t,e,r.data))},T=function(t,e){t=h(t),b(t,t.length,e)},x=function(t,e){b(d(t),1,e)},k=function(t,e){var r=new ArrayBuffer(4);new DataView(r).setInt32(0,t,!0);var a=new Uint8Array(r);b(a,4,e)},O=function(t,e){var r=new ArrayBuffer(4);new DataView(r).setInt32(0,t,!0);var a=new Uint8Array(r);b(a,4,e)},m=function(t,e){var r=new ArrayBuffer(8);new DataView(r).setFloat64(0,t,!0);var a=new Uint8Array(r);b(a,8,e)},E=function(t,e){if(null===t)x(0,e);else{var r=t.tsslen()+1,a=t.getstr();r<255?x(r,e):(x(255,e),O(r,e)),b(a,r-1,e)}},U=function(t,e){var r=t.code.map(function(t){return t.code});k(r.length,e);for(var a=0;a<r.length;a++)k(r[a],e)},R=function(t,e){var r=t.k.length;k(r,e);for(var a=0;a<r;a++){var n=t.k[a];switch(x(n.ttype(),e),n.ttype()){case _:break;case i:x(n.value?1:0,e);break;case f:m(n.value,e);break;case p:O(n.value,e);break;case v:case c:E(n.tsvalue(),e)}}},y=function(t,e){var r=t.p.length;k(r,e);for(var a=0;a<r;a++)w(t.p[a],t.source,e)},N=function(t,e){var r=t.upvalues.length;k(r,e);for(var a=0;a<r;a++)x(t.upvalues[a].instack?1:0,e),x(t.upvalues[a].idx,e)},S=function(t,e){var r=e.strip?0:t.lineinfo.length;k(r,e);for(var a=0;a<r;a++)k(t.lineinfo[a],e);r=e.strip?0:t.locvars.length,k(r,e);for(var n=0;n<r;n++)E(t.locvars[n].varname,e),k(t.locvars[n].startpc,e),k(t.locvars[n].endpc,e);r=e.strip?0:t.upvalues.length,k(r,e);for(var u=0;u<r;u++)E(t.upvalues[u].name,e)},w=function(t,e,r){r.strip||t.source===e?E(null,r):E(t.source,r),k(t.linedefined,r),k(t.lastlinedefined,r),x(t.numparams,r),x(t.is_vararg?1:0,r),x(t.maxstacksize,r),U(t,r),R(t,r),N(t,r),y(t,r),S(t,r)},I=function(t){T(u,t),x(L,t),x(0,t),b(A,A.length,t),x(4,t),x(4,t),x(4,t),x(4,t),x(8,t),O(22136,t),m(370.5,t)},M=function(t,e,r,a,n){var u=new g;return u.L=t,u.writer=r,u.data=a,u.strip=n,u.status=0,I(u),x(e.upvalues.length,u),w(e,null,u),u.status};t.exports.luaU_dump=M},function(t,e,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function e(t,c,p){function v(t,e){var r;if(e){if(r=e.getTime(),g){var a=l(e);if(e=new Date(r+a+L),l(e)!==a){var n=l(e);e=new Date(r+n+L)}}}else{var u=Date.now();u>b?(b=u,h=new Date(b),r=b,g&&(h=new Date(b+l(h)+L))):r=b,e=h}return d(t,e,A,r)}function d(t,e,a,l){for(var c="",_=null,f=!1,p=t.length,v=!1,h=0;h<p;h++){var A=t.charCodeAt(h);if(!0!==f)37!==A?c+=t[h]:f=!0;else{if(45===A){_="";continue}if(95===A){_=" ";continue}if(48===A){_="0";continue}if(58===A){v&&i("[WARNING] detected use of unsupported %:: or %::: modifiers to strftime"),v=!0;continue}switch(A){case 37:c+="%";break;case 65:c+=a.days[e.getDay()];break;case 66:c+=a.months[e.getMonth()];break;case 67:c+=r(Math.floor(e.getFullYear()/100),_);break;case 68:c+=d(a.formats.D,e,a,l);break;case 70:c+=d(a.formats.F,e,a,l);break;case 72:c+=r(e.getHours(),_);break;case 73:c+=r(u(e.getHours()),_);break;case 76:c+=n(Math.floor(l%1e3));break;case 77:c+=r(e.getMinutes(),_);break;case 80:c+=e.getHours()<12?a.am:a.pm;break;case 82:c+=d(a.formats.R,e,a,l);break;case 83:c+=r(e.getSeconds(),_);break;case 84:c+=d(a.formats.T,e,a,l);break;case 85:c+=r(o(e,"sunday"),_);break;case 87:c+=r(o(e,"monday"),_);break;case 88:c+=d(a.formats.X,e,a,l);break;case 89:c+=e.getFullYear();break;case 90:if(g&&0===L)c+="GMT";else{var b=e.toString().match(/\(([\w\s]+)\)/);c+=b&&b[1]||""}break;case 97:c+=a.shortDays[e.getDay()];break;case 98:c+=a.shortMonths[e.getMonth()];break;case 99:c+=d(a.formats.c,e,a,l);break;case 100:c+=r(e.getDate(),_);break;case 101:c+=r(e.getDate(),null==_?" ":_);break;case 104:c+=a.shortMonths[e.getMonth()];break;case 106:var T=new Date(e.getFullYear(),0,1),x=Math.ceil((e.getTime()-T.getTime())/864e5);c+=n(x);break;case 107:c+=r(e.getHours(),null==_?" ":_);break;case 108:c+=r(u(e.getHours()),null==_?" ":_);break;case 109:c+=r(e.getMonth()+1,_);break;case 110:c+="\n";break;case 111:var x=e.getDate();a.ordinalSuffixes?c+=String(x)+(a.ordinalSuffixes[x-1]||s(x)):c+=String(x)+s(x);break;case 112:c+=e.getHours()<12?a.AM:a.PM;break;case 114:c+=d(a.formats.r,e,a,l);break;case 115:c+=Math.floor(l/1e3);break;case 116:c+="\t";break;case 117:var x=e.getDay();c+=0===x?7:x;break;case 118:c+=d(a.formats.v,e,a,l);break;case 119:c+=e.getDay();break;case 120:c+=d(a.formats.x,e,a,l);break;case 121:c+=(""+e.getFullYear()).slice(2);break;case 122:if(g&&0===L)c+=v?"+00:00":"+0000";else{var k;k=0!==L?L/6e4:-e.getTimezoneOffset();var O=k<0?"-":"+",m=v?":":"",E=Math.floor(Math.abs(k/60)),U=Math.abs(k%60);c+=O+r(E)+m+r(U)}break;default:f&&(c+="%"),c+=t[h]}_=null,f=!1}}return c}var h,A=t||f,L=c||0,g=p||!1,b=0,T=v;return T.localize=function(t){return new e(t||A,L,g)},T.localizeByIdentifier=function(t){var e=_[t];return e?T.localize(e):(i('[WARNING] No locale found with identifier "'+t+'".'),T)},T.timezone=function(t){var r=L,n=g,u=void 0===t?"undefined":a(t);if("number"===u||"string"===u)if(n=!0,"string"===u){var o="-"===t[0]?-1:1,s=parseInt(t.slice(1,3),10),l=parseInt(t.slice(3,5),10);r=o*(60*s+l)*60*1e3}else"number"===u&&(r=60*t*1e3);return new e(A,r,n)},T.utc=function(){return new e(A,L,!0)},T}function r(t,e){return""===e||t>9?t:(null==e&&(e="0"),e+t)}function n(t){return t>99?t:t>9?"0"+t:"00"+t}function u(t){return 0===t?12:t>12?t-12:t}function o(t,e){e=e||"sunday";var r=t.getDay();"monday"===e&&(0===r?r=6:r--);var a=Date.UTC(t.getFullYear(),0,1),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),u=Math.floor((n-a)/864e5),o=(u+7-r)/7;return Math.floor(o)}function s(t){var e=t%10,r=t%100;if(r>=11&&r<=13||0===e||e>=4)return"th";switch(e){case 1:return"st";case 2:return"nd";case 3:return"rd"}}function l(t){return 6e4*(t.getTimezoneOffset()||0)}function i(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}var c,_={de_DE:{days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d.%m.%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},en_CA:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ordinalSuffixes:["st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","st","nd","rd","th","th","th","th","th","th","th","st"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}},en_US:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ordinalSuffixes:["st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","st","nd","rd","th","th","th","th","th","th","th","st"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%m/%d/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}},es_MX:{days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre"," diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},fr_FR:{days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avril","mai","juin","juil.","août","sept.","oct.","nov.","déc."],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},it_IT:{days:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"],shortDays:["dom","lun","mar","mer","gio","ven","sab"],months:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],shortMonths:["pr","mag","giu","lug","ago","set","ott","nov","dic"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},nl_NL:{days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},pt_BR:{days:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},ru_RU:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],shortDays:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X",D:"%d.%m.%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},tr_TR:{days:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],shortDays:["Paz","Pzt","Sal","Çrş","Prş","Cum","Cts"],months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],shortMonths:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],AM:"ÖÖ",PM:"ÖS",am:"ÖÖ",pm:"ÖS",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},zh_CN:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["日","一","二","三","四","五","六"],months:["一月份","二月份","三月份","四月份","五月份","六月份","七月份","八月份","九月份","十月份","十一月份","十二月份"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],AM:"上午",PM:"下午",am:"上午",pm:"下午",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}}},f=_.en_US,p=new e(f,0,!1),v=void 0!==t;v?c=t.exports=p:(c=function(){return this||(0,eval)("this")}(),c.strftime=p),"function"!=typeof Date.now&&(Date.now=function(){return+new Date})}()},function(t,e,r){"use strict";var a;!function(){function n(t){return o(s(t),arguments)}function u(t,e){return n.apply(null,[t].concat(e||[]))}function o(t,e){var r,a,u,o,s,i,c,_,f,p=1,v=t.length,d="";for(a=0;a<v;a++)if("string"==typeof t[a])d+=t[a];else if(Array.isArray(t[a])){if(o=t[a],o[2])for(r=e[p],u=0;u<o[2].length;u++){if(!r.hasOwnProperty(o[2][u]))throw new Error(n('[sprintf] property "%s" does not exist',o[2][u]));r=r[o[2][u]]}else r=o[1]?e[o[1]]:e[p++];if(l.not_type.test(o[8])&&l.not_primitive.test(o[8])&&r instanceof Function&&(r=r()),l.numeric_arg.test(o[8])&&"number"!=typeof r&&isNaN(r))throw new TypeError(n("[sprintf] expecting number but found %T",r));switch(l.number.test(o[8])&&(_=r>=0),o[8]){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,o[6]?parseInt(o[6]):0);break;case"e":r=o[7]?parseFloat(r).toExponential(o[7]):parseFloat(r).toExponential();break;case"f":r=o[7]?parseFloat(r).toFixed(o[7]):parseFloat(r);break;case"g":r=o[7]?String(Number(r.toPrecision(o[7]))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=o[7]?r.substring(0,o[7]):r;break;case"t":r=String(!!r),r=o[7]?r.substring(0,o[7]):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=o[7]?r.substring(0,o[7]):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=o[7]?r.substring(0,o[7]):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}l.json.test(o[8])?d+=r:(!l.number.test(o[8])||_&&!o[3]?f="":(f=_?"+":"-",r=r.toString().replace(l.sign,"")),i=o[4]?"0"===o[4]?"0":o[4].charAt(1):" ",c=o[6]-(f+r).length,s=o[6]&&c>0?i.repeat(c):"",d+=o[5]?f+r+s:"0"===i?f+s+r:s+f+r)}return d}function s(t){if(i[t])return i[t];for(var e,r=t,a=[],n=0;r;){if(null!==(e=l.text.exec(r)))a.push(e[0]);else if(null!==(e=l.modulo.exec(r)))a.push("%");else{if(null===(e=l.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){n|=1;var u=[],o=e[2],s=[];if(null===(s=l.key.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(u.push(s[1]);""!==(o=o.substring(s[0].length));)if(null!==(s=l.key_access.exec(o)))u.push(s[1]);else{if(null===(s=l.index_access.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");u.push(s[1])}e[2]=u}else n|=2;if(3===n)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");a.push(e)}r=r.substring(e[0].length)}return i[t]=a}var l={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/},i=Object.create(null);e.sprintf=n,e.vsprintf=u,"undefined"!=typeof window&&(window.sprintf=n,window.vsprintf=u,void 0!==(a=function(){return{sprintf:n,vsprintf:u}}.call(e,r,e,t))&&(t.exports=a))}()},function(t,e,r){"use strict";var a=r(2),n=a.lua_pop,u=r(5),o=u.luaL_requiref,s=r(3),l=s.to_luastring,i={},c=function(t){for(var e in i)o(t,l(e),i[e],1),n(t,1)};t.exports.luaL_openlibs=c;var _=r(16),f=r(38),p=f.luaopen_base,v=r(23),d=v.luaopen_coroutine,h=r(29),A=h.luaopen_debug,L=r(28),g=L.luaopen_math,b=r(30),T=b.luaopen_package,x=r(25),k=x.luaopen_os,O=r(26),m=O.luaopen_string,E=r(24),U=E.luaopen_table,R=r(27),y=R.luaopen_utf8;i._G=p,i[_.LUA_LOADLIBNAME]=T,i[_.LUA_COLIBNAME]=d,i[_.LUA_TABLIBNAME]=U,i[_.LUA_OSLIBNAME]=k,i[_.LUA_STRLIBNAME]=m,i[_.LUA_MATHLIBNAME]=g,i[_.LUA_UTF8LIBNAME]=y,i[_.LUA_DBLIBNAME]=A},function(t,e,r){"use strict";var a=r(2),n=a.LUA_MULTRET,u=a.LUA_OK,o=a.LUA_TFUNCTION,s=a.LUA_TNIL,l=a.LUA_TNONE,i=a.LUA_TNUMBER,c=a.LUA_TSTRING,_=a.LUA_TTABLE,f=a.LUA_VERSION,p=a.LUA_YIELD,v=a.lua_call,d=a.lua_callk,h=a.lua_concat,A=a.lua_error,L=a.lua_getglobal,g=a.lua_geti,b=a.lua_getmetatable,T=a.lua_gettop,x=a.lua_insert,k=a.lua_isnil,O=a.lua_isnone,m=a.lua_isstring,E=a.lua_load,U=a.lua_next,R=a.lua_pcallk,y=a.lua_pop,N=a.lua_pushboolean,S=a.lua_pushcfunction,w=a.lua_pushglobaltable,I=a.lua_pushinteger,M=a.lua_pushliteral,C=a.lua_pushnil,P=a.lua_pushstring,D=a.lua_pushvalue,K=a.lua_rawequal,V=a.lua_rawget,B=a.lua_rawlen,G=a.lua_rawset,j=a.lua_remove,F=a.lua_replace,H=a.lua_rotate,X=a.lua_setfield,z=a.lua_setmetatable,q=a.lua_settop,Y=a.lua_setupvalue,Z=a.lua_stringtonumber,J=a.lua_toboolean,W=a.lua_tolstring,Q=a.lua_tostring,$=a.lua_type,tt=a.lua_typename,et=r(5),rt=et.luaL_argcheck,at=et.luaL_checkany,nt=et.luaL_checkinteger,ut=et.luaL_checkoption,ot=et.luaL_checkstack,st=et.luaL_checktype,lt=et.luaL_error,it=et.luaL_getmetafield,ct=et.luaL_loadbufferx,_t=et.luaL_loadfile,ft=et.luaL_loadfilex,pt=et.luaL_optinteger,vt=et.luaL_optstring,dt=et.luaL_setfuncs,ht=et.luaL_tolstring,At=et.luaL_where,Lt=r(3),gt=Lt.to_jsstring,bt=Lt.to_luastring,Tt=void 0,xt=void 0;if("function"==typeof TextDecoder){var kt="",Ot=new TextDecoder("utf-8");Tt=function(t){kt+=Ot.decode(t,{stream:!0})};var mt=new Uint8Array(0);xt=function(){kt+=Ot.decode(mt),console.log(kt),kt=""}}else{var Et=[];Tt=function(t){try{t=gt(t)}catch(r){var e=new Uint8Array(t.length);e.set(t),t=e}Et.push(t)},xt=function(){console.log.apply(console.log,Et),Et=[]}}var Ut=function(t){var e=T(t);L(t,bt("tostring",!0));for(var r=1;r<=e;r++){D(t,-1),D(t,r),v(t,1,1);var a=W(t,-1);if(null===a)return lt(t,bt("'tostring' must return a string to 'print'",!0));r>1&&Tt(bt("\t")),Tt(a),y(t,1)}return xt(),0},Rt=function(t){return at(t,1),ht(t,1),1},yt=function(t){return at(t,1),b(t,1)?(it(t,1,bt("__metatable",!0)),1):(C(t),1)},Nt=function(t){var e=$(t,2);return st(t,1,_),rt(t,e===s||e===_,2,bt("nil or table expected",!0)),it(t,1,bt("__metatable",!0))!==s?lt(t,bt("cannot change a protected metatable",!0)):(q(t,2),z(t,1),1)},St=function(t){return at(t,1),at(t,2),N(t,K(t,1,2)),1},wt=function(t){var e=$(t,1);return rt(t,e===_||e===c,1,bt("table or string expected",!0)),I(t,B(t,1)),1},It=function(t){return st(t,1,_),at(t,2),q(t,2),V(t,1),1},Mt=function(t){return st(t,1,_),at(t,2),at(t,3),q(t,3),G(t,1),1},Ct=["stop","restart","collect","count","step","setpause","setstepmul","isrunning"].map(function(t){return bt(t)}),Pt=function(t){ut(t,1,bt("collect"),Ct),pt(t,2,0),lt(t,bt("lua_gc not implemented"))},Dt=function(t){var e=$(t,1);return rt(t,e!==l,1,bt("value expected",!0)),P(t,tt(t,e)),1},Kt=function(t,e,r,a){return at(t,1),it(t,1,e)===s?(S(t,a),D(t,1),r?I(t,0):C(t)):(D(t,1),v(t,1,3)),3},Vt=function(t){return st(t,1,_),q(t,2),U(t,1)?2:(C(t),1)},Bt=function(t){return Kt(t,bt("__pairs",!0),0,Vt)},Gt=function(t){var e=nt(t,2)+1;return I(t,e),g(t,1,e)===s?1:2},jt=function(t){return at(t,1),S(t,Gt),D(t,1),I(t,0),3},Ft=function(t,e){try{t=gt(t)}catch(t){return null}var r=/^[\t\v\f \n\r]*([+-]?)0*([0-9A-Za-z]+)[\t\v\f \n\r]*$/.exec(t);if(!r)return null;for(var a="-"===r[1],n=r[2],u=0,o=0;o<n.length;o++){var s=/\d/.test(n[o])?n.charCodeAt(o)-"0".charCodeAt(0):n[o].toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+10;if(s>=e)return null;u=(u*e|0)+s}return 0|(a?-u:u)},Ht=function(t){if($(t,2)<=0){if(at(t,1),$(t,1)===i)return q(t,1),1;var e=Q(t,1);if(null!==e&&Z(t,e)===e.length+1)return 1}else{var r=nt(t,2);st(t,1,c);var a=Q(t,1);rt(t,2<=r&&r<=36,2,bt("base out of range",!0));var n=Ft(a,r);if(null!==n)return I(t,n),1}return C(t),1},Xt=function(t){var e=pt(t,2,1);return q(t,1),$(t,1)===c&&e>0&&(At(t,e),D(t,1),h(t,2)),A(t)},zt=function(t){return J(t,1)?T(t):(at(t,1),j(t,1),M(t,"assertion failed!"),q(t,1),Xt(t))},qt=function(t){var e=T(t);if($(t,1)===c&&Q(t,1)[0]==="#".charCodeAt(0))return I(t,e-1),1;var r=nt(t,1);return r<0?r=e+r:r>e&&(r=e),rt(t,1<=r,1,bt("index out of range",!0)),e-r},Yt=function(t,e,r){return e!==u&&e!==p?(N(t,0),D(t,-2),2):T(t)-r},Zt=function(t){at(t,1),N(t,1),x(t,1);var e=R(t,T(t)-2,n,0,0,Yt);return Yt(t,e,0)},Jt=function(t){var e=T(t);st(t,2,o),N(t,1),D(t,1),H(t,3,2);var r=R(t,e-2,n,2,2,Yt);return Yt(t,r,2)},Wt=function(t,e,r){return e===u?(0!==r&&(D(t,r),Y(t,-2,1)||y(t,1)),1):(C(t),x(t,-2),2)},Qt=function(t,e){return ot(t,2,bt("too many nested functions",!0)),D(t,1),v(t,0,1),k(t,-1)?(y(t,1),null):(m(t,-1)||lt(t,bt("reader function must return a string",!0)),F(t,5),Q(t,5))},$t=function(t){var e=Q(t,1),r=vt(t,3,bt("bt",!0)),a=O(t,4)?0:4,n=void 0;if(null!==e){var u=vt(t,2,e);n=ct(t,e,e.length,u,r)}else{var s=vt(t,2,bt("=(load)",!0));st(t,1,o),q(t,5),n=E(t,Qt,null,s,r)}return Wt(t,n,a)},te=function(t){var e=vt(t,1,null),r=vt(t,2,null),a=O(t,3)?0:3,n=ft(t,e,r);return Wt(t,n,a)},ee=function(t,e,r){return T(t)-1},re=function(t){var e=vt(t,1,null);return q(t,1),_t(t,e)!==u?A(t):(d(t,0,n,0,ee),ee(t))},ae={assert:zt,collectgarbage:Pt,dofile:re,error:Xt,getmetatable:yt,ipairs:jt,load:$t,loadfile:te,next:Vt,pairs:Bt,pcall:Zt,print:Ut,rawequal:St,rawget:It,rawlen:wt,rawset:Mt,select:qt,setmetatable:Nt,tonumber:Ht,tostring:Rt,type:Dt,xpcall:Jt},ne=function(t){return w(t),dt(t,ae,0),D(t,-1),X(t,-2,bt("_G",!0)),M(t,f),X(t,-2,bt("_VERSION",!0)),1};t.exports.luaopen_base=ne},function(module,exports,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_require=__webpack_require__(19),lua=_require.lua,lauxlib=_require.lauxlib,lualib=_require.lualib,to_luastring=_require.to_luastring,LUA_MULTRET=lua.LUA_MULTRET,LUA_OK=lua.LUA_OK,LUA_REGISTRYINDEX=lua.LUA_REGISTRYINDEX,LUA_RIDX_MAINTHREAD=lua.LUA_RIDX_MAINTHREAD,LUA_TBOOLEAN=lua.LUA_TBOOLEAN,LUA_TFUNCTION=lua.LUA_TFUNCTION,LUA_TLIGHTUSERDATA=lua.LUA_TLIGHTUSERDATA,LUA_TNIL=lua.LUA_TNIL,LUA_TNONE=lua.LUA_TNONE,LUA_TNUMBER=lua.LUA_TNUMBER,LUA_TSTRING=lua.LUA_TSTRING,LUA_TTABLE=lua.LUA_TTABLE,LUA_TTHREAD=lua.LUA_TTHREAD,LUA_TUSERDATA=lua.LUA_TUSERDATA,lua_atnativeerror=lua.lua_atnativeerror,lua_getfield=lua.lua_getfield,lua_gettable=lua.lua_gettable,lua_gettop=lua.lua_gettop,lua_isnil=lua.lua_isnil,lua_isproxy=lua.lua_isproxy,lua_newuserdata=lua.lua_newuserdata,lua_pcall=lua.lua_pcall,lua_pop=lua.lua_pop,lua_pushboolean=lua.lua_pushboolean,lua_pushcfunction=lua.lua_pushcfunction,lua_pushlightuserdata=lua.lua_pushlightuserdata,lua_pushliteral=lua.lua_pushliteral,lua_pushnil=lua.lua_pushnil,lua_pushnumber=lua.lua_pushnumber,lua_pushstring=lua.lua_pushstring,lua_pushvalue=lua.lua_pushvalue,lua_rawgeti=lua.lua_rawgeti,lua_rawgetp=lua.lua_rawgetp,lua_rawsetp=lua.lua_rawsetp,lua_remove=lua.lua_remove,lua_rotate=lua.lua_rotate,lua_setfield=lua.lua_setfield,lua_settable=lua.lua_settable,lua_settop=lua.lua_settop,lua_toboolean=lua.lua_toboolean,lua_tojsstring=lua.lua_tojsstring,lua_tonumber=lua.lua_tonumber,lua_toproxy=lua.lua_toproxy,lua_tothread=lua.lua_tothread,lua_touserdata=lua.lua_touserdata,lua_type=lua.lua_type,luaL_argerror=lauxlib.luaL_argerror,luaL_checkany=lauxlib.luaL_checkany,luaL_checkoption=lauxlib.luaL_checkoption,luaL_checkstack=lauxlib.luaL_checkstack,luaL_checkudata=lauxlib.luaL_checkudata,luaL_error=lauxlib.luaL_error,luaL_getmetafield=lauxlib.luaL_getmetafield,luaL_newlib=lauxlib.luaL_newlib,luaL_newmetatable=lauxlib.luaL_newmetatable,luaL_requiref=lauxlib.luaL_requiref,luaL_setfuncs=lauxlib.luaL_setfuncs,luaL_setmetatable=lauxlib.luaL_setmetatable,luaL_testudata=lauxlib.luaL_testudata,luaL_tolstring=lauxlib.luaL_tolstring,luaopen_base=lualib.luaopen_base,custom_inspect_symbol=void 0,global_env=function(){return"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:eval("this")}(),apply=void 0,construct=void 0;if("undefined"!=typeof Reflect)apply=Reflect.apply,construct=Reflect.construct;else{var fApply=Function.apply,bind=Function.bind;apply=function(t,e,r){return fApply.call(t,e,r)},construct=function(t,e){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(bind.apply(t,r))}}var toString=function(t){return""+t},isobject=function(t){return"object"===(void 0===t?"undefined":_typeof(t))?null!==t:"function"==typeof t},js_tname=to_luastring("js object"),testjs=function(t,e){var r=luaL_testudata(t,e,js_tname);return r?r.data:void 0},checkjs=function(t,e){return luaL_checkudata(t,e,js_tname).data},pushjs=function(t,e){lua_newuserdata(t).data=e,luaL_setmetatable(t,js_tname)},getmainthread=function(t){lua_rawgeti(t,LUA_REGISTRYINDEX,LUA_RIDX_MAINTHREAD);var e=lua_tothread(t,-1);return lua_pop(t,1),e},states=new WeakMap,push=function(t,e){switch(void 0===e?"undefined":_typeof(e)){case"undefined":lua_pushnil(t);break;case"number":lua_pushnumber(t,e);break;case"string":lua_pushstring(t,to_luastring(e));break;case"boolean":lua_pushboolean(t,e);break;case"symbol":lua_pushlightuserdata(t,e);break;case"function":if(lua_isproxy(e,t)){e(t);break}case"object":if(null===e){if(lua_rawgetp(t,LUA_REGISTRYINDEX,null)!==LUA_TUSERDATA)throw Error("js library not loaded into lua_State");break}default:var r=states.get(getmainthread(t));if(!r)throw Error("js library not loaded into lua_State");var a=r.get(e);a?a(t):(pushjs(t,e),a=lua_toproxy(t,-1),r.set(e,a))}},atnativeerror=function(t){var e=lua_touserdata(t,1);return push(t,e),1},tojs=function(t,e){switch(lua_type(t,e)){case LUA_TNONE:case LUA_TNIL:return;case LUA_TBOOLEAN:return lua_toboolean(t,e);case LUA_TLIGHTUSERDATA:return lua_touserdata(t,e);case LUA_TNUMBER:return lua_tonumber(t,e);case LUA_TSTRING:return lua_tojsstring(t,e);case LUA_TUSERDATA:var r=testjs(t,e);if(void 0!==r)return r;case LUA_TTABLE:case LUA_TFUNCTION:case LUA_TTHREAD:default:return wrap(t,lua_toproxy(t,e))}},jscall=function(t,e){var r=lua_pcall(t,e,1,0),a=tojs(t,-1);switch(lua_pop(t,1),r){case LUA_OK:return a;default:throw a}},invoke=function(t,e,r,a,n){luaL_checkstack(t,2+a.length,null),void 0!==n&&null!==n||(n=LUA_MULTRET);var u=lua_gettop(t);e(t),push(t,r);for(var o=0;o<a.length;o++)push(t,a[o]);switch(lua_pcall(t,1+a.length,n,0)){case LUA_OK:for(var s=lua_gettop(t)-u,l=new Array(s),i=0;i<s;i++)l[i]=tojs(t,u+i+1);return lua_settop(t,u),l;default:var c=tojs(t,-1);throw lua_settop(t,u),c}},gettable=function(t){return lua_gettable(t,1),1},_get=function(t,e,r){return luaL_checkstack(t,3,null),lua_pushcfunction(t,gettable),e(t),push(t,r),jscall(t,2)},_has=function(t,e,r){switch(luaL_checkstack(t,3,null),lua_pushcfunction(t,gettable),e(t),push(t,r),lua_pcall(t,2,1,0)){case LUA_OK:var a=lua_isnil(t,-1);return lua_pop(t,1),!a;default:var n=tojs(t,-1);throw lua_pop(t,1),n}},_set=function(t,e,r,a){switch(luaL_checkstack(t,4,null),lua_pushcfunction(t,function(t){return lua_settable(t,1),0}),e(t),push(t,r),push(t,a),lua_pcall(t,3,0,0)){case LUA_OK:return;default:var n=tojs(t,-1);throw lua_pop(t,1),n}},_deleteProperty=function(t,e,r){switch(luaL_checkstack(t,4,null),lua_pushcfunction(t,function(t){return lua_settable(t,1),0}),e(t),push(t,r),lua_pushnil(t),lua_pcall(t,3,0,0)){case LUA_OK:return;default:var a=tojs(t,-1);throw lua_pop(t,1),a}},tostring=function(t,e){return luaL_checkstack(t,2,null),lua_pushcfunction(t,function(t){return luaL_tolstring(t,1),1}),e(t),jscall(t,1)},iter_next=function(){var t=this.L;luaL_checkstack(t,3,null);var e=lua_gettop(t);switch(this.iter(t),this.state(t),this.last(t),lua_pcall(t,2,LUA_MULTRET,0)){case LUA_OK:this.last=lua_toproxy(t,e+1);var r=void 0;if(lua_isnil(t,-1))r={done:!0,value:void 0};else{for(var a=lua_gettop(t)-e,n=new Array(a),u=0;u<a;u++)n[u]=tojs(t,e+u+1);r={done:!1,value:n}}return lua_settop(t,e),r;default:var o=tojs(t,-1);throw lua_pop(t,1),o}},jsiterator=function(t,e){switch(luaL_checkstack(this.L,2,null),luaL_requiref(t,to_luastring("_G"),luaopen_base,0),lua_getfield(t,-1,to_luastring("pairs")),lua_remove(t,-2),e(t),lua_pcall(t,1,3,0)){case LUA_OK:var r=lua_toproxy(t,-3),a=lua_toproxy(t,-2),n=lua_toproxy(t,-1);return lua_pop(t,3),{L:t,iter:r,state:a,last:n,next:iter_next};default:var u=tojs(t,-1);throw lua_pop(t,1),u}},wrap=function(t,e){var r=getmainthread(t),a=function(){return invoke(r,e,this,arguments,1)[0]};a.apply=function(t,a){return invoke(r,e,t,a,1)[0]},a.invoke=function(t,a){return invoke(r,e,t,a,LUA_MULTRET)},a.get=function(t){return _get(r,e,t)},a.has=function(t){return _has(r,e,t)},a.set=function(t,a){return _set(r,e,t,a)},a.delete=function(t){return _deleteProperty(r,e,t)},a.toString=function(){return tostring(r,e)},"function"==typeof Symbol&&(a[Symbol.toStringTag]="Fengari object",a[Symbol.iterator]=function(){return jsiterator(r,e)},Symbol.toPrimitive&&(a[Symbol.toPrimitive]=function(t){if("string"===t)return tostring(r,e)})),custom_inspect_symbol&&(a[custom_inspect_symbol]=a.toString);var n=states.get(r);if(!n)throw Error("js library not loaded into lua_State");return n.set(a,e),a},jslib={new:function(t){for(var e=tojs(t,1),r=lua_gettop(t)-1,a=new Array(r),n=0;n<r;n++)a[n]=tojs(t,n+2);return push(t,construct(e,a)),1},tonumber:function(t){var e=tojs(t,1);return lua_pushnumber(t,+e),1},instanceof:function(t){var e=tojs(t,1),r=tojs(t,2);return lua_pushboolean(t,e instanceof r),1},typeof:function t(e){var r=tojs(e,1);return lua_pushliteral(e,void 0===r?"undefined":t(r)),1}};if("function"==typeof Symbol&&Symbol.iterator){var get_iterator=function(t,e){var r=checkjs(t,e),a=r[Symbol.iterator];a||luaL_argerror(t,e,to_luastring("object not iterable"));var n=apply(a,r,[]);return isobject(n)||luaL_argerror(t,e,to_luastring("Result of the Symbol.iterator method is not an object")),n},next=function(t){var e=tojs(t,1),r=e.next();return r.done?0:(push(t,r.value),1)};jslib.of=function(t){var e=get_iterator(t,1);return lua_pushcfunction(t,next),push(t,e),2}}if("function"==typeof Proxy&&"function"==typeof Symbol){var L_symbol=Symbol("lua_State"),p_symbol=Symbol("fengari-proxy"),proxy_handlers={apply:function(t,e,r){return invoke(t[L_symbol],t[p_symbol],e,r,1)[0]},construct:function(t,e){var r=t[L_symbol],a=t[p_symbol],n=e.length;luaL_checkstack(r,2+n,null),a(r);var u=lua_gettop(r);if(luaL_getmetafield(r,u,to_luastring("construct"))===LUA_TNIL)throw lua_pop(r,1),new TypeError("not a constructor");lua_rotate(r,u,1);for(var o=0;o<n;o++)push(r,e[o]);return jscall(r,1+n)},defineProperty:function(t,e,r){var a=t[L_symbol],n=t[p_symbol];return luaL_checkstack(a,4,null),n(a),luaL_getmetafield(a,-1,to_luastring("defineProperty"))===LUA_TNIL?(lua_pop(a,1),!1):(lua_rotate(a,-2,1),push(a,e),push(a,r),jscall(a,3))},deleteProperty:function(t,e){return _deleteProperty(t[L_symbol],t[p_symbol],e)},get:function(t,e){return _get(t[L_symbol],t[p_symbol],e)},getOwnPropertyDescriptor:function(t,e){var r=t[L_symbol],a=t[p_symbol];return luaL_checkstack(r,3,null),a(r),luaL_getmetafield(r,-1,to_luastring("getOwnPropertyDescriptor"))===LUA_TNIL?void lua_pop(r,1):(lua_rotate(r,-2,1),push(r,e),jscall(r,2))},getPrototypeOf:function(t){var e=t[L_symbol],r=t[p_symbol];return luaL_checkstack(e,2,null),r(e),luaL_getmetafield(e,-1,to_luastring("getPrototypeOf"))===LUA_TNIL?(lua_pop(e,1),null):(lua_rotate(e,-2,1),jscall(e,1))},has:function(t,e){return _has(t[L_symbol],t[p_symbol],e)},ownKeys:function(t){var e=t[L_symbol],r=t[p_symbol];return luaL_checkstack(e,2,null),r(e),luaL_getmetafield(e,-1,to_luastring("ownKeys"))===LUA_TNIL?void lua_pop(e,1):(lua_rotate(e,-2,1),jscall(e,1))},set:function(t,e,r){return _set(t[L_symbol],t[p_symbol],e,r)},setPrototypeOf:function(t,e){var r=t[L_symbol],a=t[p_symbol];return luaL_checkstack(r,3,null),a(r),luaL_getmetafield(r,-1,to_luastring("setPrototypeOf"))===LUA_TNIL?(lua_pop(r,1),!1):(lua_rotate(r,-2,1),push(r,e),jscall(r,2))}},make_arrow_function=Function("return ()=>void 0;"),raw_function=function(){var t=make_arrow_function();return delete t.length,delete t.name,t},createproxy=function(t,e,r){var a=getmainthread(t),n=void 0;switch(r){case"function":n=raw_function();break;case"object":n={};break;default:throw TypeError("invalid type to createproxy")}return n[p_symbol]=e,n[L_symbol]=a,new Proxy(n,proxy_handlers)},valid_types=["function","object"],valid_types_as_luastring=valid_types.map(function(t){return to_luastring(t)});jslib.createproxy=function(t){luaL_checkany(t,1);var e=valid_types[luaL_checkoption(t,2,valid_types_as_luastring[0],valid_types_as_luastring)],r=createproxy(t,lua_toproxy(t,1),e);return push(t,r),1}}var jsmt={__index:function(t){var e=checkjs(t,1),r=tojs(t,2);return push(t,e[r]),1},__newindex:function(t){var e=checkjs(t,1),r=tojs(t,2),a=tojs(t,3);return void 0===a?delete e[r]:e[r]=a,0},__tostring:function(t){var e=checkjs(t,1),r=toString(e);return lua_pushstring(t,to_luastring(r)),1},__call:function(t){var e=checkjs(t,1),r=lua_gettop(t)-1,a=void 0,n=new Array(Math.max(0,r-1));if(r>0&&(a=tojs(t,2),r-- >0))for(var u=0;u<r;u++)n[u]=tojs(t,u+3);return push(t,apply(e,a,n)),1},__pairs:function(t){var e=checkjs(t,1),r=void 0;"function"==typeof Symbol&&void 0!==(r=e[Symbol.for("__pairs")])||luaL_argerror(t,1,to_luastring("js object has no __pairs Symbol"));var a=apply(r,e,[]);void 0===a&&luaL_error(t,to_luastring("bad '__pairs' result (object with keys 'iter', 'state', 'first' expected)"));var n=a.iter;return void 0===n&&luaL_error(t,to_luastring("bad '__pairs' result (object.iter is missing)")),lua_pushcfunction(t,function(){var e=tojs(t,1),r=tojs(t,2),a=n.call(e,r);if(void 0===a)return 0;Array.isArray(a)||luaL_error(t,to_luastring("bad iterator result (Array or undefined expected)")),luaL_checkstack(t,a.length,null);for(var u=0;u<a.length;u++)push(t,a[u]);return a.length}),push(t,a.state),push(t,a.first),3},__len:function(t){var e=checkjs(t,1),r=void 0;"function"==typeof Symbol&&void 0!==(r=e[Symbol.for("__len")])||luaL_argerror(t,1,to_luastring("js object has no __len Symbol"));var a=apply(r,e,[]);return push(t,a),1}};if("function"==typeof Symbol){Object.prototype[Symbol.for("__pairs")]=function(){return{iter:function(t){if(!(this.index>=this.keys.length)){var e=this.keys[this.index++];return[e,this.object[e]]}},state:{object:this,keys:Object.keys(this),index:0}}};var __len=function(){return this.length};Array.prototype[Symbol.for("__len")]=__len,[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach(function(t){Object.getPrototypeOf(new t)[Symbol.for("__len")]=__len})}var luaopen_js=function(t){return states.set(getmainthread(t),new WeakMap),lua_atnativeerror(t,atnativeerror),luaL_newlib(t,jslib),luaL_newmetatable(t,js_tname),luaL_setfuncs(t,jsmt,0),lua_pop(t,1),pushjs(t,null),lua_pushvalue(t,-1),lua_rawsetp(t,LUA_REGISTRYINDEX,null),lua_setfield(t,-2,to_luastring("null")),push(t,global_env),lua_setfield(t,-2,to_luastring("global")),1};module.exports.checkjs=checkjs,module.exports.testjs=testjs,module.exports.pushjs=pushjs,module.exports.push=push,module.exports.tojs=tojs,module.exports.luaopen_js=luaopen_js}])});
